{"ast":null,"code":"var _jsxFileName = \"/Users/francoferrari/Desktop/ITBA/IngeSoft/autowhapp/autowhapp-dashboard/src/pages/AddBusinessPage.tsx\",\n  _s = $RefreshSig$();\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddBusinessPage = () => {\n  _s();\n  const navigate = useNavigate();\n  const [business, setBusiness] = useState({\n    nombre: '',\n    numero_telefono: '',\n    tipo_negocio: '',\n    localidad: '',\n    direccion: '',\n    horarios: {\n      Lunes: {\n        open: '09:00',\n        close: '18:00'\n      },\n      Martes: {\n        open: '09:00',\n        close: '18:00'\n      },\n      Miércoles: {\n        open: '09:00',\n        close: '18:00'\n      },\n      Jueves: {\n        open: '09:00',\n        close: '18:00'\n      },\n      Viernes: {\n        open: '09:00',\n        close: '18:00'\n      },\n      Sábado: {\n        open: '09:00',\n        close: '18:00'\n      },\n      Domingo: {\n        open: '09:00',\n        close: '18:00'\n      }\n    },\n    contexto: ''\n  });\n  const [customType, setCustomType] = useState('');\n  const [message, setMessage] = useState('');\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setBusiness({\n      ...business,\n      [name]: value\n    });\n  };\n  const handleTypeChange = e => {\n    const value = e.target.value;\n    if (value === 'personalizado') {\n      setCustomType('');\n      setBusiness({\n        ...business,\n        tipo_negocio: 'personalizado'\n      });\n    } else {\n      setCustomType('');\n      setBusiness({\n        ...business,\n        tipo_negocio: value\n      });\n    }\n  };\n  const handleCustomTypeChange = e => {\n    const value = e.target.value;\n    setCustomType(value);\n    setBusiness({\n      ...business,\n      tipo_negocio: value\n    });\n  };\n  const handleHoursChange = (day, field, value) => {\n    setBusiness({\n      ...business,\n      horarios: {\n        ...business.horarios,\n        [day]: {\n          ...business.horarios[day],\n          [field]: value\n        }\n      }\n    });\n  };\n  const handleSave = () => {\n    // Validación en el frontend\n    if (!business.nombre || !business.numero_telefono) {\n      setMessage('Nombre y número de teléfono son requeridos');\n      return;\n    }\n    const businessToSave = {\n      nombre: business.nombre,\n      numero_telefono: business.numero_telefono,\n      tipo_negocio: business.tipo_negocio,\n      localidad: business.localidad,\n      direccion: business.direccion,\n      horarios: business.horarios,\n      contexto: business.contexto\n    };\n    axios.post('/api/negocios', businessToSave).then(response => {\n      setMessage('Negocio creado con éxito');\n      setTimeout(() => {\n        navigate('/');\n      }, 1500);\n    }).catch(error => {\n      console.error('Error al crear el negocio:', error);\n      // Mostrar un mensaje más específico basado en el error del backend\n      if (error.response) {\n        if (error.response.status === 400) {\n          setMessage('Nombre y número de teléfono son requeridos');\n        } else if (error.response.status === 500 && error.response.data.error.includes('UNIQUE constraint failed')) {\n          setMessage('El número de teléfono ya está registrado');\n        } else {\n          setMessage(`Error al crear el negocio: ${error.response.data.error || 'Error desconocido'}`);\n        }\n      } else {\n        setMessage('Error al conectar con el servidor');\n      }\n    });\n  };\n  const days = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'];\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      backgroundColor: '#2563EB',\n      minHeight: '100vh',\n      p: 3\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      sx: {\n        fontFamily: 'Poppins',\n        fontWeight: 'bold',\n        color: 'white',\n        mb: 4\n      },\n      children: \"Agregar Nuevo Negocio\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      className: \"bg-white rounded-lg p-6 max-w-[1000px] mx-auto\",\n      style: {\n        boxShadow: '0 0 7px 7px rgba(0,0,0,0.2)'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-5\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          sx: {\n            backgroundColor: '#34C759',\n            '&:hover': {\n              backgroundColor: '#2EA44F'\n            },\n            borderRadius: 2\n          },\n          onClick: handleSave,\n          children: \"Guardar Negocio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), message && /*#__PURE__*/_jsxDEV(Typography, {\n          color: message.includes('Error') ? 'error' : 'success.main',\n          mt: 2,\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n_s(AddBusinessPage, \"3PFIeA5VSrkGdx+1u3+yhmhwxok=\", false, function () {\n  return [useNavigate];\n});\n_c = AddBusinessPage;\nvar _c;\n$RefreshReg$(_c, \"AddBusinessPage\");","map":{"version":3,"names":["useNavigate","jsxDEV","_jsxDEV","AddBusinessPage","_s","navigate","business","setBusiness","useState","nombre","numero_telefono","tipo_negocio","localidad","direccion","horarios","Lunes","open","close","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo","contexto","customType","setCustomType","message","setMessage","handleInputChange","e","name","value","target","handleTypeChange","handleCustomTypeChange","handleHoursChange","day","field","handleSave","businessToSave","axios","post","then","response","setTimeout","catch","error","console","status","data","includes","days","Box","sx","backgroundColor","minHeight","p","children","Typography","variant","fontFamily","fontWeight","color","mb","fileName","_jsxFileName","lineNumber","columnNumber","className","style","boxShadow","Button","borderRadius","onClick","mt","_c","$RefreshReg$"],"sources":["/Users/francoferrari/Desktop/ITBA/IngeSoft/autowhapp/autowhapp-dashboard/src/pages/AddBusinessPage.tsx"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\n\nconst AddBusinessPage: React.FC = () => {\n  const navigate = useNavigate();\n  const [business, setBusiness] = useState({\n    nombre: '',\n    numero_telefono: '',\n    tipo_negocio: '',\n    localidad: '',\n    direccion: '',\n    horarios: {\n      Lunes: { open: '09:00', close: '18:00' },\n      Martes: { open: '09:00', close: '18:00' },\n      Miércoles: { open: '09:00', close: '18:00' },\n      Jueves: { open: '09:00', close: '18:00' },\n      Viernes: { open: '09:00', close: '18:00' },\n      Sábado: { open: '09:00', close: '18:00' },\n      Domingo: { open: '09:00', close: '18:00' },\n    },\n    contexto: '',\n  });\n  const [customType, setCustomType] = useState<string>('');\n  const [message, setMessage] = useState<string>('');\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setBusiness({ ...business, [name]: value });\n  };\n\n  const handleTypeChange = (e: React.ChangeEvent<{ value: unknown }>) => {\n    const value = e.target.value as string;\n    if (value === 'personalizado') {\n      setCustomType('');\n      setBusiness({ ...business, tipo_negocio: 'personalizado' });\n    } else {\n      setCustomType('');\n      setBusiness({ ...business, tipo_negocio: value });\n    }\n  };\n\n  const handleCustomTypeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setCustomType(value);\n    setBusiness({ ...business, tipo_negocio: value });\n  };\n\n  const handleHoursChange = (day: keyof typeof business.horarios, field: 'open' | 'close', value: string) => {\n    setBusiness({\n      ...business,\n      horarios: {\n        ...business.horarios,\n        [day]: {\n          ...business.horarios[day],\n          [field]: value,\n        },\n      },\n    });\n  };\n\n  const handleSave = () => {\n    // Validación en el frontend\n    if (!business.nombre || !business.numero_telefono) {\n      setMessage('Nombre y número de teléfono son requeridos');\n      return;\n    }\n\n    const businessToSave = {\n      nombre: business.nombre,\n      numero_telefono: business.numero_telefono,\n      tipo_negocio: business.tipo_negocio,\n      localidad: business.localidad,\n      direccion: business.direccion,\n      horarios: business.horarios,\n      contexto: business.contexto,\n    };\n\n    axios.post('/api/negocios', businessToSave)\n      .then(response => {\n        setMessage('Negocio creado con éxito');\n        setTimeout(() => {\n          navigate('/');\n        }, 1500);\n      })\n      .catch(error => {\n        console.error('Error al crear el negocio:', error);\n        // Mostrar un mensaje más específico basado en el error del backend\n        if (error.response) {\n          if (error.response.status === 400) {\n            setMessage('Nombre y número de teléfono son requeridos');\n          } else if (error.response.status === 500 && error.response.data.error.includes('UNIQUE constraint failed')) {\n            setMessage('El número de teléfono ya está registrado');\n          } else {\n            setMessage(`Error al crear el negocio: ${error.response.data.error || 'Error desconocido'}`);\n          }\n        } else {\n          setMessage('Error al conectar con el servidor');\n        }\n      });\n  };\n\n  const days: (keyof typeof business.horarios)[] = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'];\n\n  return (\n    <Box sx={{ backgroundColor: '#2563EB', minHeight: '100vh', p: 3 }}>\n      <Typography variant=\"h4\" sx={{ fontFamily: 'Poppins', fontWeight: 'bold', color: 'white', mb: 4 }}>\n        Agregar Nuevo Negocio\n      </Typography>\n      <Box className=\"bg-white rounded-lg p-6 max-w-[1000px] mx-auto\" style={{ boxShadow: '0 0 7px 7px rgba(0,0,0,0.2)' }}>\n        <div className=\"space-y-5\">\n          {/* ... resto del JSX sin cambios ... */}\n          <Button\n            variant=\"contained\"\n            sx={{ backgroundColor: '#34C759', '&:hover': { backgroundColor: '#2EA44F' }, borderRadius: 2 }}\n            onClick={handleSave}\n          >\n            Guardar Negocio\n          </Button>\n\n          {message && (\n            <Typography color={message.includes('Error') ? 'error' : 'success.main'} mt={2}>\n              {message}\n            </Typography>\n          )}\n        </div>\n      </Box>\n    </Box>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}