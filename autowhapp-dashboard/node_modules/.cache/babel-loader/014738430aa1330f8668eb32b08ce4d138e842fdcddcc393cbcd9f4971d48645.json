{"ast":null,"code":"import React,{useState,useEffect}from'react';import Header from'../components/Header';import Sidebar from'../components/Sidebar';import BotStatus from'../components/BotStatus';import MainConfig from'../components/MainConfig';import Products from'../components/Products';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ConfigPage=()=>{const[negocioId,setNegocioId]=useState(null);const[negocio,setNegocio]=useState(null);// Cargar datos de negocio activo\nuseEffect(()=>{if(negocioId!==null){axios.get(`/api/negocio/${negocioId}`).then(res=>setNegocio(res.data)).catch(err=>setNegocio(null));}},[negocioId]);const handleNegocioChange=nuevoId=>{setNegocioId(nuevoId);};// Accionado por el switch\nconst handleToggleBot=nuevoEstado=>{if(negocioId!==null){axios.post('/api/actualizar-estado-bot',{negocioId,estadoBot:nuevoEstado}).then(()=>{setNegocio(prev=>prev?{...prev,estado_bot:nuevoEstado}:prev);}).catch(()=>{});// Manejo de error agregable\n}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{onNegocioChange:handleNegocioChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(Sidebar,{selected:\"config\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow bg-blue-600 p-6 min-h-screen\",children:negocioId&&negocio?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-poppins font-bold text-white mt-3\",children:\"Configuraci\\xF3n de Chatbot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex justify-end max-w-xl\",children:/*#__PURE__*/_jsx(BotStatus,{negocioId:negocioId,active:!!negocio.estado_bot,onToggle:handleToggleBot})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 flex-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 md:flex-[0_0_100%]\",children:/*#__PURE__*/_jsx(MainConfig,{negocioId:negocioId})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 md:flex-[0_0_100%]\",children:/*#__PURE__*/_jsx(Products,{})})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-white font-poppins text-lg\",children:\"Seleccione un negocio para comenzar\"})})]})]});};export default ConfigPage;","map":{"version":3,"names":["React","useState","useEffect","Header","Sidebar","BotStatus","MainConfig","Products","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ConfigPage","negocioId","setNegocioId","negocio","setNegocio","get","then","res","data","catch","err","handleNegocioChange","nuevoId","handleToggleBot","nuevoEstado","post","estadoBot","prev","estado_bot","children","onNegocioChange","className","selected","active","onToggle"],"sources":["/Users/francoferrari/Desktop/ITBA/IngeSoft/autowhapp/autowhapp-dashboard/src/pages/ConfigPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Header from '../components/Header';\nimport Sidebar from '../components/Sidebar';\nimport BotStatus from '../components/BotStatus';\nimport MainConfig from '../components/MainConfig';\nimport Products from '../components/Products';\nimport axios from 'axios';\n\nconst ConfigPage: React.FC = () => {\n  const [negocioId, setNegocioId] = useState<number | null>(null);\n  const [negocio, setNegocio] = useState<any>(null);\n\n  // Cargar datos de negocio activo\n  useEffect(() => {\n    if (negocioId !== null) {\n      axios.get(`/api/negocio/${negocioId}`)\n        .then(res => setNegocio(res.data))\n        .catch(err => setNegocio(null));\n    }\n  }, [negocioId]);\n\n  const handleNegocioChange = (nuevoId: number) => {\n    setNegocioId(nuevoId);\n  };\n\n  // Accionado por el switch\n  const handleToggleBot = (nuevoEstado: boolean) => {\n    if (negocioId !== null) {\n      axios.post('/api/actualizar-estado-bot', { negocioId, estadoBot: nuevoEstado })\n        .then(() => {\n          setNegocio((prev: any) => prev ? { ...prev, estado_bot: nuevoEstado } : prev);\n        })\n        .catch(() => {}); // Manejo de error agregable\n    }\n  };\n\n  return (\n    <div>\n      <Header onNegocioChange={handleNegocioChange} />\n      <div className=\"flex\">\n        <Sidebar selected=\"config\" />\n        <div className=\"flex-grow bg-blue-600 p-6 min-h-screen\">\n          {negocioId && negocio ? (\n            <>\n              {/* Título y BotStatus */}\n              <div className=\"flex justify-between items-start mb-6\">\n                <h2 className=\"text-2xl font-poppins font-bold text-white mt-3\">\n                  Configuración de Chatbot\n                </h2>\n                <div className=\"flex-1 flex justify-end max-w-xl\">\n                  <BotStatus \n                    negocioId={negocioId} \n                    active={!!negocio.estado_bot} \n                    onToggle={handleToggleBot}\n                  />\n                </div>\n              </div>\n              <div className=\"flex gap-3 flex-wrap\">\n                <div className=\"flex-1 md:flex-[0_0_100%]\">\n                  <MainConfig negocioId={negocioId} />\n                </div>\n                <div className=\"flex-1 md:flex-[0_0_100%]\">\n                  <Products />\n                </div>\n              </div>\n            </>\n          ) : (\n            <div className=\"text-white font-poppins text-lg\">\n              Seleccione un negocio para comenzar\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ConfigPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}