{"__type":"$$EventMessageAudit","id":"00a86402-6481-456d-97d4-73f3f5162f2e","ts":"2025-05-05T18:36:41.619-03:00","eventName":"n8n.audit.user.login.success","message":"n8n.audit.user.login.success","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","authenticationMethod":"email"}}
{"__type":"$$EventMessageConfirm","confirm":"00a86402-6481-456d-97d4-73f3f5162f2e","ts":"2025-05-05T18:36:41.619-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"77b3adca-84c4-4f0f-b26e-e9b6c0850d56","ts":"2025-05-05T18:36:55.477-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"517","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"77b3adca-84c4-4f0f-b26e-e9b6c0850d56","ts":"2025-05-05T18:36:55.478-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6cb1937d-ff56-4126-9dfa-9ddc4d7cbf79","ts":"2025-05-05T18:36:55.478-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"517","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"6cb1937d-ff56-4126-9dfa-9ddc4d7cbf79","ts":"2025-05-05T18:36:55.478-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c6a9a6a3-0160-4151-ac52-0da220e4e9b5","ts":"2025-05-05T18:36:55.480-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"517","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"c6a9a6a3-0160-4151-ac52-0da220e4e9b5","ts":"2025-05-05T18:36:55.480-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"95c45a03-366b-4ed4-91b9-2792a3943e2f","ts":"2025-05-05T18:36:55.480-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"517","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"95c45a03-366b-4ed4-91b9-2792a3943e2f","ts":"2025-05-05T18:36:55.481-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d4dc702f-b69e-4201-a4f3-a7821b9ab433","ts":"2025-05-05T18:36:55.486-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"517","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"d4dc702f-b69e-4201-a4f3-a7821b9ab433","ts":"2025-05-05T18:36:55.486-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5d733fe4-e833-4707-8af5-fa1a67ced564","ts":"2025-05-05T18:36:55.487-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"517","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"AI Agent"}}
{"__type":"$$EventMessageConfirm","confirm":"5d733fe4-e833-4707-8af5-fa1a67ced564","ts":"2025-05-05T18:36:55.487-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"03094f59-34da-48a9-8059-82ba518a3ff2","ts":"2025-05-05T18:36:56.422-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"517","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model"}}
{"__type":"$$EventMessageConfirm","confirm":"03094f59-34da-48a9-8059-82ba518a3ff2","ts":"2025-05-05T18:36:56.422-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5667538b-573f-4765-81c1-3cd9f6f124fe","ts":"2025-05-05T18:36:58.947-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"517","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model"}}
{"__type":"$$EventMessageConfirm","confirm":"5667538b-573f-4765-81c1-3cd9f6f124fe","ts":"2025-05-05T18:36:58.947-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"2376ce03-3fb5-454b-ac2c-8242f629c0dd","ts":"2025-05-05T18:36:58.948-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"517","nodeName":"OpenAI Chat Model","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\nUsa la base de datos para obtener el contexto en el que te encuentras, y a partir de ahi Responde a las preguntas de los clientes de manera amable, profesional y concisa. \\n\\nEl cliente te dice: hola\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"¡Ciao! Bienvenido a Pizzeria Italiana. ¿Cómo puedo ayudarte hoy? Si tienes alguna pregunta sobre nuestros deliciosos platos o nuestros horarios, estoy aquí para ayudarte. ¡Buon appetito!\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":43,\"promptTokens\":312,\"totalTokens\":355}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"2376ce03-3fb5-454b-ac2c-8242f629c0dd","ts":"2025-05-05T18:36:58.948-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c4700bdb-3b0c-4cc4-84cc-c74413e11a79","ts":"2025-05-05T18:36:58.956-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"517","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"AI Agent"}}
{"__type":"$$EventMessageConfirm","confirm":"c4700bdb-3b0c-4cc4-84cc-c74413e11a79","ts":"2025-05-05T18:36:58.956-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e0e5566c-3b7e-4428-81e4-ca2ec0ff1bb6","ts":"2025-05-05T18:36:58.956-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"517","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"e0e5566c-3b7e-4428-81e4-ca2ec0ff1bb6","ts":"2025-05-05T18:36:58.956-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ec318b42-e59b-4a22-a522-dcfaf9de5fa3","ts":"2025-05-05T18:36:58.964-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"517","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"ec318b42-e59b-4a22-a522-dcfaf9de5fa3","ts":"2025-05-05T18:36:58.964-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2c39575d-a405-4749-bf6f-8e76e4bab3fc","ts":"2025-05-05T18:36:58.964-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"517","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"2c39575d-a405-4749-bf6f-8e76e4bab3fc","ts":"2025-05-05T18:36:58.965-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a9a4c16a-f8f6-4b89-bb22-5c0ed176fb3a","ts":"2025-05-05T18:36:58.972-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"517","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"a9a4c16a-f8f6-4b89-bb22-5c0ed176fb3a","ts":"2025-05-05T18:36:58.972-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"f568e97f-424c-4521-889b-70f98e7cb0bc","ts":"2025-05-05T18:36:58.974-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"517","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"f568e97f-424c-4521-889b-70f98e7cb0bc","ts":"2025-05-05T18:36:58.974-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"9fca838e-850d-479b-a4b4-08f3a4e6c66b","ts":"2025-05-05T18:37:45.557-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"518","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"9fca838e-850d-479b-a4b4-08f3a4e6c66b","ts":"2025-05-05T18:37:45.557-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"06e4dca5-9055-4814-b83e-9be6cad39318","ts":"2025-05-05T18:37:45.557-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"06e4dca5-9055-4814-b83e-9be6cad39318","ts":"2025-05-05T18:37:45.558-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fb75fd82-9ccd-458a-8dda-a4f300978058","ts":"2025-05-05T18:37:45.558-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"fb75fd82-9ccd-458a-8dda-a4f300978058","ts":"2025-05-05T18:37:45.558-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c4e0486e-6c02-478a-b6aa-13e63e9b587e","ts":"2025-05-05T18:37:45.558-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"c4e0486e-6c02-478a-b6aa-13e63e9b587e","ts":"2025-05-05T18:37:45.558-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d9dc0e5c-0ed7-4842-a665-1b1f2ed2151e","ts":"2025-05-05T18:37:45.561-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"d9dc0e5c-0ed7-4842-a665-1b1f2ed2151e","ts":"2025-05-05T18:37:45.561-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f7bbc2f2-77e2-4efb-8813-426b14e468fa","ts":"2025-05-05T18:37:45.561-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"f7bbc2f2-77e2-4efb-8813-426b14e468fa","ts":"2025-05-05T18:37:45.561-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3a37f623-26c0-4107-bb70-a64928ddd609","ts":"2025-05-05T18:37:45.622-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"3a37f623-26c0-4107-bb70-a64928ddd609","ts":"2025-05-05T18:37:45.622-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e6298562-1cd2-4d89-bf54-bfb82d45b007","ts":"2025-05-05T18:37:47.454-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"e6298562-1cd2-4d89-bf54-bfb82d45b007","ts":"2025-05-05T18:37:47.454-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"4009e3fd-da97-4238-a562-a1a1d5b8ca31","ts":"2025-05-05T18:37:47.454-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"518","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\nUsa la base de datos para obtener el contexto en el que te encuentras.\\n\\nTu tarea es determinar si el mensaje del cliente indica un intento de hacer un pedido de nuestros servicios/productos. Si es un pedido, identifica el producto y la cantidad (si no se menciona la cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos adicionales como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa este formato exacto:\\n\\n{\\\"esPedido\\\":1,\\\"producto\\\":\\\"nombre del producto\\\",\\\"cantidad\\\":número,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nSi NO es un pedido, responde SOLO con el siguiente JSON válido en una sola línea, sin texto adicional, incluyendo los campos \\\"producto\\\" y \\\"cantidad\\\" con valores por defecto:\\n\\n{\\\"esPedido\\\":0,\\\"producto\\\":null,\\\"cantidad\\\":0,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: hola\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"producto\\\":null,\\\"cantidad\\\":0,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":33,\"promptTokens\":521,\"totalTokens\":554}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"4009e3fd-da97-4238-a562-a1a1d5b8ca31","ts":"2025-05-05T18:37:47.454-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4f8cc403-5f32-49d3-88ba-f6c3718fda2e","ts":"2025-05-05T18:37:47.457-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"4f8cc403-5f32-49d3-88ba-f6c3718fda2e","ts":"2025-05-05T18:37:47.457-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7313032b-ea8f-4099-9c87-a24c4362b9fe","ts":"2025-05-05T18:37:47.457-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"7313032b-ea8f-4099-9c87-a24c4362b9fe","ts":"2025-05-05T18:37:47.457-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f8d3f3ed-ef16-44a8-a861-47752eb64fb6","ts":"2025-05-05T18:37:47.474-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"f8d3f3ed-ef16-44a8-a861-47752eb64fb6","ts":"2025-05-05T18:37:47.474-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"637c29e2-4d06-40a1-bc2f-996b5a84898f","ts":"2025-05-05T18:37:47.474-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"637c29e2-4d06-40a1-bc2f-996b5a84898f","ts":"2025-05-05T18:37:47.474-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c7d5a4db-8a38-4733-a1b2-23f874bcd206","ts":"2025-05-05T18:37:47.480-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"c7d5a4db-8a38-4733-a1b2-23f874bcd206","ts":"2025-05-05T18:37:47.480-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8f8110a7-a683-46de-b84c-b14e1b8557e5","ts":"2025-05-05T18:37:47.480-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"AI Agent"}}
{"__type":"$$EventMessageConfirm","confirm":"8f8110a7-a683-46de-b84c-b14e1b8557e5","ts":"2025-05-05T18:37:47.480-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fc68e6ca-5114-4b5f-938b-d84fa9c43a13","ts":"2025-05-05T18:37:47.490-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model"}}
{"__type":"$$EventMessageConfirm","confirm":"fc68e6ca-5114-4b5f-938b-d84fa9c43a13","ts":"2025-05-05T18:37:47.491-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a8a9862d-5f6a-459a-b193-531175130b81","ts":"2025-05-05T18:37:50.024-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model"}}
{"__type":"$$EventMessageConfirm","confirm":"a8a9862d-5f6a-459a-b193-531175130b81","ts":"2025-05-05T18:37:50.024-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"45eccc19-534c-4647-9d53-c7cc363b0289","ts":"2025-05-05T18:37:50.024-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"518","nodeName":"OpenAI Chat Model","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado . Es un/una  ubicado/a en , la dirección es . Los horarios de atención son: , y el dueño del negocio te da la sugerencia/aclaracion de: . Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\nUsa la base de datos para obtener el contexto en el que te encuentras, y a partir de ahi Responde a las preguntas de los clientes de manera amable, profesional y concisa. \\n\\nEl cliente te dice: \"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"Parece que no he recibido la información necesaria para responder a tu consulta de manera adecuada. Por favor, indícame el nombre del negocio, la ubicación, la dirección, los horarios de atención, y cualquier preferencia o aclaración adicional que debería tener en cuenta al atender a los clientes. Una vez que tenga esos datos, estaré encantado de ayudarte con cualquier pregunta que tengas.\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":79,\"promptTokens\":185,\"totalTokens\":264}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"45eccc19-534c-4647-9d53-c7cc363b0289","ts":"2025-05-05T18:37:50.025-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e35d033b-1359-4c76-95d7-b28f85fc764d","ts":"2025-05-05T18:37:50.030-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"AI Agent"}}
{"__type":"$$EventMessageConfirm","confirm":"e35d033b-1359-4c76-95d7-b28f85fc764d","ts":"2025-05-05T18:37:50.030-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0c4ef33e-ee37-4fc4-a7d4-075dcd1dfa65","ts":"2025-05-05T18:37:50.031-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"0c4ef33e-ee37-4fc4-a7d4-075dcd1dfa65","ts":"2025-05-05T18:37:50.031-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5bc4c0a9-85ea-4a5a-ac4c-1b5201ada90b","ts":"2025-05-05T18:37:50.033-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"5bc4c0a9-85ea-4a5a-ac4c-1b5201ada90b","ts":"2025-05-05T18:37:50.033-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2d73c4f6-7306-4528-b5d4-82b6586fe06c","ts":"2025-05-05T18:37:50.033-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"2d73c4f6-7306-4528-b5d4-82b6586fe06c","ts":"2025-05-05T18:37:50.033-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"268a804e-3802-4c31-b4f7-d0e0e66be103","ts":"2025-05-05T18:37:50.035-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"518","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"268a804e-3802-4c31-b4f7-d0e0e66be103","ts":"2025-05-05T18:37:50.035-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"06d99dc1-4aa5-42f8-9696-9523465c2ccd","ts":"2025-05-05T18:37:50.037-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"518","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"06d99dc1-4aa5-42f8-9696-9523465c2ccd","ts":"2025-05-05T18:37:50.037-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"8a3cacb7-6f55-4df7-9fd7-83c395512d48","ts":"2025-05-05T18:39:30.135-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"519","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"8a3cacb7-6f55-4df7-9fd7-83c395512d48","ts":"2025-05-05T18:39:30.135-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"90a1efe8-c001-42cf-861e-0dcc308f4266","ts":"2025-05-05T18:39:30.142-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"90a1efe8-c001-42cf-861e-0dcc308f4266","ts":"2025-05-05T18:39:30.142-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6c269d6c-1364-4642-b4f6-8028efb714c9","ts":"2025-05-05T18:39:30.144-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"6c269d6c-1364-4642-b4f6-8028efb714c9","ts":"2025-05-05T18:39:30.144-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1e778183-bb29-4d44-9673-e9b74cf7b7fc","ts":"2025-05-05T18:39:30.145-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"1e778183-bb29-4d44-9673-e9b74cf7b7fc","ts":"2025-05-05T18:39:30.145-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c1ab7328-fda7-4eb4-8542-b7034a5b435e","ts":"2025-05-05T18:39:30.146-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"c1ab7328-fda7-4eb4-8542-b7034a5b435e","ts":"2025-05-05T18:39:30.147-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6f599510-dc5d-4b73-b08c-2fbbec8a8f74","ts":"2025-05-05T18:39:30.147-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"6f599510-dc5d-4b73-b08c-2fbbec8a8f74","ts":"2025-05-05T18:39:30.147-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3882aefe-93b5-40cd-a1b9-106a05276a0a","ts":"2025-05-05T18:39:30.160-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"3882aefe-93b5-40cd-a1b9-106a05276a0a","ts":"2025-05-05T18:39:30.160-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5c8f0a75-28e2-4887-8cdd-b92b8facbd30","ts":"2025-05-05T18:39:31.509-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"5c8f0a75-28e2-4887-8cdd-b92b8facbd30","ts":"2025-05-05T18:39:31.510-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"3b9c59b4-24cd-4b23-b805-b86f3705a2aa","ts":"2025-05-05T18:39:31.510-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"519","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\nUsa la base de datos para obtener el contexto en el que te encuentras.\\n\\nTu tarea es determinar si el mensaje del cliente indica un intento de hacer un pedido de nuestros servicios/productos. Si es un pedido, identifica el producto y la cantidad (si no se menciona la cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos adicionales como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa este formato exacto:\\n\\n{\\\"esPedido\\\":1,\\\"producto\\\":\\\"nombre del producto\\\",\\\"cantidad\\\":número,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nSi NO es un pedido, responde SOLO con el siguiente JSON válido en una sola línea, sin texto adicional, incluyendo los campos \\\"producto\\\" y \\\"cantidad\\\" con valores por defecto:\\n\\n{\\\"esPedido\\\":0,\\\"producto\\\":null,\\\"cantidad\\\":0,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: hola\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"producto\\\":null,\\\"cantidad\\\":0,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":33,\"promptTokens\":521,\"totalTokens\":554}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"3b9c59b4-24cd-4b23-b805-b86f3705a2aa","ts":"2025-05-05T18:39:31.510-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2089d0df-d4b7-47ba-b647-253e11eb2c6f","ts":"2025-05-05T18:39:31.516-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"2089d0df-d4b7-47ba-b647-253e11eb2c6f","ts":"2025-05-05T18:39:31.516-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"dcd5fc0b-93e8-4841-99ed-03e45aeaf568","ts":"2025-05-05T18:39:31.517-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"dcd5fc0b-93e8-4841-99ed-03e45aeaf568","ts":"2025-05-05T18:39:31.517-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6d269bc9-0bbc-49d2-972e-13d9f8b47ac3","ts":"2025-05-05T18:39:31.532-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"6d269bc9-0bbc-49d2-972e-13d9f8b47ac3","ts":"2025-05-05T18:39:31.532-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"cfd8265d-7834-450d-80ed-a1346fa397a9","ts":"2025-05-05T18:39:31.533-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"cfd8265d-7834-450d-80ed-a1346fa397a9","ts":"2025-05-05T18:39:31.533-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"21de58c4-1afd-428f-bc9f-347fbd7b5b6a","ts":"2025-05-05T18:39:31.535-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"21de58c4-1afd-428f-bc9f-347fbd7b5b6a","ts":"2025-05-05T18:39:31.535-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"536b508f-3fc2-4433-92ed-95a04d2b34ef","ts":"2025-05-05T18:39:31.535-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"AI Agent"}}
{"__type":"$$EventMessageConfirm","confirm":"536b508f-3fc2-4433-92ed-95a04d2b34ef","ts":"2025-05-05T18:39:31.535-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ec98365f-30da-4401-b10f-50405dd3f865","ts":"2025-05-05T18:39:31.546-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model"}}
{"__type":"$$EventMessageConfirm","confirm":"ec98365f-30da-4401-b10f-50405dd3f865","ts":"2025-05-05T18:39:31.546-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9c0ef47a-d7a0-4ed2-b7f0-2a10da3eea90","ts":"2025-05-05T18:39:32.480-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model"}}
{"__type":"$$EventMessageConfirm","confirm":"9c0ef47a-d7a0-4ed2-b7f0-2a10da3eea90","ts":"2025-05-05T18:39:32.481-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"d4fb1476-f65e-41be-9c3f-06b9bdeb81bb","ts":"2025-05-05T18:39:32.481-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"519","nodeName":"OpenAI Chat Model","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado . Es un/una  ubicado/a en , la dirección es . Los horarios de atención son: , y el dueño del negocio te da la sugerencia/aclaracion de: . Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\nUsa la base de datos para obtener el contexto en el que te encuentras, y a partir de ahi Responde a las preguntas de los clientes de manera amable, profesional y concisa. \\n\\nEl cliente te dice: \"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"¡Hola! Gracias por contactarnos. ¿En qué puedo ayudarte hoy?\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":16,\"promptTokens\":185,\"totalTokens\":201}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"d4fb1476-f65e-41be-9c3f-06b9bdeb81bb","ts":"2025-05-05T18:39:32.481-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c6eccbc9-8e03-4bca-86fa-8c0575cd463d","ts":"2025-05-05T18:39:32.488-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"AI Agent"}}
{"__type":"$$EventMessageConfirm","confirm":"c6eccbc9-8e03-4bca-86fa-8c0575cd463d","ts":"2025-05-05T18:39:32.489-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d101b6ba-f598-420f-a3cb-c87249a31677","ts":"2025-05-05T18:39:32.490-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"d101b6ba-f598-420f-a3cb-c87249a31677","ts":"2025-05-05T18:39:32.490-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"50e54eee-6cc1-43c4-b0e7-7ea6372ffe7e","ts":"2025-05-05T18:39:32.493-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"50e54eee-6cc1-43c4-b0e7-7ea6372ffe7e","ts":"2025-05-05T18:39:32.494-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c256f238-fe51-4f34-a90a-45cbd04d850d","ts":"2025-05-05T18:39:32.497-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"c256f238-fe51-4f34-a90a-45cbd04d850d","ts":"2025-05-05T18:39:32.497-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a55cf98a-9b1e-4e35-8f83-55dd7ce9b574","ts":"2025-05-05T18:39:32.500-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"519","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"a55cf98a-9b1e-4e35-8f83-55dd7ce9b574","ts":"2025-05-05T18:39:32.500-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"42704a99-dc23-4045-b441-e1b7b16c62e4","ts":"2025-05-05T18:39:32.502-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"519","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"42704a99-dc23-4045-b441-e1b7b16c62e4","ts":"2025-05-05T18:39:32.502-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"f174bd94-cec1-4db1-82d2-ce31fe1b238c","ts":"2025-05-05T18:40:04.005-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"520","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"f174bd94-cec1-4db1-82d2-ce31fe1b238c","ts":"2025-05-05T18:40:04.005-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3828b6ce-8410-4e1f-8fbf-955375921d47","ts":"2025-05-05T18:40:04.006-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"3828b6ce-8410-4e1f-8fbf-955375921d47","ts":"2025-05-05T18:40:04.006-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"63f78a16-8cc9-4db8-a906-6b9802b99ad1","ts":"2025-05-05T18:40:04.007-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"63f78a16-8cc9-4db8-a906-6b9802b99ad1","ts":"2025-05-05T18:40:04.007-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5add3f2f-be5b-4ba7-bd64-e4b17f1f094d","ts":"2025-05-05T18:40:04.007-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"5add3f2f-be5b-4ba7-bd64-e4b17f1f094d","ts":"2025-05-05T18:40:04.007-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a1f3ff10-9468-4163-bad1-cc81a2b3b074","ts":"2025-05-05T18:40:04.009-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"a1f3ff10-9468-4163-bad1-cc81a2b3b074","ts":"2025-05-05T18:40:04.009-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e4309ddf-dfaa-4a25-8884-3031a51657c5","ts":"2025-05-05T18:40:04.009-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"e4309ddf-dfaa-4a25-8884-3031a51657c5","ts":"2025-05-05T18:40:04.009-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"510e34c3-840c-4a9a-a3a0-4e902d56d86a","ts":"2025-05-05T18:40:04.027-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"510e34c3-840c-4a9a-a3a0-4e902d56d86a","ts":"2025-05-05T18:40:04.027-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0abdb457-1585-4a82-bf41-e5a6f3f0494a","ts":"2025-05-05T18:40:05.120-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"0abdb457-1585-4a82-bf41-e5a6f3f0494a","ts":"2025-05-05T18:40:05.120-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"4aec1f11-9ff7-4322-b48b-b63e3119bc36","ts":"2025-05-05T18:40:05.120-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"520","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\nUsa la base de datos para obtener el contexto en el que te encuentras.\\n\\nTu tarea es determinar si el mensaje del cliente indica un intento de hacer un pedido de nuestros servicios/productos. Si es un pedido, identifica el producto y la cantidad (si no se menciona la cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos adicionales como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa este formato exacto:\\n\\n{\\\"esPedido\\\":1,\\\"producto\\\":\\\"nombre del producto\\\",\\\"cantidad\\\":número,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nSi NO es un pedido, responde SOLO con el siguiente JSON válido en una sola línea, sin texto adicional, incluyendo los campos \\\"producto\\\" y \\\"cantidad\\\" con valores por defecto:\\n\\n{\\\"esPedido\\\":0,\\\"producto\\\":null,\\\"cantidad\\\":0,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: como se llama el local?\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"producto\\\":null,\\\"cantidad\\\":0,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":33,\"promptTokens\":526,\"totalTokens\":559}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"4aec1f11-9ff7-4322-b48b-b63e3119bc36","ts":"2025-05-05T18:40:05.121-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fbefd4e4-c3ce-4d06-9fbd-aa02548c64db","ts":"2025-05-05T18:40:05.123-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"fbefd4e4-c3ce-4d06-9fbd-aa02548c64db","ts":"2025-05-05T18:40:05.123-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6ade81cd-f741-4715-8682-179e27bd94ba","ts":"2025-05-05T18:40:05.124-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"6ade81cd-f741-4715-8682-179e27bd94ba","ts":"2025-05-05T18:40:05.124-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6e207e57-9f76-492d-a5b6-6634dc31b3a8","ts":"2025-05-05T18:40:05.133-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"6e207e57-9f76-492d-a5b6-6634dc31b3a8","ts":"2025-05-05T18:40:05.133-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fd584aae-a0aa-4fb7-b78d-03a271b27f0d","ts":"2025-05-05T18:40:05.133-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"fd584aae-a0aa-4fb7-b78d-03a271b27f0d","ts":"2025-05-05T18:40:05.133-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2abbf497-e7fe-4c7a-a624-9a399f705cd6","ts":"2025-05-05T18:40:05.134-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"2abbf497-e7fe-4c7a-a624-9a399f705cd6","ts":"2025-05-05T18:40:05.134-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3ae5ed08-749d-4e35-bc92-e0f494e59f21","ts":"2025-05-05T18:40:05.134-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"AI Agent"}}
{"__type":"$$EventMessageConfirm","confirm":"3ae5ed08-749d-4e35-bc92-e0f494e59f21","ts":"2025-05-05T18:40:05.134-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"571b02c4-9bba-4807-a50c-40d1e0713192","ts":"2025-05-05T18:40:05.145-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model"}}
{"__type":"$$EventMessageConfirm","confirm":"571b02c4-9bba-4807-a50c-40d1e0713192","ts":"2025-05-05T18:40:05.145-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0d6fd3ea-3793-489b-8bc9-b88f7b7cbdee","ts":"2025-05-05T18:40:06.031-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model"}}
{"__type":"$$EventMessageConfirm","confirm":"0d6fd3ea-3793-489b-8bc9-b88f7b7cbdee","ts":"2025-05-05T18:40:06.031-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"6ee68660-39a5-4762-8e5a-50f817b737cb","ts":"2025-05-05T18:40:06.031-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"520","nodeName":"OpenAI Chat Model","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado . Es un/una  ubicado/a en , la dirección es . Los horarios de atención son: , y el dueño del negocio te da la sugerencia/aclaracion de: . Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\nUsa la base de datos para obtener el contexto en el que te encuentras, y a partir de ahi Responde a las preguntas de los clientes de manera amable, profesional y concisa. \\n\\nEl cliente te dice: \"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"¡Hola! Estoy aquí para ayudarte. Por favor, ¿cuál es tu pregunta o en qué puedo asistirte hoy?\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":26,\"promptTokens\":185,\"totalTokens\":211}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"6ee68660-39a5-4762-8e5a-50f817b737cb","ts":"2025-05-05T18:40:06.031-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"237392ff-b571-4428-affa-0c4bcf323597","ts":"2025-05-05T18:40:06.035-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"AI Agent"}}
{"__type":"$$EventMessageConfirm","confirm":"237392ff-b571-4428-affa-0c4bcf323597","ts":"2025-05-05T18:40:06.036-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"01af9021-251c-49eb-b90e-462a9e67168b","ts":"2025-05-05T18:40:06.037-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"01af9021-251c-49eb-b90e-462a9e67168b","ts":"2025-05-05T18:40:06.038-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2a006aa7-d3a8-43a6-af96-93e05a585b6e","ts":"2025-05-05T18:40:06.041-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"2a006aa7-d3a8-43a6-af96-93e05a585b6e","ts":"2025-05-05T18:40:06.041-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d190e4f7-9917-4faa-bb6a-9ecb36e7c12e","ts":"2025-05-05T18:40:06.042-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"d190e4f7-9917-4faa-bb6a-9ecb36e7c12e","ts":"2025-05-05T18:40:06.042-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ad634145-ccd3-46b9-8401-968559dc958e","ts":"2025-05-05T18:40:06.044-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"520","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"ad634145-ccd3-46b9-8401-968559dc958e","ts":"2025-05-05T18:40:06.044-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"ab2c3b75-1c24-437e-bac6-966a2b297f5a","ts":"2025-05-05T18:40:06.046-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"520","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"ab2c3b75-1c24-437e-bac6-966a2b297f5a","ts":"2025-05-05T18:40:06.046-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"3dbe0dbc-450e-4744-9197-90e19eaafb72","ts":"2025-05-05T19:19:08.720-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"3dbe0dbc-450e-4744-9197-90e19eaafb72","ts":"2025-05-05T19:19:08.721-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"e61f5073-f220-4c60-b5a7-9e0bb9a0e4f8","ts":"2025-05-05T19:19:22.426-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"521","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"e61f5073-f220-4c60-b5a7-9e0bb9a0e4f8","ts":"2025-05-05T19:19:22.426-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8a66d18b-b9ee-46f6-98ed-69b567426952","ts":"2025-05-05T19:19:22.426-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"8a66d18b-b9ee-46f6-98ed-69b567426952","ts":"2025-05-05T19:19:22.427-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9cd1fbf6-c696-4540-a4a0-594f303e7ba7","ts":"2025-05-05T19:19:22.427-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"9cd1fbf6-c696-4540-a4a0-594f303e7ba7","ts":"2025-05-05T19:19:22.427-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fa7099b8-fd11-47a4-8e70-68098f052f71","ts":"2025-05-05T19:19:22.427-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"fa7099b8-fd11-47a4-8e70-68098f052f71","ts":"2025-05-05T19:19:22.427-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4a034b0d-9edc-42b7-a353-6f9f15dd9c84","ts":"2025-05-05T19:19:22.428-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"4a034b0d-9edc-42b7-a353-6f9f15dd9c84","ts":"2025-05-05T19:19:22.428-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6c8c29fb-8a3b-4fff-92b0-c89e767d5cc3","ts":"2025-05-05T19:19:22.429-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"6c8c29fb-8a3b-4fff-92b0-c89e767d5cc3","ts":"2025-05-05T19:19:22.429-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4a01456a-b6fb-439b-b1ac-3091bdeaa424","ts":"2025-05-05T19:19:22.451-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"4a01456a-b6fb-439b-b1ac-3091bdeaa424","ts":"2025-05-05T19:19:22.451-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5d4dfb8d-84e5-43e0-ad0d-d18461ba85c8","ts":"2025-05-05T19:19:24.156-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"5d4dfb8d-84e5-43e0-ad0d-d18461ba85c8","ts":"2025-05-05T19:19:24.156-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"1bfecf76-681a-4b53-a35f-52af66a7e3f7","ts":"2025-05-05T19:19:24.156-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"521","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\nUsa la base de datos para obtener el contexto en el que te encuentras.\\n\\nTu tarea es determinar si el mensaje del cliente indica un intento de hacer un pedido de nuestros servicios/productos. Si es un pedido, identifica el producto y la cantidad (si no se menciona la cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos adicionales como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa este formato exacto:\\n\\n{\\\"esPedido\\\":1,\\\"producto\\\":\\\"nombre del producto\\\",\\\"cantidad\\\":número,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nSi NO es un pedido, responde SOLO con el siguiente JSON válido en una sola línea, sin texto adicional, incluyendo los campos \\\"producto\\\" y \\\"cantidad\\\" con valores por defecto:\\n\\n{\\\"esPedido\\\":0,\\\"producto\\\":null,\\\"cantidad\\\":0,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: hola\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"producto\\\":null,\\\"cantidad\\\":0,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":33,\"promptTokens\":521,\"totalTokens\":554}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"1bfecf76-681a-4b53-a35f-52af66a7e3f7","ts":"2025-05-05T19:19:24.156-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ad37460c-cd12-46cb-b277-3227da98aea6","ts":"2025-05-05T19:19:24.158-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"ad37460c-cd12-46cb-b277-3227da98aea6","ts":"2025-05-05T19:19:24.158-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"556779be-2456-4acb-9911-24686a518712","ts":"2025-05-05T19:19:24.158-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"556779be-2456-4acb-9911-24686a518712","ts":"2025-05-05T19:19:24.158-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0c70f6f6-019f-4613-943f-e83bde6db4ea","ts":"2025-05-05T19:19:24.164-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"0c70f6f6-019f-4613-943f-e83bde6db4ea","ts":"2025-05-05T19:19:24.164-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e2597877-fa31-4fd0-9152-16e75eba12f1","ts":"2025-05-05T19:19:24.164-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"e2597877-fa31-4fd0-9152-16e75eba12f1","ts":"2025-05-05T19:19:24.164-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"147bdd19-41f7-4ef9-bbb9-5134f7d5c889","ts":"2025-05-05T19:19:24.165-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"147bdd19-41f7-4ef9-bbb9-5134f7d5c889","ts":"2025-05-05T19:19:24.165-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3201ade9-2860-468f-a97c-7e04483b0bd5","ts":"2025-05-05T19:19:24.165-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"AI Agent"}}
{"__type":"$$EventMessageConfirm","confirm":"3201ade9-2860-468f-a97c-7e04483b0bd5","ts":"2025-05-05T19:19:24.165-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"eb0c72fb-77e3-4ddf-9009-2dfc28c4d242","ts":"2025-05-05T19:19:24.201-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model"}}
{"__type":"$$EventMessageConfirm","confirm":"eb0c72fb-77e3-4ddf-9009-2dfc28c4d242","ts":"2025-05-05T19:19:24.201-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"879e36e0-d0fd-460c-ba04-f2d3f8312e86","ts":"2025-05-05T19:19:25.644-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model"}}
{"__type":"$$EventMessageConfirm","confirm":"879e36e0-d0fd-460c-ba04-f2d3f8312e86","ts":"2025-05-05T19:19:25.645-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"0e474aca-9f29-4ccc-a249-c5d6161b2d40","ts":"2025-05-05T19:19:25.645-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"521","nodeName":"OpenAI Chat Model","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado . Es un/una  ubicado/a en , la dirección es . Los horarios de atención son: , y el dueño del negocio te da la sugerencia/aclaracion de: . Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\nUsa la base de datos para obtener el contexto en el que te encuentras, y a partir de ahi Responde a las preguntas de los clientes de manera amable, profesional y concisa. \\n\\nEl cliente te dice: , respondele adecuadamente.\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"Claro, estaré encantado de ayudarte. Sin embargo, parece que falta información en tu mensaje. Por favor, completa los detalles que faltan, como el nombre del negocio, ubicación, horarios, y cualquier aclaración o sugerencia del dueño. De esa manera, podré responder a las preguntas de los clientes de manera adecuada. ¡Gracias!\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":71,\"promptTokens\":190,\"totalTokens\":261}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"0e474aca-9f29-4ccc-a249-c5d6161b2d40","ts":"2025-05-05T19:19:25.645-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"cadec11d-d863-414b-a221-1be61e087269","ts":"2025-05-05T19:19:25.649-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"AI Agent"}}
{"__type":"$$EventMessageConfirm","confirm":"cadec11d-d863-414b-a221-1be61e087269","ts":"2025-05-05T19:19:25.649-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0a8ed931-9006-4845-860f-5a2b76f3f7ba","ts":"2025-05-05T19:19:25.649-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"0a8ed931-9006-4845-860f-5a2b76f3f7ba","ts":"2025-05-05T19:19:25.649-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e96856b6-177e-4532-b53d-f614a8652915","ts":"2025-05-05T19:19:25.652-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"e96856b6-177e-4532-b53d-f614a8652915","ts":"2025-05-05T19:19:25.652-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f2996abf-0a77-4cb5-a7cf-2d0877732d89","ts":"2025-05-05T19:19:25.654-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"f2996abf-0a77-4cb5-a7cf-2d0877732d89","ts":"2025-05-05T19:19:25.654-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c33fd5ea-4e53-4b1e-8d2b-f44761810a40","ts":"2025-05-05T19:19:25.655-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"521","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"c33fd5ea-4e53-4b1e-8d2b-f44761810a40","ts":"2025-05-05T19:19:25.655-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"55fe265a-2c79-470a-9021-e791673fdd2e","ts":"2025-05-05T19:19:25.657-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"521","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"55fe265a-2c79-470a-9021-e791673fdd2e","ts":"2025-05-05T19:19:25.657-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"273d2768-bfbc-4184-9c8d-63a0beca52d8","ts":"2025-05-05T19:23:06.592-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"273d2768-bfbc-4184-9c8d-63a0beca52d8","ts":"2025-05-05T19:23:06.594-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"4a265cac-6dd5-4c98-9b9f-82df030de0d8","ts":"2025-05-05T19:23:32.003-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"522","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"4a265cac-6dd5-4c98-9b9f-82df030de0d8","ts":"2025-05-05T19:23:32.003-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ac98184c-e998-4934-adf7-df850ab459c9","ts":"2025-05-05T19:23:32.004-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"ac98184c-e998-4934-adf7-df850ab459c9","ts":"2025-05-05T19:23:32.004-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1ceb3db8-7b0d-4c62-a5cf-3de32e222556","ts":"2025-05-05T19:23:32.005-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"1ceb3db8-7b0d-4c62-a5cf-3de32e222556","ts":"2025-05-05T19:23:32.005-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"46ff6c67-a086-4bfd-8b85-ecd0e3622730","ts":"2025-05-05T19:23:32.005-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"46ff6c67-a086-4bfd-8b85-ecd0e3622730","ts":"2025-05-05T19:23:32.005-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ded1e213-0ced-4711-9fb6-e1982d3b540c","ts":"2025-05-05T19:23:32.006-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"ded1e213-0ced-4711-9fb6-e1982d3b540c","ts":"2025-05-05T19:23:32.006-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9276fe6a-42b3-4072-965b-45a320cc8710","ts":"2025-05-05T19:23:32.006-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"9276fe6a-42b3-4072-965b-45a320cc8710","ts":"2025-05-05T19:23:32.006-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f481dafc-4c2b-4f57-9135-d4324fcd0340","ts":"2025-05-05T19:23:32.039-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"f481dafc-4c2b-4f57-9135-d4324fcd0340","ts":"2025-05-05T19:23:32.039-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2c4b8c4b-d467-4f39-b02b-f7dd66373762","ts":"2025-05-05T19:23:33.626-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"2c4b8c4b-d467-4f39-b02b-f7dd66373762","ts":"2025-05-05T19:23:33.627-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"70779354-ea13-4c1a-86e1-71b2a00e5635","ts":"2025-05-05T19:23:33.627-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"522","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\nUsa la base de datos para obtener el contexto en el que te encuentras.\\n\\nTu tarea es determinar si un mensaje de un cliente esta teniendo la intencion de hacer un pedido de nuestros servicios/productos. Si es un pedido, identifica el producto y la cantidad (si no se menciona la cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos adicionales como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa este formato exacto:\\n\\n{\\\"esPedido\\\":1,\\\"producto\\\":\\\"nombre del producto\\\",\\\"cantidad\\\":número,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nSi NO es un pedido, responde SOLO con el siguiente JSON válido en una sola línea, sin texto adicional, incluyendo los campos \\\"producto\\\" y \\\"cantidad\\\" con valores por defecto:\\n\\n{\\\"esPedido\\\":0,\\\"producto\\\":null,\\\"cantidad\\\":0,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: hola\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"producto\\\":null,\\\"cantidad\\\":0,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":33,\"promptTokens\":370,\"totalTokens\":403}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"70779354-ea13-4c1a-86e1-71b2a00e5635","ts":"2025-05-05T19:23:33.627-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8d13191f-1395-4685-a484-9f6929d49cf0","ts":"2025-05-05T19:23:33.631-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"8d13191f-1395-4685-a484-9f6929d49cf0","ts":"2025-05-05T19:23:33.632-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"60449c3e-d57f-46b6-b2da-201abc39ac72","ts":"2025-05-05T19:23:33.632-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"60449c3e-d57f-46b6-b2da-201abc39ac72","ts":"2025-05-05T19:23:33.632-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f24ff20d-c6c8-44af-af4b-8fad3c8999d3","ts":"2025-05-05T19:23:33.644-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"f24ff20d-c6c8-44af-af4b-8fad3c8999d3","ts":"2025-05-05T19:23:33.644-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7c811c8f-cf5e-44ab-873e-433c7fe92438","ts":"2025-05-05T19:23:33.644-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"7c811c8f-cf5e-44ab-873e-433c7fe92438","ts":"2025-05-05T19:23:33.644-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5cda990c-2ac4-4cfd-9cd9-0ac8f745d58b","ts":"2025-05-05T19:23:33.645-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"5cda990c-2ac4-4cfd-9cd9-0ac8f745d58b","ts":"2025-05-05T19:23:33.645-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7def39b6-dc3b-4929-9808-59f833efa7f9","ts":"2025-05-05T19:23:33.645-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"AI Agent"}}
{"__type":"$$EventMessageConfirm","confirm":"7def39b6-dc3b-4929-9808-59f833efa7f9","ts":"2025-05-05T19:23:33.645-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"45f7ff87-eb5a-48ab-a4cd-7693dc7f3136","ts":"2025-05-05T19:23:33.654-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model"}}
{"__type":"$$EventMessageConfirm","confirm":"45f7ff87-eb5a-48ab-a4cd-7693dc7f3136","ts":"2025-05-05T19:23:33.654-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8deb3b8b-b171-4235-a90f-4e0d8ec62668","ts":"2025-05-05T19:23:35.706-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model"}}
{"__type":"$$EventMessageConfirm","confirm":"8deb3b8b-b171-4235-a90f-4e0d8ec62668","ts":"2025-05-05T19:23:35.706-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"c8b030d2-da4f-4898-b2c8-61fd629d98ae","ts":"2025-05-05T19:23:35.706-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"522","nodeName":"OpenAI Chat Model","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado . Es un/una  ubicado/a en , la dirección es . Los horarios de atención son: , y el dueño del negocio te da la sugerencia/aclaracion de: . Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\nUsa la base de datos para obtener el contexto en el que te encuentras, y a partir de ahi Responde a las preguntas de los clientes de manera amable, profesional y concisa. \\n\\nEl cliente te dice: , respondele adecuadamente.\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"Claro, estaré encantado de ayudarte. Sin embargo, necesito que me proporciones la información faltante, como el nombre del negocio, su ubicación, la dirección, los horarios de atención y cualquier sugerencia o aclaración que el dueño haya proporcionado. También sería útil conocer los productos o servicios que ofrece el negocio. Una vez que tenga esa información, podré responder adecuadamente a las preguntas de los clientes. ¡Gracias!\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":88,\"promptTokens\":190,\"totalTokens\":278}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"c8b030d2-da4f-4898-b2c8-61fd629d98ae","ts":"2025-05-05T19:23:35.706-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a0553f6c-87e1-4caf-8751-238b045cbdae","ts":"2025-05-05T19:23:35.711-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"AI Agent"}}
{"__type":"$$EventMessageConfirm","confirm":"a0553f6c-87e1-4caf-8751-238b045cbdae","ts":"2025-05-05T19:23:35.711-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8df85fc7-8986-4170-87d5-e044e6adf619","ts":"2025-05-05T19:23:35.711-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"8df85fc7-8986-4170-87d5-e044e6adf619","ts":"2025-05-05T19:23:35.712-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ad20a118-d127-4fcd-a142-18f34ac3291f","ts":"2025-05-05T19:23:35.713-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"ad20a118-d127-4fcd-a142-18f34ac3291f","ts":"2025-05-05T19:23:35.713-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f47cd2ee-5955-46ec-9dfd-5a1f7b8a80ad","ts":"2025-05-05T19:23:35.714-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"f47cd2ee-5955-46ec-9dfd-5a1f7b8a80ad","ts":"2025-05-05T19:23:35.714-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"03ddd082-c45d-4c59-bc25-ab47cf541605","ts":"2025-05-05T19:23:35.715-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"522","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"03ddd082-c45d-4c59-bc25-ab47cf541605","ts":"2025-05-05T19:23:35.715-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"ebd03e7f-4eab-46ce-a0a7-0ea96487be25","ts":"2025-05-05T19:23:35.716-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"522","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"ebd03e7f-4eab-46ce-a0a7-0ea96487be25","ts":"2025-05-05T19:23:35.716-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"ee9cc0e9-33da-41e1-9879-3a6b024f45e7","ts":"2025-05-05T19:33:20.589-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"ee9cc0e9-33da-41e1-9879-3a6b024f45e7","ts":"2025-05-05T19:33:20.589-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"540aee88-cc93-4037-bbde-cade79bc3681","ts":"2025-05-05T19:33:31.187-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"523","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"540aee88-cc93-4037-bbde-cade79bc3681","ts":"2025-05-05T19:33:31.187-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"04299538-98b4-41f8-af3a-d78f13893207","ts":"2025-05-05T19:33:31.187-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"04299538-98b4-41f8-af3a-d78f13893207","ts":"2025-05-05T19:33:31.187-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"228127c7-7b03-483c-8275-7e5c83f95e0c","ts":"2025-05-05T19:33:31.187-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"228127c7-7b03-483c-8275-7e5c83f95e0c","ts":"2025-05-05T19:33:31.187-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"eaad98e2-4e68-4c8f-9396-e902987ce376","ts":"2025-05-05T19:33:31.188-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"eaad98e2-4e68-4c8f-9396-e902987ce376","ts":"2025-05-05T19:33:31.188-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"69421653-69b4-4eb3-8f17-7a3b91235a8d","ts":"2025-05-05T19:33:31.188-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"69421653-69b4-4eb3-8f17-7a3b91235a8d","ts":"2025-05-05T19:33:31.188-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b29b167b-143b-4904-a91a-0c9f3c9c5ef4","ts":"2025-05-05T19:33:31.188-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"b29b167b-143b-4904-a91a-0c9f3c9c5ef4","ts":"2025-05-05T19:33:31.188-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"66d0b34c-bef7-4940-889e-5ffd3979c576","ts":"2025-05-05T19:33:31.243-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"66d0b34c-bef7-4940-889e-5ffd3979c576","ts":"2025-05-05T19:33:31.243-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d57983ef-1f1a-4885-8293-4e8be3567eb9","ts":"2025-05-05T19:33:32.819-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"d57983ef-1f1a-4885-8293-4e8be3567eb9","ts":"2025-05-05T19:33:32.819-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"e55a4f3a-1e38-435d-8f96-ccf5fad729a9","ts":"2025-05-05T19:33:32.820-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"523","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente esta teniendo la intencion de hacer un pedido de nuestros servicios/productos. Si es un pedido, identifica el producto y la cantidad (si no se menciona la cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos adicionales como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa este formato exacto:\\n\\n{\\\"esPedido\\\":1,\\\"producto\\\":\\\"nombre del producto\\\",\\\"cantidad\\\":número,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: hola\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"¡Hola! Bienvenido a Pizzería Italiana. ¿En qué puedo ayudarte hoy?\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":29,\"promptTokens\":505,\"totalTokens\":534}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"e55a4f3a-1e38-435d-8f96-ccf5fad729a9","ts":"2025-05-05T19:33:32.820-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e516452b-a0a4-408b-952b-fd1557288731","ts":"2025-05-05T19:33:32.835-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"e516452b-a0a4-408b-952b-fd1557288731","ts":"2025-05-05T19:33:32.835-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a361906d-8f72-47c5-a92a-e60a897d184a","ts":"2025-05-05T19:33:32.837-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"a361906d-8f72-47c5-a92a-e60a897d184a","ts":"2025-05-05T19:33:32.837-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a80fb60f-4ba0-471e-878c-0b4567e024be","ts":"2025-05-05T19:33:32.880-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"a80fb60f-4ba0-471e-878c-0b4567e024be","ts":"2025-05-05T19:33:32.880-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3138e5f1-d03d-47f9-8441-187c4eb9f90c","ts":"2025-05-05T19:33:32.882-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"3138e5f1-d03d-47f9-8441-187c4eb9f90c","ts":"2025-05-05T19:33:32.882-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"294cfaec-e27a-488c-b558-e12e1378ee2d","ts":"2025-05-05T19:33:32.888-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"294cfaec-e27a-488c-b558-e12e1378ee2d","ts":"2025-05-05T19:33:32.889-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d4bc263b-118e-4633-b9c0-b71abccc32d3","ts":"2025-05-05T19:33:32.890-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"d4bc263b-118e-4633-b9c0-b71abccc32d3","ts":"2025-05-05T19:33:32.890-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2f02a56b-b6d4-41f3-99b0-bd7128b8c4bc","ts":"2025-05-05T19:33:32.905-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaIA"}}
{"__type":"$$EventMessageConfirm","confirm":"2f02a56b-b6d4-41f3-99b0-bd7128b8c4bc","ts":"2025-05-05T19:33:32.906-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f4756b4d-ed02-48c4-8bd8-d13ba7a2d2ab","ts":"2025-05-05T19:33:32.910-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"f4756b4d-ed02-48c4-8bd8-d13ba7a2d2ab","ts":"2025-05-05T19:33:32.910-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7a4f2cd9-062d-4e2c-b0a4-dd9c8b7cc6d9","ts":"2025-05-05T19:33:32.915-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"523","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"7a4f2cd9-062d-4e2c-b0a4-dd9c8b7cc6d9","ts":"2025-05-05T19:33:32.915-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"38209a23-a3de-4fab-9ac4-ce2753b41c6b","ts":"2025-05-05T19:33:32.927-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"523","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"38209a23-a3de-4fab-9ac4-ce2753b41c6b","ts":"2025-05-05T19:33:32.939-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"0f0be1b7-37e7-4281-ae0e-d5c565e67d82","ts":"2025-05-05T19:36:21.894-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"0f0be1b7-37e7-4281-ae0e-d5c565e67d82","ts":"2025-05-05T19:36:21.895-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"29ff5cc2-1686-4457-ad25-9b82fa41ec3a","ts":"2025-05-05T19:36:28.680-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"524","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"29ff5cc2-1686-4457-ad25-9b82fa41ec3a","ts":"2025-05-05T19:36:28.680-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f7aa340f-0c64-41f2-8702-2df7c4f77780","ts":"2025-05-05T19:36:28.681-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"f7aa340f-0c64-41f2-8702-2df7c4f77780","ts":"2025-05-05T19:36:28.681-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"11185ce2-fde3-4179-911e-30f369725a48","ts":"2025-05-05T19:36:28.681-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"11185ce2-fde3-4179-911e-30f369725a48","ts":"2025-05-05T19:36:28.681-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6acd9834-a3b3-4b09-94c3-bd2bf82f496c","ts":"2025-05-05T19:36:28.681-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"6acd9834-a3b3-4b09-94c3-bd2bf82f496c","ts":"2025-05-05T19:36:28.681-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5794a15d-0311-4dec-8733-337b69172f2f","ts":"2025-05-05T19:36:28.682-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"5794a15d-0311-4dec-8733-337b69172f2f","ts":"2025-05-05T19:36:28.682-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1503bd69-c591-4461-bdd0-75173f447c12","ts":"2025-05-05T19:36:28.682-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"1503bd69-c591-4461-bdd0-75173f447c12","ts":"2025-05-05T19:36:28.682-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"892a4032-4c67-4a7e-9f15-beafcc15b437","ts":"2025-05-05T19:36:28.694-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"892a4032-4c67-4a7e-9f15-beafcc15b437","ts":"2025-05-05T19:36:28.694-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"58a187d2-0ab6-4de6-85b5-dd0fc28bc1b6","ts":"2025-05-05T19:36:29.944-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"58a187d2-0ab6-4de6-85b5-dd0fc28bc1b6","ts":"2025-05-05T19:36:29.945-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"4c683827-d71f-407e-9d97-019900173125","ts":"2025-05-05T19:36:29.945-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"524","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente esta teniendo la intencion de hacer un pedido de nuestros servicios/productos. Si es un pedido, identifica el producto y la cantidad (si no se menciona la cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos adicionales como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa este formato exacto:\\n\\n{\\\"esPedido\\\":1,\\\"producto\\\":\\\"nombre del producto\\\",\\\"cantidad\\\":número,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: hola\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"¡Hola! Bienvenido a Pizzería Italiana, estamos ubicados en Moreno 381. ¿En qué puedo ayudarte hoy?\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":37,\"promptTokens\":505,\"totalTokens\":542}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"4c683827-d71f-407e-9d97-019900173125","ts":"2025-05-05T19:36:29.945-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b44098a8-5886-49b1-b6ac-32d1219d6c21","ts":"2025-05-05T19:36:29.948-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"b44098a8-5886-49b1-b6ac-32d1219d6c21","ts":"2025-05-05T19:36:29.948-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"297b3337-f1d0-4999-a9cf-2b9d26588faf","ts":"2025-05-05T19:36:29.949-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"297b3337-f1d0-4999-a9cf-2b9d26588faf","ts":"2025-05-05T19:36:29.949-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ad2dcc69-b906-40ed-af6e-8c47166848de","ts":"2025-05-05T19:36:29.959-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"ad2dcc69-b906-40ed-af6e-8c47166848de","ts":"2025-05-05T19:36:29.959-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"24a1d3fb-c386-4726-987b-589f3f57f24b","ts":"2025-05-05T19:36:29.959-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"24a1d3fb-c386-4726-987b-589f3f57f24b","ts":"2025-05-05T19:36:29.960-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d3bcbc75-93c1-4278-907e-8f0853798985","ts":"2025-05-05T19:36:29.961-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"d3bcbc75-93c1-4278-907e-8f0853798985","ts":"2025-05-05T19:36:29.961-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"924b0a23-56f0-4a7c-98ec-21823b77c75e","ts":"2025-05-05T19:36:29.961-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"924b0a23-56f0-4a7c-98ec-21823b77c75e","ts":"2025-05-05T19:36:29.961-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e39d20fe-5126-4a1c-a044-1f8dc6abf471","ts":"2025-05-05T19:36:29.970-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"e39d20fe-5126-4a1c-a044-1f8dc6abf471","ts":"2025-05-05T19:36:29.970-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"716f9f3e-face-4694-a8c1-6957a92d59ea","ts":"2025-05-05T19:36:29.970-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"716f9f3e-face-4694-a8c1-6957a92d59ea","ts":"2025-05-05T19:36:29.970-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1b09a8cd-d7ad-48a5-8da7-6ad677d2ccc1","ts":"2025-05-05T19:36:29.971-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"524","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"1b09a8cd-d7ad-48a5-8da7-6ad677d2ccc1","ts":"2025-05-05T19:36:29.971-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"2a845d48-fe35-4eed-aaf8-d00764fa4656","ts":"2025-05-05T19:36:29.972-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"524","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"2a845d48-fe35-4eed-aaf8-d00764fa4656","ts":"2025-05-05T19:36:29.972-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"0612faf2-84e3-42af-bc0f-6d74847b74a2","ts":"2025-05-05T19:37:07.055-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"0612faf2-84e3-42af-bc0f-6d74847b74a2","ts":"2025-05-05T19:37:07.056-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"17784c32-a02b-4e6a-9ef1-28ddacce74b7","ts":"2025-05-05T19:37:11.996-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"525","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"17784c32-a02b-4e6a-9ef1-28ddacce74b7","ts":"2025-05-05T19:37:11.996-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d1bc2565-f76f-4603-9248-50476806c38d","ts":"2025-05-05T19:37:11.997-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"d1bc2565-f76f-4603-9248-50476806c38d","ts":"2025-05-05T19:37:11.997-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"18b03293-b2b8-469d-86c1-ee2fe3039d2b","ts":"2025-05-05T19:37:11.997-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"18b03293-b2b8-469d-86c1-ee2fe3039d2b","ts":"2025-05-05T19:37:11.997-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"661a607f-a631-400e-aea6-1bb5da9d7f1c","ts":"2025-05-05T19:37:11.997-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"661a607f-a631-400e-aea6-1bb5da9d7f1c","ts":"2025-05-05T19:37:11.997-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2dd7b343-d6da-4b66-a73a-cea6afdd8835","ts":"2025-05-05T19:37:11.998-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"2dd7b343-d6da-4b66-a73a-cea6afdd8835","ts":"2025-05-05T19:37:11.998-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a54a8fde-e599-483c-98ec-72ce3b2192a5","ts":"2025-05-05T19:37:11.998-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"a54a8fde-e599-483c-98ec-72ce3b2192a5","ts":"2025-05-05T19:37:11.998-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"43445f1d-51d7-48da-8916-23f3fc40fab9","ts":"2025-05-05T19:37:12.017-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"43445f1d-51d7-48da-8916-23f3fc40fab9","ts":"2025-05-05T19:37:12.017-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"152917ef-392e-46cb-a14e-ae4f8c7c8cbc","ts":"2025-05-05T19:37:13.576-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"152917ef-392e-46cb-a14e-ae4f8c7c8cbc","ts":"2025-05-05T19:37:13.576-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"31e65c88-372a-4648-8c95-0c9b2de11cd3","ts":"2025-05-05T19:37:13.576-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"525","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente esta teniendo la intencion de hacer un pedido de nuestros servicios/productos. Si es un pedido, identifica el producto y la cantidad (si no se menciona la cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos adicionales como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa este formato exacto:\\n\\n{\\\"esPedido\\\":1,\\\"producto\\\":\\\"nombre del producto\\\",\\\"cantidad\\\":número,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: hola\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"¡Ciao! Bienvenuto a la Pizzeria Italiana. ¿En qué puedo ayudarte hoy?\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":31,\"promptTokens\":505,\"totalTokens\":536}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"31e65c88-372a-4648-8c95-0c9b2de11cd3","ts":"2025-05-05T19:37:13.576-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d3fc91b3-23ac-4772-93c5-c7ef6619f09b","ts":"2025-05-05T19:37:13.580-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"d3fc91b3-23ac-4772-93c5-c7ef6619f09b","ts":"2025-05-05T19:37:13.581-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"081b0943-dc55-4ec5-b595-d16a64628dd8","ts":"2025-05-05T19:37:13.581-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"081b0943-dc55-4ec5-b595-d16a64628dd8","ts":"2025-05-05T19:37:13.581-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b7bebf93-2f89-4826-91e7-4aa608b0e22d","ts":"2025-05-05T19:37:13.592-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"b7bebf93-2f89-4826-91e7-4aa608b0e22d","ts":"2025-05-05T19:37:13.592-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8f31e57b-cc4e-46be-a26e-cb1736ea2055","ts":"2025-05-05T19:37:13.592-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"8f31e57b-cc4e-46be-a26e-cb1736ea2055","ts":"2025-05-05T19:37:13.592-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1d78800d-7aef-400e-8212-8b517cd8f946","ts":"2025-05-05T19:37:13.593-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"1d78800d-7aef-400e-8212-8b517cd8f946","ts":"2025-05-05T19:37:13.593-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1a36108f-77fe-455a-aa71-b4b71f45ae55","ts":"2025-05-05T19:37:13.593-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"1a36108f-77fe-455a-aa71-b4b71f45ae55","ts":"2025-05-05T19:37:13.593-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"461b80b8-87e7-465d-a4e8-d9f10f26e1b8","ts":"2025-05-05T19:37:13.601-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"461b80b8-87e7-465d-a4e8-d9f10f26e1b8","ts":"2025-05-05T19:37:13.601-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ab894adf-5dca-46a5-b566-5ebd0fd3f06b","ts":"2025-05-05T19:37:13.601-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"ab894adf-5dca-46a5-b566-5ebd0fd3f06b","ts":"2025-05-05T19:37:13.601-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ecbe82fb-6409-43f1-8c1a-6f248a7ceb6b","ts":"2025-05-05T19:37:13.602-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"525","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"ecbe82fb-6409-43f1-8c1a-6f248a7ceb6b","ts":"2025-05-05T19:37:13.602-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"856473b8-2c32-4c32-a76a-dc2d67a45395","ts":"2025-05-05T19:37:13.604-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"525","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"856473b8-2c32-4c32-a76a-dc2d67a45395","ts":"2025-05-05T19:37:13.604-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"108cdf43-2743-4343-90d2-0d27faab67ff","ts":"2025-05-05T19:37:24.790-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"526","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"108cdf43-2743-4343-90d2-0d27faab67ff","ts":"2025-05-05T19:37:24.790-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"143f69d8-e107-4c32-bc4d-acc1ec39602a","ts":"2025-05-05T19:37:24.791-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"143f69d8-e107-4c32-bc4d-acc1ec39602a","ts":"2025-05-05T19:37:24.791-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c031b351-cca5-403c-91ab-ba4f56ed886e","ts":"2025-05-05T19:37:24.791-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"c031b351-cca5-403c-91ab-ba4f56ed886e","ts":"2025-05-05T19:37:24.791-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6ca2bd4e-d37c-4955-94a1-776e6d349843","ts":"2025-05-05T19:37:24.791-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"6ca2bd4e-d37c-4955-94a1-776e6d349843","ts":"2025-05-05T19:37:24.791-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"be22a327-0db1-4f88-bce5-bf0cfa94273e","ts":"2025-05-05T19:37:24.792-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"be22a327-0db1-4f88-bce5-bf0cfa94273e","ts":"2025-05-05T19:37:24.792-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5c5b6d65-0fdd-4302-80f9-c3c81d60a3e6","ts":"2025-05-05T19:37:24.792-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"5c5b6d65-0fdd-4302-80f9-c3c81d60a3e6","ts":"2025-05-05T19:37:24.792-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"268046ef-c069-4446-8680-05e9a8db770c","ts":"2025-05-05T19:37:24.798-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"268046ef-c069-4446-8680-05e9a8db770c","ts":"2025-05-05T19:37:24.798-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e2d96bb0-d339-481e-ae90-333340459ce8","ts":"2025-05-05T19:37:26.293-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"e2d96bb0-d339-481e-ae90-333340459ce8","ts":"2025-05-05T19:37:26.293-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"f9405a62-9aac-4cd5-85c0-8d78aadfe25e","ts":"2025-05-05T19:37:26.293-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"526","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente esta teniendo la intencion de hacer un pedido de nuestros servicios/productos. Si es un pedido, identifica el producto y la cantidad (si no se menciona la cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos adicionales como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa este formato exacto:\\n\\n{\\\"esPedido\\\":1,\\\"producto\\\":\\\"nombre del producto\\\",\\\"cantidad\\\":número,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: que productos tienen?\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"En nuestra Pizzería Italiana ofrecemos la deliciosa Fugazzeta por $2993949. Si deseas hacer un pedido o tienes alguna otra consulta, no dudes en decírmelo, amigo!\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":50,\"promptTokens\":508,\"totalTokens\":558}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"f9405a62-9aac-4cd5-85c0-8d78aadfe25e","ts":"2025-05-05T19:37:26.293-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3a1952d7-7ba8-4601-aa5d-542aea9a391c","ts":"2025-05-05T19:37:26.296-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"3a1952d7-7ba8-4601-aa5d-542aea9a391c","ts":"2025-05-05T19:37:26.296-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1ad03ae6-6771-495d-ad1b-3bbb7a329d98","ts":"2025-05-05T19:37:26.297-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"1ad03ae6-6771-495d-ad1b-3bbb7a329d98","ts":"2025-05-05T19:37:26.297-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"06ca9d16-3cfb-468f-b118-ccafb913e705","ts":"2025-05-05T19:37:26.308-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"06ca9d16-3cfb-468f-b118-ccafb913e705","ts":"2025-05-05T19:37:26.308-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6ad6aa91-4e14-45ff-ba3a-120804e9d0f2","ts":"2025-05-05T19:37:26.308-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"6ad6aa91-4e14-45ff-ba3a-120804e9d0f2","ts":"2025-05-05T19:37:26.308-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"cb7c5e98-1ed2-4942-a82a-0671d2578434","ts":"2025-05-05T19:37:26.310-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"cb7c5e98-1ed2-4942-a82a-0671d2578434","ts":"2025-05-05T19:37:26.310-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2154c504-eaea-4ff9-93c9-8bdfa36491dd","ts":"2025-05-05T19:37:26.310-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"2154c504-eaea-4ff9-93c9-8bdfa36491dd","ts":"2025-05-05T19:37:26.310-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"217548b8-6369-46fd-be5d-8138c7cce6cf","ts":"2025-05-05T19:37:26.315-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"217548b8-6369-46fd-be5d-8138c7cce6cf","ts":"2025-05-05T19:37:26.315-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c60621f6-f131-4900-97cb-f5eb23c7e8a5","ts":"2025-05-05T19:37:26.315-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"c60621f6-f131-4900-97cb-f5eb23c7e8a5","ts":"2025-05-05T19:37:26.315-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1b47348d-c80f-42a9-9b4b-8a9ba16cb777","ts":"2025-05-05T19:37:26.316-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"526","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"1b47348d-c80f-42a9-9b4b-8a9ba16cb777","ts":"2025-05-05T19:37:26.316-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"0c2a7155-6896-443d-948e-7f625238e06d","ts":"2025-05-05T19:37:26.318-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"526","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"0c2a7155-6896-443d-948e-7f625238e06d","ts":"2025-05-05T19:37:26.318-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"b9e21a0e-f6c7-429f-b3db-23befd5d3bc8","ts":"2025-05-05T19:38:03.363-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"527","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"b9e21a0e-f6c7-429f-b3db-23befd5d3bc8","ts":"2025-05-05T19:38:03.363-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"85793e75-a7a3-4449-abb3-5020e715db23","ts":"2025-05-05T19:38:03.364-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"85793e75-a7a3-4449-abb3-5020e715db23","ts":"2025-05-05T19:38:03.364-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b7613887-a315-4182-bd71-173cdfb95a04","ts":"2025-05-05T19:38:03.364-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"b7613887-a315-4182-bd71-173cdfb95a04","ts":"2025-05-05T19:38:03.364-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2f9977b9-bb29-4353-84c1-adaca13e376b","ts":"2025-05-05T19:38:03.364-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"2f9977b9-bb29-4353-84c1-adaca13e376b","ts":"2025-05-05T19:38:03.364-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ab0faf9f-9402-4306-a9c5-22625a3849ae","ts":"2025-05-05T19:38:03.365-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"ab0faf9f-9402-4306-a9c5-22625a3849ae","ts":"2025-05-05T19:38:03.365-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"516f8ada-251f-4b8c-9a52-e7b9b79ef89a","ts":"2025-05-05T19:38:03.365-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"516f8ada-251f-4b8c-9a52-e7b9b79ef89a","ts":"2025-05-05T19:38:03.365-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4996428b-5a0d-4b57-8c0d-e854b941b0ca","ts":"2025-05-05T19:38:03.371-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"4996428b-5a0d-4b57-8c0d-e854b941b0ca","ts":"2025-05-05T19:38:03.371-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1ee6b05f-04dc-4039-b2d1-c73c7af55d78","ts":"2025-05-05T19:38:05.081-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"1ee6b05f-04dc-4039-b2d1-c73c7af55d78","ts":"2025-05-05T19:38:05.081-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"1d882bcc-60a2-45c2-85c6-a178efa344ee","ts":"2025-05-05T19:38:05.081-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"527","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente esta teniendo la intencion de hacer un pedido de nuestros servicios/productos. Si es un pedido, identifica el producto y la cantidad (si no se menciona la cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos adicionales como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa este formato exacto:\\n\\n{\\\"esPedido\\\":1,\\\"producto\\\":\\\"nombre del producto\\\",\\\"cantidad\\\":número,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero una fugazzeta\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":1,\\\"producto\\\":\\\"Fugazzeta\\\",\\\"cantidad\\\":1,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":36,\"promptTokens\":509,\"totalTokens\":545}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"1d882bcc-60a2-45c2-85c6-a178efa344ee","ts":"2025-05-05T19:38:05.081-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"92a64193-5469-4947-a4a6-3d2a6457b8be","ts":"2025-05-05T19:38:05.084-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"92a64193-5469-4947-a4a6-3d2a6457b8be","ts":"2025-05-05T19:38:05.084-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"221e1df6-7cc6-4ddd-b04d-c09c04be37d6","ts":"2025-05-05T19:38:05.085-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"221e1df6-7cc6-4ddd-b04d-c09c04be37d6","ts":"2025-05-05T19:38:05.085-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4f36859d-13e5-4e36-8c18-c0bf629624c1","ts":"2025-05-05T19:38:05.096-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"4f36859d-13e5-4e36-8c18-c0bf629624c1","ts":"2025-05-05T19:38:05.096-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d69b6a96-3be0-429f-a971-9991e0e0cbf6","ts":"2025-05-05T19:38:05.096-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"d69b6a96-3be0-429f-a971-9991e0e0cbf6","ts":"2025-05-05T19:38:05.097-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"584c32ae-38dc-4455-85aa-9634ed003d99","ts":"2025-05-05T19:38:05.098-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"584c32ae-38dc-4455-85aa-9634ed003d99","ts":"2025-05-05T19:38:05.098-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"63b2a9ba-1b68-4edf-beb9-42c54d59b207","ts":"2025-05-05T19:38:05.098-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"63b2a9ba-1b68-4edf-beb9-42c54d59b207","ts":"2025-05-05T19:38:05.098-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6b73e833-74fd-41ff-954c-757b38bfe4c3","ts":"2025-05-05T19:38:05.126-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"6b73e833-74fd-41ff-954c-757b38bfe4c3","ts":"2025-05-05T19:38:05.126-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2c807721-ab04-49e5-b5dd-6752e2bae06c","ts":"2025-05-05T19:38:05.126-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"2c807721-ab04-49e5-b5dd-6752e2bae06c","ts":"2025-05-05T19:38:05.126-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2c828f3c-5ccb-4e3a-800a-f888e034717c","ts":"2025-05-05T19:38:05.127-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"527","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"2c828f3c-5ccb-4e3a-800a-f888e034717c","ts":"2025-05-05T19:38:05.127-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"0b1b1b89-ce04-432e-8208-e2247449f8d4","ts":"2025-05-05T19:38:05.128-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"527","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"0b1b1b89-ce04-432e-8208-e2247449f8d4","ts":"2025-05-05T19:38:05.128-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"22231727-f17b-48b0-8682-f593145adddb","ts":"2025-05-05T19:41:10.015-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"528","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"22231727-f17b-48b0-8682-f593145adddb","ts":"2025-05-05T19:41:10.015-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5b5ff3c8-88a2-4b37-95a4-d3ad378b609a","ts":"2025-05-05T19:41:10.016-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"5b5ff3c8-88a2-4b37-95a4-d3ad378b609a","ts":"2025-05-05T19:41:10.016-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8d22e140-3d65-42f6-be75-5548ebfe6250","ts":"2025-05-05T19:41:10.016-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"8d22e140-3d65-42f6-be75-5548ebfe6250","ts":"2025-05-05T19:41:10.016-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8e7b6d0b-44ff-445d-82f5-30e2338d1e7e","ts":"2025-05-05T19:41:10.017-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"8e7b6d0b-44ff-445d-82f5-30e2338d1e7e","ts":"2025-05-05T19:41:10.017-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"04c1b9bb-8f06-454b-86a7-5c2d120a9471","ts":"2025-05-05T19:41:10.018-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"04c1b9bb-8f06-454b-86a7-5c2d120a9471","ts":"2025-05-05T19:41:10.018-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"dfaa5c19-956e-437f-aef6-03c093e45265","ts":"2025-05-05T19:41:10.018-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"dfaa5c19-956e-437f-aef6-03c093e45265","ts":"2025-05-05T19:41:10.018-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d29dc077-e77e-4378-bd55-5df90c962060","ts":"2025-05-05T19:41:10.034-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"d29dc077-e77e-4378-bd55-5df90c962060","ts":"2025-05-05T19:41:10.034-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0fe379d4-cf2e-4aa5-92b0-fa458373d616","ts":"2025-05-05T19:41:11.682-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"0fe379d4-cf2e-4aa5-92b0-fa458373d616","ts":"2025-05-05T19:41:11.683-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"ebf31b65-2b97-4abf-ad47-d23ef83264cf","ts":"2025-05-05T19:41:11.683-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"528","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Fugazzeta: aoiefj;aoifh - $2993949, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente esta teniendo la intencion de hacer un pedido de nuestros servicios/productos. Si es un pedido, identifica el producto y la cantidad (si no se menciona la cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos adicionales como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa este formato exacto:\\n\\n{\\\"esPedido\\\":1,\\\"producto\\\":\\\"nombre del producto\\\",\\\"cantidad\\\":número,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 3 fugazzetas\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":1,\\\"producto\\\":\\\"Fugazzeta\\\",\\\"cantidad\\\":3,\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":36,\"promptTokens\":510,\"totalTokens\":546}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"ebf31b65-2b97-4abf-ad47-d23ef83264cf","ts":"2025-05-05T19:41:11.683-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4cf95838-9ef0-427a-9f2a-245f3bc176d4","ts":"2025-05-05T19:41:11.692-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"4cf95838-9ef0-427a-9f2a-245f3bc176d4","ts":"2025-05-05T19:41:11.692-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1450c4db-3b91-4fa1-9f5d-c0a05700f46a","ts":"2025-05-05T19:41:11.693-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"1450c4db-3b91-4fa1-9f5d-c0a05700f46a","ts":"2025-05-05T19:41:11.695-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d4774d62-c25e-4674-be4e-2eac43616d31","ts":"2025-05-05T19:41:11.709-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"d4774d62-c25e-4674-be4e-2eac43616d31","ts":"2025-05-05T19:41:11.709-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"61d4bf25-ad9d-4796-91cb-c62408402622","ts":"2025-05-05T19:41:11.709-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"61d4bf25-ad9d-4796-91cb-c62408402622","ts":"2025-05-05T19:41:11.709-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3836550d-0557-4004-acc6-ce5760aee737","ts":"2025-05-05T19:41:11.711-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"3836550d-0557-4004-acc6-ce5760aee737","ts":"2025-05-05T19:41:11.711-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8ff5ff22-00c5-4ffb-841d-c3b6dc846d16","ts":"2025-05-05T19:41:11.711-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"8ff5ff22-00c5-4ffb-841d-c3b6dc846d16","ts":"2025-05-05T19:41:11.711-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"02efd0bd-8889-41bb-b51e-2aebd13df312","ts":"2025-05-05T19:41:11.715-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"02efd0bd-8889-41bb-b51e-2aebd13df312","ts":"2025-05-05T19:41:11.715-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ffb41a8f-8ab6-47ce-a8d1-2b00a11c3c63","ts":"2025-05-05T19:41:11.715-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"ffb41a8f-8ab6-47ce-a8d1-2b00a11c3c63","ts":"2025-05-05T19:41:11.715-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1bcab6f6-7147-4f60-ada3-27b3b83c05e3","ts":"2025-05-05T19:41:11.717-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"528","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"1bcab6f6-7147-4f60-ada3-27b3b83c05e3","ts":"2025-05-05T19:41:11.717-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"e1d04159-4e52-480d-a93b-e5936553c80b","ts":"2025-05-05T19:41:11.719-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"528","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"e1d04159-4e52-480d-a93b-e5936553c80b","ts":"2025-05-05T19:41:11.719-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"0152890e-eb2e-4507-85e3-18656ae7d5c7","ts":"2025-05-05T19:46:30.912-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"0152890e-eb2e-4507-85e3-18656ae7d5c7","ts":"2025-05-05T19:46:30.912-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"58dcebb7-172e-4717-af0e-a96db85fdc66","ts":"2025-05-05T19:46:46.694-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"58dcebb7-172e-4717-af0e-a96db85fdc66","ts":"2025-05-05T19:46:46.694-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"36c631ff-6364-4928-91af-026f93ca3baf","ts":"2025-05-05T19:51:31.933-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"529","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"36c631ff-6364-4928-91af-026f93ca3baf","ts":"2025-05-05T19:51:31.933-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"65113ff1-a6a7-4022-8127-dd419ff88d0e","ts":"2025-05-05T19:51:31.934-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"65113ff1-a6a7-4022-8127-dd419ff88d0e","ts":"2025-05-05T19:51:31.934-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"692ef0bd-fbb5-4a86-94c3-853907baf443","ts":"2025-05-05T19:51:31.935-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"692ef0bd-fbb5-4a86-94c3-853907baf443","ts":"2025-05-05T19:51:31.935-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"479a4d0d-1abd-435a-b849-4ea32ea05c8c","ts":"2025-05-05T19:51:31.935-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"479a4d0d-1abd-435a-b849-4ea32ea05c8c","ts":"2025-05-05T19:51:31.935-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6efcaad4-a04a-473f-a04d-408a278d3fcc","ts":"2025-05-05T19:51:31.937-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"6efcaad4-a04a-473f-a04d-408a278d3fcc","ts":"2025-05-05T19:51:31.937-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1ff03ae6-5064-4727-93a8-b81af574401d","ts":"2025-05-05T19:51:31.938-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"1ff03ae6-5064-4727-93a8-b81af574401d","ts":"2025-05-05T19:51:31.938-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"77ff7aa2-528d-4420-9e5b-7090be719bef","ts":"2025-05-05T19:51:31.985-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"77ff7aa2-528d-4420-9e5b-7090be719bef","ts":"2025-05-05T19:51:31.989-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9e2b7423-885e-4f29-8a0e-b297ae125888","ts":"2025-05-05T19:51:34.692-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"9e2b7423-885e-4f29-8a0e-b297ae125888","ts":"2025-05-05T19:51:34.692-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"2abea5c1-57d2-417a-bbd9-8bb73137fedb","ts":"2025-05-05T19:51:34.693-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"529","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000, no improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491128704037@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: que productos tienen?\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"En nuestra Pizzeria Italiana ofrecemos una variedad de deliciosas pizzas y faina. Aquí están nuestros productos: Pizza Napolitana - $10000, Pizza 4 Quesos - $14000, Faina - $6000, Pizza Muzzarella - $10000, Pizza Mediterranea - $14000, Pizza Jamon - $13000, Pizza Jamon y Morrón - $15000, Pizza de Anchoas - $12000. ¡Ven a disfrutar de nuestros sabores!\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":113,\"promptTokens\":616,\"totalTokens\":729}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"2abea5c1-57d2-417a-bbd9-8bb73137fedb","ts":"2025-05-05T19:51:34.693-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f9edd7cb-860e-4be3-81ce-ef21196cc27e","ts":"2025-05-05T19:51:34.698-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"f9edd7cb-860e-4be3-81ce-ef21196cc27e","ts":"2025-05-05T19:51:34.698-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7dcc767d-c4b3-4e3b-abc2-0fa7cf1244d6","ts":"2025-05-05T19:51:34.699-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"7dcc767d-c4b3-4e3b-abc2-0fa7cf1244d6","ts":"2025-05-05T19:51:34.699-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3e3f4e3d-6a6b-4a05-951d-6ad82c02dbf2","ts":"2025-05-05T19:51:34.712-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"3e3f4e3d-6a6b-4a05-951d-6ad82c02dbf2","ts":"2025-05-05T19:51:34.712-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"396a0500-a76f-4d23-825c-7e1336d8651a","ts":"2025-05-05T19:51:34.712-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"396a0500-a76f-4d23-825c-7e1336d8651a","ts":"2025-05-05T19:51:34.712-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f31c01a4-b527-4d2b-b378-4ebe932d4855","ts":"2025-05-05T19:51:34.713-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"f31c01a4-b527-4d2b-b378-4ebe932d4855","ts":"2025-05-05T19:51:34.713-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f6596fe2-00c2-4d74-958c-649a186ee003","ts":"2025-05-05T19:51:34.713-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"f6596fe2-00c2-4d74-958c-649a186ee003","ts":"2025-05-05T19:51:34.713-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1c268f57-be4e-42b2-b376-3f8f666ddfaf","ts":"2025-05-05T19:51:34.719-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"1c268f57-be4e-42b2-b376-3f8f666ddfaf","ts":"2025-05-05T19:51:34.719-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ffe6b8d0-1473-42ce-b78c-3bac0880685f","ts":"2025-05-05T19:51:34.719-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"ffe6b8d0-1473-42ce-b78c-3bac0880685f","ts":"2025-05-05T19:51:34.721-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b1b6b11f-1099-4f02-87d6-8cbccb9ed44c","ts":"2025-05-05T19:51:34.722-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"529","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"b1b6b11f-1099-4f02-87d6-8cbccb9ed44c","ts":"2025-05-05T19:51:34.722-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"357ab248-9238-4e39-8f8e-e40af8894035","ts":"2025-05-05T19:51:34.725-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"529","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"357ab248-9238-4e39-8f8e-e40af8894035","ts":"2025-05-05T19:51:34.725-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"8a8a7c6b-9b4d-4393-9f82-37b4adf05ade","ts":"2025-05-05T19:53:20.264-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"8a8a7c6b-9b4d-4393-9f82-37b4adf05ade","ts":"2025-05-05T19:53:20.264-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"26204f9d-b972-4881-9788-631b98c88795","ts":"2025-05-05T19:53:26.184-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"530","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"26204f9d-b972-4881-9788-631b98c88795","ts":"2025-05-05T19:53:26.185-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7cbaf804-9572-4777-9af7-5f424a366280","ts":"2025-05-05T19:53:26.185-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"7cbaf804-9572-4777-9af7-5f424a366280","ts":"2025-05-05T19:53:26.185-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"56c60876-97b9-414b-b3af-382e176bdb82","ts":"2025-05-05T19:53:26.186-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"56c60876-97b9-414b-b3af-382e176bdb82","ts":"2025-05-05T19:53:26.186-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8bd474a6-4ae4-49f3-8a1e-296ce27b57fe","ts":"2025-05-05T19:53:26.186-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"8bd474a6-4ae4-49f3-8a1e-296ce27b57fe","ts":"2025-05-05T19:53:26.187-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"41e3127b-7250-403b-9451-4286b0cb314c","ts":"2025-05-05T19:53:26.188-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"41e3127b-7250-403b-9451-4286b0cb314c","ts":"2025-05-05T19:53:26.188-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"095e1cbf-e7da-4021-bdb3-fd501356f2e3","ts":"2025-05-05T19:53:26.188-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"095e1cbf-e7da-4021-bdb3-fd501356f2e3","ts":"2025-05-05T19:53:26.188-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"93c679a7-ed0f-4c61-90e6-a6c1de7e45ff","ts":"2025-05-05T19:53:26.228-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"93c679a7-ed0f-4c61-90e6-a6c1de7e45ff","ts":"2025-05-05T19:53:26.228-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"41ac6588-85f0-45b3-ad87-ba1314347c84","ts":"2025-05-05T19:53:29.327-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"41ac6588-85f0-45b3-ad87-ba1314347c84","ts":"2025-05-05T19:53:29.327-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"98f51ae3-2459-4779-88cf-3ca7cb59564a","ts":"2025-05-05T19:53:29.328-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"530","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491128704037@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: que productos tienen?\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"En nuestra Pizzeria Italiana ofrecemos: \\\\n\\\\n**Pizza Napolitana:**  - $10000\\\\n\\\\n**Pizza 4 Quesos:**  - $14000\\\\n\\\\n**Faina:**  - $6000\\\\n\\\\n**Pizza Muzzarella:**  - $10000\\\\n\\\\n**Pizza Mediterranea:**  - $14000\\\\n\\\\n**Pizza Jamon:**  - $13000\\\\n\\\\n**Pizza Jamon y Morrón:**  - $15000\\\\n\\\\n**Pizza de Anchoas:**  - $12000\\\\n\\\\nEstamos aquí para servirte con lo mejor de la gastronomía italiana.\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":140,\"promptTokens\":646,\"totalTokens\":786}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"98f51ae3-2459-4779-88cf-3ca7cb59564a","ts":"2025-05-05T19:53:29.328-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"74a5295f-1ecd-42ab-8f8f-1a31a18e0665","ts":"2025-05-05T19:53:29.331-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"74a5295f-1ecd-42ab-8f8f-1a31a18e0665","ts":"2025-05-05T19:53:29.332-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fabd56c5-9013-49bc-b98f-a4614e824acb","ts":"2025-05-05T19:53:29.333-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"fabd56c5-9013-49bc-b98f-a4614e824acb","ts":"2025-05-05T19:53:29.333-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fba7e4bc-ca96-450e-b378-b7c7a4e5f1d7","ts":"2025-05-05T19:53:29.345-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"fba7e4bc-ca96-450e-b378-b7c7a4e5f1d7","ts":"2025-05-05T19:53:29.345-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b188f07d-ea24-4885-9e24-2efa8f8f615c","ts":"2025-05-05T19:53:29.345-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"b188f07d-ea24-4885-9e24-2efa8f8f615c","ts":"2025-05-05T19:53:29.345-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e9255a7a-79a4-4ef7-9ab5-5a56c4b1379f","ts":"2025-05-05T19:53:29.346-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"e9255a7a-79a4-4ef7-9ab5-5a56c4b1379f","ts":"2025-05-05T19:53:29.346-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"813842ba-933a-4765-8492-913e66bd1d82","ts":"2025-05-05T19:53:29.346-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"813842ba-933a-4765-8492-913e66bd1d82","ts":"2025-05-05T19:53:29.346-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"422a791e-7c87-431d-ac5f-4d1533d445e6","ts":"2025-05-05T19:53:29.347-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"422a791e-7c87-431d-ac5f-4d1533d445e6","ts":"2025-05-05T19:53:29.347-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"bc55e0a2-6ad1-4c20-bf96-28e834f9ac81","ts":"2025-05-05T19:53:29.348-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"bc55e0a2-6ad1-4c20-bf96-28e834f9ac81","ts":"2025-05-05T19:53:29.348-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"765d23d9-fe65-40db-9de9-5f84dce3ea1a","ts":"2025-05-05T19:53:29.348-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"530","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"765d23d9-fe65-40db-9de9-5f84dce3ea1a","ts":"2025-05-05T19:53:29.348-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"3d5d6190-39e8-43d6-a479-463d3182ddb8","ts":"2025-05-05T19:53:29.349-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"530","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"3d5d6190-39e8-43d6-a479-463d3182ddb8","ts":"2025-05-05T19:53:29.349-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"b0724f77-559d-4aaa-bd3d-b02629a40b5c","ts":"2025-05-05T19:54:25.427-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"531","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"b0724f77-559d-4aaa-bd3d-b02629a40b5c","ts":"2025-05-05T19:54:25.427-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9af687e8-9311-4d2d-aa14-071eb44d7204","ts":"2025-05-05T19:54:25.427-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"9af687e8-9311-4d2d-aa14-071eb44d7204","ts":"2025-05-05T19:54:25.427-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4119979f-1b62-4f1f-a189-9c3009b03f43","ts":"2025-05-05T19:54:25.427-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"4119979f-1b62-4f1f-a189-9c3009b03f43","ts":"2025-05-05T19:54:25.427-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b51d11a1-50ca-4190-964f-0e354d3bdc98","ts":"2025-05-05T19:54:25.428-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"b51d11a1-50ca-4190-964f-0e354d3bdc98","ts":"2025-05-05T19:54:25.428-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5637bbf3-4a95-43d1-a022-a6640747638b","ts":"2025-05-05T19:54:25.429-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"5637bbf3-4a95-43d1-a022-a6640747638b","ts":"2025-05-05T19:54:25.429-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b830d6fa-4140-457a-a7b9-025784860e13","ts":"2025-05-05T19:54:25.429-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"b830d6fa-4140-457a-a7b9-025784860e13","ts":"2025-05-05T19:54:25.429-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ce6a8027-ecf8-49ee-9af2-c048ea1ab4db","ts":"2025-05-05T19:54:25.435-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"ce6a8027-ecf8-49ee-9af2-c048ea1ab4db","ts":"2025-05-05T19:54:25.435-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5a07e6f6-9fd9-454b-a443-945ad79a6350","ts":"2025-05-05T19:54:29.093-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"5a07e6f6-9fd9-454b-a443-945ad79a6350","ts":"2025-05-05T19:54:29.093-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"1e67d13a-eed4-41d0-b004-af4992362ef0","ts":"2025-05-05T19:54:29.093-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"531","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491128704037@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 2 de muzzarella, 3 de anchoas, 4 de jamon, 1 faina, 8 de 4 quesos y 1 napolitana\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"Pizza Muzzarella\\\", \\\"cantidad\\\": 2},\\n    {\\\"nombre\\\": \\\"Pizza de Anchoas\\\", \\\"cantidad\\\": 3},\\n    {\\\"nombre\\\": \\\"Pizza Jamon\\\", \\\"cantidad\\\": 4},\\n    {\\\"nombre\\\": \\\"Faina\\\", \\\"cantidad\\\": 1},\\n    {\\\"nombre\\\": \\\"Pizza 4 Quesos\\\", \\\"cantidad\\\": 8},\\n    {\\\"nombre\\\": \\\"Pizza Napolitana\\\", \\\"cantidad\\\": 1}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491128704037@c.us\\\"\\n}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":138,\"promptTokens\":680,\"totalTokens\":818}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"1e67d13a-eed4-41d0-b004-af4992362ef0","ts":"2025-05-05T19:54:29.093-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a9bb8386-dabe-4274-8ee6-bbe5be850a7a","ts":"2025-05-05T19:54:29.098-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"a9bb8386-dabe-4274-8ee6-bbe5be850a7a","ts":"2025-05-05T19:54:29.098-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"320baf9c-5d74-42a2-a8ef-33cdeeb7103b","ts":"2025-05-05T19:54:29.098-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"320baf9c-5d74-42a2-a8ef-33cdeeb7103b","ts":"2025-05-05T19:54:29.098-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"27227fc1-ea14-4c11-8048-cd7dad35933b","ts":"2025-05-05T19:54:29.108-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"27227fc1-ea14-4c11-8048-cd7dad35933b","ts":"2025-05-05T19:54:29.108-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0b752608-6027-4a86-a0ff-acec1ec40d9b","ts":"2025-05-05T19:54:29.108-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"0b752608-6027-4a86-a0ff-acec1ec40d9b","ts":"2025-05-05T19:54:29.108-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4b367c4b-86bb-4468-aab1-669a0712e09e","ts":"2025-05-05T19:54:29.110-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"4b367c4b-86bb-4468-aab1-669a0712e09e","ts":"2025-05-05T19:54:29.110-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d7af8607-a10c-42f6-a20f-1b882b683c74","ts":"2025-05-05T19:54:29.110-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"d7af8607-a10c-42f6-a20f-1b882b683c74","ts":"2025-05-05T19:54:29.110-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3f2d2b1a-19c7-444d-a687-8256202e0d2f","ts":"2025-05-05T19:54:29.121-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"531","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"3f2d2b1a-19c7-444d-a687-8256202e0d2f","ts":"2025-05-05T19:54:29.121-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"5953d7ec-0506-4f3e-acd6-e52e689f8958","ts":"2025-05-05T19:54:29.122-03:00","eventName":"n8n.workflow.failed","message":"n8n.workflow.failed","payload":{"executionId":"531","success":false,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","lastNodeExecuted":"PrepararRespuestaPedido","errorNodeType":"n8n-nodes-base.set","errorMessage":"'pedido' expects a object but we got '{   \"negocioId\": 1,   \"numeroCliente\": \"5491128704037@c.us\",   \"producto\": \"\",   \"cantidad\":  }' [item 0]"}}
{"__type":"$$EventMessageConfirm","confirm":"5953d7ec-0506-4f3e-acd6-e52e689f8958","ts":"2025-05-05T19:54:29.122-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"9033e04b-8e92-4e25-abeb-7b3ae61c27b3","ts":"2025-05-05T20:00:48.340-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"9033e04b-8e92-4e25-abeb-7b3ae61c27b3","ts":"2025-05-05T20:00:48.340-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"78e0057b-573f-4249-9201-e75bb5c5064d","ts":"2025-05-05T20:00:55.780-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"532","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"78e0057b-573f-4249-9201-e75bb5c5064d","ts":"2025-05-05T20:00:55.780-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9d26a6e1-a7e6-4f73-8b9c-770508f4aed0","ts":"2025-05-05T20:00:55.781-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"9d26a6e1-a7e6-4f73-8b9c-770508f4aed0","ts":"2025-05-05T20:00:55.781-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"dbc94872-85fe-4cc2-adfb-68773dd291b3","ts":"2025-05-05T20:00:55.781-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"dbc94872-85fe-4cc2-adfb-68773dd291b3","ts":"2025-05-05T20:00:55.781-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5504e52b-b5ad-42b7-a916-2dd5de51fda0","ts":"2025-05-05T20:00:55.781-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"5504e52b-b5ad-42b7-a916-2dd5de51fda0","ts":"2025-05-05T20:00:55.781-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"797f1392-9d75-45fd-83d5-0eae2949ec10","ts":"2025-05-05T20:00:55.782-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"797f1392-9d75-45fd-83d5-0eae2949ec10","ts":"2025-05-05T20:00:55.782-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"93d548b2-4bab-4b0d-9929-b3858b3e4d25","ts":"2025-05-05T20:00:55.782-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"93d548b2-4bab-4b0d-9929-b3858b3e4d25","ts":"2025-05-05T20:00:55.782-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d72b21af-07b4-4c68-8d02-aac3a964ebb9","ts":"2025-05-05T20:00:55.800-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"d72b21af-07b4-4c68-8d02-aac3a964ebb9","ts":"2025-05-05T20:00:55.801-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9cfdbbc6-43bc-4018-bb57-948e6b78d694","ts":"2025-05-05T20:00:58.773-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"9cfdbbc6-43bc-4018-bb57-948e6b78d694","ts":"2025-05-05T20:00:58.774-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"8e2a3907-209e-460c-8df9-7aeca1a9c927","ts":"2025-05-05T20:00:58.774-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"532","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491128704037@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 2 de muzzarella, 3 de anchoas, 4 de jamon, 1 faina, 8 de 4 quesos y 1 napolitana\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":1,\\\"productos\\\":[{\\\"nombre\\\":\\\"Pizza Muzzarella\\\",\\\"cantidad\\\":2},{\\\"nombre\\\":\\\"Pizza de Anchoas\\\",\\\"cantidad\\\":3},{\\\"nombre\\\":\\\"Pizza Jamon\\\",\\\"cantidad\\\":4},{\\\"nombre\\\":\\\"Faina\\\",\\\"cantidad\\\":1},{\\\"nombre\\\":\\\"Pizza 4 Quesos\\\",\\\"cantidad\\\":8},{\\\"nombre\\\":\\\"Pizza Napolitana\\\",\\\"cantidad\\\":1}],\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":95,\"promptTokens\":680,\"totalTokens\":775}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"8e2a3907-209e-460c-8df9-7aeca1a9c927","ts":"2025-05-05T20:00:58.774-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0b30e602-7961-46d2-9af5-3d9501b6209c","ts":"2025-05-05T20:00:58.780-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"0b30e602-7961-46d2-9af5-3d9501b6209c","ts":"2025-05-05T20:00:58.781-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e26e9942-3c4a-4a19-b6f1-4a238d794a17","ts":"2025-05-05T20:00:58.781-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"e26e9942-3c4a-4a19-b6f1-4a238d794a17","ts":"2025-05-05T20:00:58.781-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3bf480cf-12d7-48c5-82ce-ba9131a9fde1","ts":"2025-05-05T20:00:58.794-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"3bf480cf-12d7-48c5-82ce-ba9131a9fde1","ts":"2025-05-05T20:00:58.794-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8eacd487-0fbc-44c0-9263-ce0b8ff9509c","ts":"2025-05-05T20:00:58.794-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"8eacd487-0fbc-44c0-9263-ce0b8ff9509c","ts":"2025-05-05T20:00:58.795-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4ad63b55-030e-4e88-8d0e-1dbe58ca8721","ts":"2025-05-05T20:00:58.796-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"4ad63b55-030e-4e88-8d0e-1dbe58ca8721","ts":"2025-05-05T20:00:58.796-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"98a59387-6267-4cff-8701-b254d8923b6a","ts":"2025-05-05T20:00:58.796-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"98a59387-6267-4cff-8701-b254d8923b6a","ts":"2025-05-05T20:00:58.796-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d79fea74-8e15-43c6-a53d-bb74b59bc022","ts":"2025-05-05T20:00:58.806-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"532","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"d79fea74-8e15-43c6-a53d-bb74b59bc022","ts":"2025-05-05T20:00:58.806-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"935da6ea-f8ae-44ff-ba04-30918893875e","ts":"2025-05-05T20:00:58.807-03:00","eventName":"n8n.workflow.failed","message":"n8n.workflow.failed","payload":{"executionId":"532","success":false,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","lastNodeExecuted":"PrepararRespuestaPedido","errorNodeType":"n8n-nodes-base.set","errorMessage":"'pedido' expects a object but we got 'const pedidos = [];\n\nfor (const producto of $json.productos) {\n  // Crear un objeto pedido para cada producto\n  const pedido = {\n    negocioId: $json.negocioId,\n    numeroCliente: $json.numeroCliente,\n    producto: producto.nombre,\n    cantidad: producto.cantidad,\n  };\n\n  // Añadir el pedido a un array\n  pedidos.push(pedido);\n}\n\n// Asignar el array de pedidos a la salida para procesar\n$item.json.pedidos = pedidos;' [item 0]"}}
{"__type":"$$EventMessageConfirm","confirm":"935da6ea-f8ae-44ff-ba04-30918893875e","ts":"2025-05-05T20:00:58.807-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"c5b84530-fe03-482b-86ce-2e200660ddd5","ts":"2025-05-05T20:04:40.040-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"c5b84530-fe03-482b-86ce-2e200660ddd5","ts":"2025-05-05T20:04:40.041-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"3ffa2cac-337e-4b0a-80fb-7c2e8228029a","ts":"2025-05-05T20:04:49.280-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"533","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"3ffa2cac-337e-4b0a-80fb-7c2e8228029a","ts":"2025-05-05T20:04:49.280-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"99685eb0-1939-442f-8b41-e844d6568d26","ts":"2025-05-05T20:04:49.280-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"99685eb0-1939-442f-8b41-e844d6568d26","ts":"2025-05-05T20:04:49.281-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8b66526c-d84a-4cfb-849e-622d71acf9d0","ts":"2025-05-05T20:04:49.281-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"8b66526c-d84a-4cfb-849e-622d71acf9d0","ts":"2025-05-05T20:04:49.282-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"85f26f27-86ff-4278-8fea-b04b0e9699b3","ts":"2025-05-05T20:04:49.282-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"85f26f27-86ff-4278-8fea-b04b0e9699b3","ts":"2025-05-05T20:04:49.282-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"08ba43b4-7438-4683-80e1-4233a9647958","ts":"2025-05-05T20:04:49.283-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"08ba43b4-7438-4683-80e1-4233a9647958","ts":"2025-05-05T20:04:49.283-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b610da44-83f0-482b-9f1b-800ddd360a6d","ts":"2025-05-05T20:04:49.283-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"b610da44-83f0-482b-9f1b-800ddd360a6d","ts":"2025-05-05T20:04:49.283-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4715e7c6-1df2-455e-abd6-fb59a096ee51","ts":"2025-05-05T20:04:49.313-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"4715e7c6-1df2-455e-abd6-fb59a096ee51","ts":"2025-05-05T20:04:49.313-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fcaca62f-75e6-43f6-91a8-41f3d99e0919","ts":"2025-05-05T20:04:52.333-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"fcaca62f-75e6-43f6-91a8-41f3d99e0919","ts":"2025-05-05T20:04:52.333-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"b2d1c597-bd86-4cf1-bf24-d700890c97de","ts":"2025-05-05T20:04:52.334-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"533","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491128704037@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 2 de muzzarella, 3 de anchoas, 4 de jamon, 1 faina, 8 de 4 quesos y 1 napolitana\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"Pizza Muzzarella\\\", \\\"cantidad\\\": 2},\\n    {\\\"nombre\\\": \\\"Pizza de Anchoas\\\", \\\"cantidad\\\": 3},\\n    {\\\"nombre\\\": \\\"Pizza Jamon\\\", \\\"cantidad\\\": 4},\\n    {\\\"nombre\\\": \\\"Faina\\\", \\\"cantidad\\\": 1},\\n    {\\\"nombre\\\": \\\"Pizza 4 Quesos\\\", \\\"cantidad\\\": 8},\\n    {\\\"nombre\\\": \\\"Pizza Napolitana\\\", \\\"cantidad\\\": 1}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491128704037@c.us\\\"\\n}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":138,\"promptTokens\":680,\"totalTokens\":818}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"b2d1c597-bd86-4cf1-bf24-d700890c97de","ts":"2025-05-05T20:04:52.334-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"185de784-9963-4e1e-b2b7-db9b62e8aa63","ts":"2025-05-05T20:04:52.339-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"185de784-9963-4e1e-b2b7-db9b62e8aa63","ts":"2025-05-05T20:04:52.339-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4ba8abec-13fa-4479-b3cf-00fb5e5198fb","ts":"2025-05-05T20:04:52.340-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"4ba8abec-13fa-4479-b3cf-00fb5e5198fb","ts":"2025-05-05T20:04:52.340-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"35523749-2e44-40eb-9587-888c75debf80","ts":"2025-05-05T20:04:52.355-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"35523749-2e44-40eb-9587-888c75debf80","ts":"2025-05-05T20:04:52.355-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e1c67e94-e3ef-418b-875e-a3f5d9643819","ts":"2025-05-05T20:04:52.355-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"e1c67e94-e3ef-418b-875e-a3f5d9643819","ts":"2025-05-05T20:04:52.355-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"66d6e743-acd0-4765-a91e-67aa5ec2cdd4","ts":"2025-05-05T20:04:52.356-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"66d6e743-acd0-4765-a91e-67aa5ec2cdd4","ts":"2025-05-05T20:04:52.356-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2a647cdb-4856-4c89-872e-c6b2cf761ec4","ts":"2025-05-05T20:04:52.356-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"2a647cdb-4856-4c89-872e-c6b2cf761ec4","ts":"2025-05-05T20:04:52.356-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"848d767e-1de4-4d72-967a-e88c51cc8f4d","ts":"2025-05-05T20:04:52.385-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"533","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"848d767e-1de4-4d72-967a-e88c51cc8f4d","ts":"2025-05-05T20:04:52.385-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"c90dcdc2-4763-4ecf-8b91-30886838910a","ts":"2025-05-05T20:04:52.385-03:00","eventName":"n8n.workflow.failed","message":"n8n.workflow.failed","payload":{"executionId":"533","success":false,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","lastNodeExecuted":"PrepararRespuestaPedido","errorNodeType":"n8n-nodes-base.set","errorMessage":"'pedido' expects a object but we got 'const pedidos = [];\n\nfor (const producto of $json.productos) {\n  // Crear un objeto pedido para cada producto\n  const pedido = {\n    negocioId: 1,\n    numeroCliente: 5491128704037@c.us,\n    producto: ,\n    cantidad: ,\n  };\n\n  // Añadir el pedido a un array\n  pedidos.push(pedido);\n}\n\n// Asignar el array de pedidos a la salida para procesar\n = pedidos;' [item 0]"}}
{"__type":"$$EventMessageConfirm","confirm":"c90dcdc2-4763-4ecf-8b91-30886838910a","ts":"2025-05-05T20:04:52.385-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"447c9e26-0d26-4c24-9b00-d43f4c914081","ts":"2025-05-05T20:11:45.535-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"447c9e26-0d26-4c24-9b00-d43f4c914081","ts":"2025-05-05T20:11:45.536-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"58c79051-06b1-4d15-a75a-469e7aaf5e8c","ts":"2025-05-05T20:11:57.652-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"534","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"58c79051-06b1-4d15-a75a-469e7aaf5e8c","ts":"2025-05-05T20:11:57.652-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"68bcb228-1e3a-477a-a0b7-e013a2ea0c1d","ts":"2025-05-05T20:11:57.653-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"68bcb228-1e3a-477a-a0b7-e013a2ea0c1d","ts":"2025-05-05T20:11:57.653-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"76e47a62-f999-40f7-ba37-526d56653459","ts":"2025-05-05T20:11:57.653-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"76e47a62-f999-40f7-ba37-526d56653459","ts":"2025-05-05T20:11:57.654-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5c72f0a6-3d6f-4663-a824-99038696f013","ts":"2025-05-05T20:11:57.654-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"5c72f0a6-3d6f-4663-a824-99038696f013","ts":"2025-05-05T20:11:57.654-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5cd87d72-fe62-4bfe-91d2-760ab77d5e5a","ts":"2025-05-05T20:11:57.657-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"5cd87d72-fe62-4bfe-91d2-760ab77d5e5a","ts":"2025-05-05T20:11:57.657-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"87ec2147-1582-451e-8ad8-274f8d64eb70","ts":"2025-05-05T20:11:57.657-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"87ec2147-1582-451e-8ad8-274f8d64eb70","ts":"2025-05-05T20:11:57.657-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d2ef5da6-8c63-4fa2-a69e-1a34e331f38e","ts":"2025-05-05T20:11:57.684-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"d2ef5da6-8c63-4fa2-a69e-1a34e331f38e","ts":"2025-05-05T20:11:57.684-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"987993d3-8b29-406a-b3f9-b85fd82c13ec","ts":"2025-05-05T20:12:04.556-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"987993d3-8b29-406a-b3f9-b85fd82c13ec","ts":"2025-05-05T20:12:04.557-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"38ecb9b6-c023-4814-bbb8-ff2eaeab62a9","ts":"2025-05-05T20:12:04.557-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"534","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491128704037@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 2 de muzzarella, 3 de anchoas, 4 de jamon, 1 faina, 8 de 4 quesos y 1 napolitana\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"Pizza Muzzarella\\\", \\\"cantidad\\\": 2},\\n    {\\\"nombre\\\": \\\"Pizza de Anchoas\\\", \\\"cantidad\\\": 3},\\n    {\\\"nombre\\\": \\\"Pizza Jamon\\\", \\\"cantidad\\\": 4},\\n    {\\\"nombre\\\": \\\"Faina\\\", \\\"cantidad\\\": 1},\\n    {\\\"nombre\\\": \\\"Pizza 4 Quesos\\\", \\\"cantidad\\\": 8},\\n    {\\\"nombre\\\": \\\"Pizza Napolitana\\\", \\\"cantidad\\\": 1}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491128704037@c.us\\\"\\n}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":138,\"promptTokens\":680,\"totalTokens\":818}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"38ecb9b6-c023-4814-bbb8-ff2eaeab62a9","ts":"2025-05-05T20:12:04.557-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"083c520b-b940-4247-b999-f6d5e1638dac","ts":"2025-05-05T20:12:04.562-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"083c520b-b940-4247-b999-f6d5e1638dac","ts":"2025-05-05T20:12:04.562-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fa5dd6aa-42bd-4b76-99d5-ffe6a02da492","ts":"2025-05-05T20:12:04.563-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"fa5dd6aa-42bd-4b76-99d5-ffe6a02da492","ts":"2025-05-05T20:12:04.564-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7f214fed-ec47-48d5-8b49-b47970c858b6","ts":"2025-05-05T20:12:04.578-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"7f214fed-ec47-48d5-8b49-b47970c858b6","ts":"2025-05-05T20:12:04.578-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8c8734db-c960-48f3-a36f-56f6247a12b1","ts":"2025-05-05T20:12:04.580-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"8c8734db-c960-48f3-a36f-56f6247a12b1","ts":"2025-05-05T20:12:04.580-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e67121ce-f57d-411f-b80b-66c7239777a5","ts":"2025-05-05T20:12:04.582-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"e67121ce-f57d-411f-b80b-66c7239777a5","ts":"2025-05-05T20:12:04.582-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"20e21c72-93ff-4870-a271-7779659ff2f0","ts":"2025-05-05T20:12:04.583-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"20e21c72-93ff-4870-a271-7779659ff2f0","ts":"2025-05-05T20:12:04.583-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2db8a919-b3ae-45a8-bdf4-eff6843ac028","ts":"2025-05-05T20:12:04.599-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"534","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"2db8a919-b3ae-45a8-bdf4-eff6843ac028","ts":"2025-05-05T20:12:04.599-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"1ad1e66a-a51c-4921-9066-ad64fd1fcf87","ts":"2025-05-05T20:12:04.599-03:00","eventName":"n8n.workflow.failed","message":"n8n.workflow.failed","payload":{"executionId":"534","success":false,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","lastNodeExecuted":"PrepararRespuestaPedido","errorNodeType":"n8n-nodes-base.set","errorMessage":"'pedido' expects a object but we got 'const pedidos = [];\n\nfor (const producto of $json.productos) {\n  // Crear un objeto pedido para cada producto\n  const pedido = {\n    negocioId: 1,\n    numeroCliente: 5491128704037@c.us,\n    producto: ,\n    cantidad: ,\n  };\n\n  // Añadir el pedido a un array\n  pedidos.push(pedido);\n}\n\n// Asignar el array de pedidos a la salida para procesar\n = pedidos;' [item 0]"}}
{"__type":"$$EventMessageConfirm","confirm":"1ad1e66a-a51c-4921-9066-ad64fd1fcf87","ts":"2025-05-05T20:12:04.599-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"86544316-30c3-4758-981e-b15c10a00e08","ts":"2025-05-05T21:32:08.379-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"535","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"86544316-30c3-4758-981e-b15c10a00e08","ts":"2025-05-05T21:32:08.380-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"cb6c58d3-516f-4a67-890a-ac53980c76ba","ts":"2025-05-05T21:32:08.382-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"535","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"cb6c58d3-516f-4a67-890a-ac53980c76ba","ts":"2025-05-05T21:32:08.382-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"66086da7-30d2-489f-91c8-aa920db5228e","ts":"2025-05-05T21:32:08.383-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"535","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"66086da7-30d2-489f-91c8-aa920db5228e","ts":"2025-05-05T21:32:08.383-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"13c8d0dc-a0cd-4515-8478-98421d156541","ts":"2025-05-05T21:32:08.387-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"535","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"13c8d0dc-a0cd-4515-8478-98421d156541","ts":"2025-05-05T21:32:08.387-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"b2870981-23dd-4b7c-b741-b9ae1c5a82b9","ts":"2025-05-05T21:32:48.586-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"536","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"b2870981-23dd-4b7c-b741-b9ae1c5a82b9","ts":"2025-05-05T21:32:48.586-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d19f2f44-08fa-4c6e-9966-6412a1119842","ts":"2025-05-05T21:32:48.588-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"536","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"d19f2f44-08fa-4c6e-9966-6412a1119842","ts":"2025-05-05T21:32:48.588-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ba6dfda9-e595-4d73-9d28-6bad7ff37838","ts":"2025-05-05T21:32:48.591-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"536","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"ba6dfda9-e595-4d73-9d28-6bad7ff37838","ts":"2025-05-05T21:32:48.591-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"4d49d344-6239-45a0-9db5-3138eb1338b6","ts":"2025-05-05T21:32:48.594-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"536","userId":"50ecd661-bf68-4edd-9638-827720050128","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"4d49d344-6239-45a0-9db5-3138eb1338b6","ts":"2025-05-05T21:32:48.594-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"781e3ff8-a6f5-4559-821b-21fb913ec951","ts":"2025-05-05T21:32:54.264-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"537","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"781e3ff8-a6f5-4559-821b-21fb913ec951","ts":"2025-05-05T21:32:54.264-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"369f1923-4d51-426c-84c2-b1a17e280ef3","ts":"2025-05-05T21:32:54.265-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"537","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"369f1923-4d51-426c-84c2-b1a17e280ef3","ts":"2025-05-05T21:32:54.265-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0d4d1cfc-4378-4f01-8583-6e3066482bd9","ts":"2025-05-05T21:32:54.296-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"537","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"0d4d1cfc-4378-4f01-8583-6e3066482bd9","ts":"2025-05-05T21:32:54.296-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e26ad717-6b5b-423d-9d01-6e471078d334","ts":"2025-05-05T21:32:57.247-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"537","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"e26ad717-6b5b-423d-9d01-6e471078d334","ts":"2025-05-05T21:32:57.247-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"06aa18ea-e235-434c-bb10-5b51aeba8186","ts":"2025-05-05T21:32:57.247-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"537","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: [object Object], y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491128704037@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 2 de muzzarella, 3 de anchoas, 4 de jamon, 1 faina, 8 de 4 quesos y 1 napolitana\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":1,\\\"productos\\\":[{\\\"nombre\\\":\\\"Pizza Muzzarella\\\",\\\"cantidad\\\":2},{\\\"nombre\\\":\\\"Pizza de Anchoas\\\",\\\"cantidad\\\":3},{\\\"nombre\\\":\\\"Pizza Jamon\\\",\\\"cantidad\\\":4},{\\\"nombre\\\":\\\"Faina\\\",\\\"cantidad\\\":1},{\\\"nombre\\\":\\\"Pizza 4 Quesos\\\",\\\"cantidad\\\":8},{\\\"nombre\\\":\\\"Pizza Napolitana\\\",\\\"cantidad\\\":1}],\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491128704037@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":95,\"promptTokens\":571,\"totalTokens\":666}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"06aa18ea-e235-434c-bb10-5b51aeba8186","ts":"2025-05-05T21:32:57.247-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7be15589-6bab-40fb-8069-e00860ce00d3","ts":"2025-05-05T21:32:57.256-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"537","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"7be15589-6bab-40fb-8069-e00860ce00d3","ts":"2025-05-05T21:32:57.256-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"1f3d647a-f3ca-43a7-b3b9-ced66aea849d","ts":"2025-05-05T21:32:57.265-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"537","userId":"50ecd661-bf68-4edd-9638-827720050128","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"1f3d647a-f3ca-43a7-b3b9-ced66aea849d","ts":"2025-05-05T21:32:57.265-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"b3475611-a754-47b5-a054-58058988b632","ts":"2025-05-05T21:33:07.882-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"538","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"b3475611-a754-47b5-a054-58058988b632","ts":"2025-05-05T21:33:07.882-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9d1f0d72-40bc-4ed3-9c22-ab61a6fd57a2","ts":"2025-05-05T21:33:07.884-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"538","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"9d1f0d72-40bc-4ed3-9c22-ab61a6fd57a2","ts":"2025-05-05T21:33:07.885-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"29002aed-4874-40ff-a719-ad823e6039c2","ts":"2025-05-05T21:33:07.895-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"538","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"29002aed-4874-40ff-a719-ad823e6039c2","ts":"2025-05-05T21:33:07.895-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"554df291-8b72-4e1f-a5b8-2b6875692df0","ts":"2025-05-05T21:33:07.899-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"538","userId":"50ecd661-bf68-4edd-9638-827720050128","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"554df291-8b72-4e1f-a5b8-2b6875692df0","ts":"2025-05-05T21:33:07.899-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"c9b663f6-69af-4daa-866a-5e840617be4e","ts":"2025-05-05T21:33:12.288-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"539","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"c9b663f6-69af-4daa-866a-5e840617be4e","ts":"2025-05-05T21:33:12.288-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f764575a-6b55-435f-b8a5-76849bf42d1c","ts":"2025-05-05T21:33:12.290-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"539","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"f764575a-6b55-435f-b8a5-76849bf42d1c","ts":"2025-05-05T21:33:12.290-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d88b5fa0-0d3d-42f4-8cd1-171868e70e9a","ts":"2025-05-05T21:33:12.294-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"539","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"d88b5fa0-0d3d-42f4-8cd1-171868e70e9a","ts":"2025-05-05T21:33:12.294-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"def7be72-8621-4362-91ac-2270902c5efb","ts":"2025-05-05T21:33:12.296-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"539","userId":"50ecd661-bf68-4edd-9638-827720050128","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"def7be72-8621-4362-91ac-2270902c5efb","ts":"2025-05-05T21:33:12.296-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"283284fd-c5df-49d5-8d60-0a658fb6f9e7","ts":"2025-05-05T21:43:20.433-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"540","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"283284fd-c5df-49d5-8d60-0a658fb6f9e7","ts":"2025-05-05T21:43:20.434-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"02615297-f7aa-4a38-b482-bf28be765b0e","ts":"2025-05-05T21:43:20.435-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"540","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"02615297-f7aa-4a38-b482-bf28be765b0e","ts":"2025-05-05T21:43:20.436-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"520e7182-28fb-4f2e-9073-0ace289e1cef","ts":"2025-05-05T21:43:20.453-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"540","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"520e7182-28fb-4f2e-9073-0ace289e1cef","ts":"2025-05-05T21:43:20.454-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"eff7103a-998b-44f2-ae73-8cdeb0cb7151","ts":"2025-05-05T21:43:20.457-03:00","eventName":"n8n.workflow.failed","message":"n8n.workflow.failed","payload":{"executionId":"540","userId":"50ecd661-bf68-4edd-9638-827720050128","success":false,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","lastNodeExecuted":"Code1","errorNodeType":"n8n-nodes-base.code","errorMessage":"Code doesn't return items properly"}}
{"__type":"$$EventMessageConfirm","confirm":"eff7103a-998b-44f2-ae73-8cdeb0cb7151","ts":"2025-05-05T21:43:20.457-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"e6ee6927-5a9d-45a6-b34c-e6b51c348b8f","ts":"2025-05-05T21:43:36.818-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"541","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"e6ee6927-5a9d-45a6-b34c-e6b51c348b8f","ts":"2025-05-05T21:43:36.818-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"400a2828-3e67-4f08-9d3e-c2d15bcc4739","ts":"2025-05-05T21:43:36.820-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"541","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"400a2828-3e67-4f08-9d3e-c2d15bcc4739","ts":"2025-05-05T21:43:36.820-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f80e951f-54cd-4d0b-9f0c-04d7bb85ca25","ts":"2025-05-05T21:43:36.828-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"541","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"f80e951f-54cd-4d0b-9f0c-04d7bb85ca25","ts":"2025-05-05T21:43:36.828-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"5df2596e-13a9-4711-9780-9319ae4640b2","ts":"2025-05-05T21:43:36.831-03:00","eventName":"n8n.workflow.failed","message":"n8n.workflow.failed","payload":{"executionId":"541","userId":"50ecd661-bf68-4edd-9638-827720050128","success":false,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","lastNodeExecuted":"Code1","errorNodeType":"n8n-nodes-base.code","errorMessage":"Code doesn't return items properly"}}
{"__type":"$$EventMessageConfirm","confirm":"5df2596e-13a9-4711-9780-9319ae4640b2","ts":"2025-05-05T21:43:36.831-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"25760072-2786-4612-b990-19071504ca7c","ts":"2025-05-05T21:46:41.637-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"542","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"25760072-2786-4612-b990-19071504ca7c","ts":"2025-05-05T21:46:41.637-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"dbc95a08-bccc-41bf-8146-7a365089a42a","ts":"2025-05-05T21:46:41.639-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"542","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"dbc95a08-bccc-41bf-8146-7a365089a42a","ts":"2025-05-05T21:46:41.639-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"368c03a9-95a6-4382-80aa-e748bc89a325","ts":"2025-05-05T21:46:41.664-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"542","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"368c03a9-95a6-4382-80aa-e748bc89a325","ts":"2025-05-05T21:46:41.664-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"c573403d-40b6-4193-9342-03a53e81f13f","ts":"2025-05-05T21:46:41.671-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"542","userId":"50ecd661-bf68-4edd-9638-827720050128","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"c573403d-40b6-4193-9342-03a53e81f13f","ts":"2025-05-05T21:46:41.671-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"04cccd4c-49a4-42f7-b1e0-5334a4a0cf7b","ts":"2025-05-05T21:49:44.772-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"543","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"04cccd4c-49a4-42f7-b1e0-5334a4a0cf7b","ts":"2025-05-05T21:49:44.773-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b4b14313-a76d-4dad-8448-c258aa808297","ts":"2025-05-05T21:49:44.776-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"543","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"b4b14313-a76d-4dad-8448-c258aa808297","ts":"2025-05-05T21:49:44.776-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"bea880c3-38ec-476e-b663-4264011f67d6","ts":"2025-05-05T21:49:44.791-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"543","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"bea880c3-38ec-476e-b663-4264011f67d6","ts":"2025-05-05T21:49:44.791-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"800a05a2-a86e-4e04-a750-28445edeed24","ts":"2025-05-05T21:49:44.799-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"543","userId":"50ecd661-bf68-4edd-9638-827720050128","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"800a05a2-a86e-4e04-a750-28445edeed24","ts":"2025-05-05T21:49:44.799-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"fb5c4f08-3495-4429-b773-f5892d46e04e","ts":"2025-05-05T21:50:20.473-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"fb5c4f08-3495-4429-b773-f5892d46e04e","ts":"2025-05-05T21:50:20.473-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"2f1090c8-81d7-4cc7-957c-cf10d332de72","ts":"2025-05-05T21:50:27.028-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"544","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"2f1090c8-81d7-4cc7-957c-cf10d332de72","ts":"2025-05-05T21:50:27.029-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f8700ffd-a504-44b5-97b2-5e44af105741","ts":"2025-05-05T21:50:27.037-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"544","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"f8700ffd-a504-44b5-97b2-5e44af105741","ts":"2025-05-05T21:50:27.037-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5e1b197d-f5b6-40d5-9262-6006de68178e","ts":"2025-05-05T21:50:27.068-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"544","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"5e1b197d-f5b6-40d5-9262-6006de68178e","ts":"2025-05-05T21:50:27.069-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"30a6825e-b706-426f-8d22-982bcd637d88","ts":"2025-05-05T21:50:27.072-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"544","userId":"50ecd661-bf68-4edd-9638-827720050128","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"30a6825e-b706-426f-8d22-982bcd637d88","ts":"2025-05-05T21:50:27.072-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"8caff156-e6c5-4be1-9d1f-bdeb4d33d368","ts":"2025-05-05T21:50:30.523-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"545","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"8caff156-e6c5-4be1-9d1f-bdeb4d33d368","ts":"2025-05-05T21:50:30.523-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0f8fa093-b53d-4faf-ae13-bbf1770da042","ts":"2025-05-05T21:50:30.525-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"545","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"0f8fa093-b53d-4faf-ae13-bbf1770da042","ts":"2025-05-05T21:50:30.525-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5ee8e220-3b23-4975-9b04-71d75985c496","ts":"2025-05-05T21:50:30.528-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"545","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"5ee8e220-3b23-4975-9b04-71d75985c496","ts":"2025-05-05T21:50:30.528-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"aa789489-46aa-4fae-8f15-a19a8c3a2578","ts":"2025-05-05T21:50:30.530-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"545","userId":"50ecd661-bf68-4edd-9638-827720050128","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"aa789489-46aa-4fae-8f15-a19a8c3a2578","ts":"2025-05-05T21:50:30.530-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"65dfb659-d062-4219-8f95-c7190870b612","ts":"2025-05-05T21:51:58.006-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"546","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"65dfb659-d062-4219-8f95-c7190870b612","ts":"2025-05-05T21:51:58.007-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2b40efa8-9859-4426-a24a-19f1e0775001","ts":"2025-05-05T21:51:58.011-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"546","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"2b40efa8-9859-4426-a24a-19f1e0775001","ts":"2025-05-05T21:51:58.011-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"137c5c45-7d17-4e34-8b6f-a71879ad0cec","ts":"2025-05-05T21:51:58.028-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"546","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"137c5c45-7d17-4e34-8b6f-a71879ad0cec","ts":"2025-05-05T21:51:58.029-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"e95626f8-0d25-47cd-8654-d9285ce304e9","ts":"2025-05-05T21:51:58.033-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"546","userId":"50ecd661-bf68-4edd-9638-827720050128","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"e95626f8-0d25-47cd-8654-d9285ce304e9","ts":"2025-05-05T21:51:58.033-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"3ac1afda-e10d-484e-bf6d-2786af75745a","ts":"2025-05-05T21:52:02.175-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"547","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"3ac1afda-e10d-484e-bf6d-2786af75745a","ts":"2025-05-05T21:52:02.175-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1d1888f8-3267-4f1b-9d9f-3481d9ea873c","ts":"2025-05-05T21:52:02.176-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"547","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"1d1888f8-3267-4f1b-9d9f-3481d9ea873c","ts":"2025-05-05T21:52:02.176-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3201b42e-ccd6-43f2-82b6-0b30129081fe","ts":"2025-05-05T21:52:02.178-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"547","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"3201b42e-ccd6-43f2-82b6-0b30129081fe","ts":"2025-05-05T21:52:02.179-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"53c9b136-2c3e-4dd5-b81c-26edc14cca25","ts":"2025-05-05T21:52:02.181-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"547","userId":"50ecd661-bf68-4edd-9638-827720050128","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"53c9b136-2c3e-4dd5-b81c-26edc14cca25","ts":"2025-05-05T21:52:02.181-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"cb67a61d-8975-4f92-b4fc-20ef09168d48","ts":"2025-05-05T21:52:28.460-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"548","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"cb67a61d-8975-4f92-b4fc-20ef09168d48","ts":"2025-05-05T21:52:28.461-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0ae7a76d-ab57-4c50-99b3-c808757f62d2","ts":"2025-05-05T21:52:28.463-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"548","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"0ae7a76d-ab57-4c50-99b3-c808757f62d2","ts":"2025-05-05T21:52:28.463-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2013ce60-968d-47af-8121-ec19c648478d","ts":"2025-05-05T21:52:28.473-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"548","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"2013ce60-968d-47af-8121-ec19c648478d","ts":"2025-05-05T21:52:28.473-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"333e55a5-c8c3-4425-b678-48eb2512a5ae","ts":"2025-05-05T21:52:28.477-03:00","eventName":"n8n.workflow.failed","message":"n8n.workflow.failed","payload":{"executionId":"548","userId":"50ecd661-bf68-4edd-9638-827720050128","success":false,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","lastNodeExecuted":"PrepararRespuestaPedido","errorNodeType":"n8n-nodes-base.set","errorMessage":"'response' expects a object but we got '¡Tu pedido ha sido registrado con éxito!\nDetalle del pedido:\n- Pizza Muzzarella (cantidad: 2)\n- Pizza de Anchoas (cantidad: 3)\n- Pizza Jamon (cantidad: 4)\n- Faina (cantidad: 1)\n- Pizza 4 Quesos (cantidad: 8)\n- Pizza Napolitana (cantidad: 1)\n\n[object Object]\n\n' [item 0]"}}
{"__type":"$$EventMessageConfirm","confirm":"333e55a5-c8c3-4425-b678-48eb2512a5ae","ts":"2025-05-05T21:52:28.477-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"9ebff2ce-691e-4f9a-85a9-1091755a8d1e","ts":"2025-05-05T21:52:33.534-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"549","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"9ebff2ce-691e-4f9a-85a9-1091755a8d1e","ts":"2025-05-05T21:52:33.534-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5cf1155d-0c44-4e67-88a6-2329bce24d2c","ts":"2025-05-05T21:52:33.536-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"549","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"5cf1155d-0c44-4e67-88a6-2329bce24d2c","ts":"2025-05-05T21:52:33.537-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"58fa634b-e14c-4165-86cf-a3f13f3a70ea","ts":"2025-05-05T21:52:33.542-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"549","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"58fa634b-e14c-4165-86cf-a3f13f3a70ea","ts":"2025-05-05T21:52:33.542-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"fae81d88-078f-494a-b093-9c1ff0ae96f8","ts":"2025-05-05T21:52:33.545-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"549","userId":"50ecd661-bf68-4edd-9638-827720050128","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"fae81d88-078f-494a-b093-9c1ff0ae96f8","ts":"2025-05-05T21:52:33.545-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"fbcaa12e-91d7-4212-b941-1252a4753e41","ts":"2025-05-05T22:03:07.503-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"550","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"fbcaa12e-91d7-4212-b941-1252a4753e41","ts":"2025-05-05T22:03:07.504-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b641219a-9114-498b-9dd4-ba1b53c3fbb6","ts":"2025-05-05T22:03:07.504-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"b641219a-9114-498b-9dd4-ba1b53c3fbb6","ts":"2025-05-05T22:03:07.504-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fc4f87dc-da7f-40c6-b02e-2cd07709c680","ts":"2025-05-05T22:03:07.505-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"fc4f87dc-da7f-40c6-b02e-2cd07709c680","ts":"2025-05-05T22:03:07.505-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"95ce55cb-3ac3-4291-a467-70fc662592f1","ts":"2025-05-05T22:03:07.505-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"95ce55cb-3ac3-4291-a467-70fc662592f1","ts":"2025-05-05T22:03:07.505-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ba341da0-6d95-4ec8-ae08-755e4a5f0700","ts":"2025-05-05T22:03:07.507-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"ba341da0-6d95-4ec8-ae08-755e4a5f0700","ts":"2025-05-05T22:03:07.507-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"03fe4067-8b32-45f5-a836-8a7386a8a85a","ts":"2025-05-05T22:03:07.507-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"03fe4067-8b32-45f5-a836-8a7386a8a85a","ts":"2025-05-05T22:03:07.507-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"770f8e2c-fcec-45b4-b19c-5788bc291107","ts":"2025-05-05T22:03:07.531-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"770f8e2c-fcec-45b4-b19c-5788bc291107","ts":"2025-05-05T22:03:07.531-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3406620e-64f0-4d50-8e4e-863323a89c10","ts":"2025-05-05T22:03:16.790-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"3406620e-64f0-4d50-8e4e-863323a89c10","ts":"2025-05-05T22:03:16.791-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"b1f1a4b2-70b4-4a5d-a49a-90fcc4773bd7","ts":"2025-05-05T22:03:16.791-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"550","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491136437962@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 2 de muzzarella, 3 de anchoas, 4 de jamon, 1 faina, 8 de 4 quesos y 1 napolitana\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"Pizza Muzzarella\\\", \\\"cantidad\\\": 2},\\n    {\\\"nombre\\\": \\\"Pizza de Anchoas\\\", \\\"cantidad\\\": 3},\\n    {\\\"nombre\\\": \\\"Pizza Jamon\\\", \\\"cantidad\\\": 4},\\n    {\\\"nombre\\\": \\\"Faina\\\", \\\"cantidad\\\": 1},\\n    {\\\"nombre\\\": \\\"Pizza 4 Quesos\\\", \\\"cantidad\\\": 8},\\n    {\\\"nombre\\\": \\\"Pizza Napolitana\\\", \\\"cantidad\\\": 1}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491136437962@c.us\\\"\\n}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":138,\"promptTokens\":680,\"totalTokens\":818}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"b1f1a4b2-70b4-4a5d-a49a-90fcc4773bd7","ts":"2025-05-05T22:03:16.791-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c1f378d0-9d7b-4d53-98f8-38d9796f3c31","ts":"2025-05-05T22:03:16.798-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"c1f378d0-9d7b-4d53-98f8-38d9796f3c31","ts":"2025-05-05T22:03:16.798-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d1e85260-15a4-47ae-ae2d-e83985d79b29","ts":"2025-05-05T22:03:16.799-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"d1e85260-15a4-47ae-ae2d-e83985d79b29","ts":"2025-05-05T22:03:16.800-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"76b5b558-aa13-4888-ac2d-752596bf614d","ts":"2025-05-05T22:03:16.813-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"76b5b558-aa13-4888-ac2d-752596bf614d","ts":"2025-05-05T22:03:16.813-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ca963cae-30b8-497f-b9f9-01bea1bb91a7","ts":"2025-05-05T22:03:16.813-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"ca963cae-30b8-497f-b9f9-01bea1bb91a7","ts":"2025-05-05T22:03:16.813-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3693f98d-4699-4ea9-9155-1ff0ec515236","ts":"2025-05-05T22:03:16.814-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"3693f98d-4699-4ea9-9155-1ff0ec515236","ts":"2025-05-05T22:03:16.814-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"53ab937a-1823-4079-b208-c2e82df13309","ts":"2025-05-05T22:03:16.814-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"53ab937a-1823-4079-b208-c2e82df13309","ts":"2025-05-05T22:03:16.814-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"031401d5-0b58-4665-b301-a607be67d7ef","ts":"2025-05-05T22:03:16.820-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"031401d5-0b58-4665-b301-a607be67d7ef","ts":"2025-05-05T22:03:16.820-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"84bace26-b550-4c72-a62d-d4ec5bf8dbc7","ts":"2025-05-05T22:03:16.820-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"84bace26-b550-4c72-a62d-d4ec5bf8dbc7","ts":"2025-05-05T22:03:16.821-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"68c557dc-c4ea-49ff-b808-f9cfe4dc27f7","ts":"2025-05-05T22:03:16.825-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"68c557dc-c4ea-49ff-b808-f9cfe4dc27f7","ts":"2025-05-05T22:03:16.825-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5bc24c5c-5c90-437f-af48-3348702a46a0","ts":"2025-05-05T22:03:16.825-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"5bc24c5c-5c90-437f-af48-3348702a46a0","ts":"2025-05-05T22:03:16.825-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"01ed3265-2521-4439-b1f8-d2a51f3e279c","ts":"2025-05-05T22:03:16.826-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"550","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"01ed3265-2521-4439-b1f8-d2a51f3e279c","ts":"2025-05-05T22:03:16.826-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"4013a3aa-d622-474e-abf8-fceaad12ba90","ts":"2025-05-05T22:03:16.828-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"550","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"4013a3aa-d622-474e-abf8-fceaad12ba90","ts":"2025-05-05T22:03:16.828-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"c100736f-2632-4bcc-ba91-3706204695d6","ts":"2025-05-05T22:04:00.081-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"c100736f-2632-4bcc-ba91-3706204695d6","ts":"2025-05-05T22:04:00.082-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"10a59522-1994-4997-95e2-6cc0edab24ef","ts":"2025-05-05T22:04:25.738-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"551","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"10a59522-1994-4997-95e2-6cc0edab24ef","ts":"2025-05-05T22:04:25.739-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9c92e6ad-6a26-48d7-9951-0837ef415eb1","ts":"2025-05-05T22:04:25.739-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"9c92e6ad-6a26-48d7-9951-0837ef415eb1","ts":"2025-05-05T22:04:25.739-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"cb586b20-552e-41d4-8183-98812780781f","ts":"2025-05-05T22:04:25.740-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"cb586b20-552e-41d4-8183-98812780781f","ts":"2025-05-05T22:04:25.740-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0c414bf1-1f7f-4132-8d5f-6f5ea8dbeb61","ts":"2025-05-05T22:04:25.740-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"0c414bf1-1f7f-4132-8d5f-6f5ea8dbeb61","ts":"2025-05-05T22:04:25.740-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c47ebe62-a47c-4963-955f-0c4c6ac5b3cf","ts":"2025-05-05T22:04:25.741-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"c47ebe62-a47c-4963-955f-0c4c6ac5b3cf","ts":"2025-05-05T22:04:25.741-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c32c2688-af4c-480d-9504-2208f1c439a7","ts":"2025-05-05T22:04:25.741-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"c32c2688-af4c-480d-9504-2208f1c439a7","ts":"2025-05-05T22:04:25.741-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2988ca60-9224-41e4-a354-edd4d6424b40","ts":"2025-05-05T22:04:25.759-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"2988ca60-9224-41e4-a354-edd4d6424b40","ts":"2025-05-05T22:04:25.759-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4875d894-6038-4e4c-a859-feca19e4284e","ts":"2025-05-05T22:04:28.358-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"4875d894-6038-4e4c-a859-feca19e4284e","ts":"2025-05-05T22:04:28.359-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"05dcee29-cfd4-46f1-9019-53d4c4114772","ts":"2025-05-05T22:04:28.359-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"551","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491136437962@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 2 de muzzarella, 3 de anchoas, 4 de jamon, 1 faina, 8 de 4 quesos y 1 napolitana\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"Pizza Muzzarella\\\", \\\"cantidad\\\": 2},\\n    {\\\"nombre\\\": \\\"Pizza de Anchoas\\\", \\\"cantidad\\\": 3},\\n    {\\\"nombre\\\": \\\"Pizza Jamon\\\", \\\"cantidad\\\": 4},\\n    {\\\"nombre\\\": \\\"Faina\\\", \\\"cantidad\\\": 1},\\n    {\\\"nombre\\\": \\\"Pizza 4 Quesos\\\", \\\"cantidad\\\": 8},\\n    {\\\"nombre\\\": \\\"Pizza Napolitana\\\", \\\"cantidad\\\": 1}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491136437962@c.us\\\"\\n}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":138,\"promptTokens\":680,\"totalTokens\":818}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"05dcee29-cfd4-46f1-9019-53d4c4114772","ts":"2025-05-05T22:04:28.359-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"723ae519-ad64-4d34-bad3-be610b79db3c","ts":"2025-05-05T22:04:28.367-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"723ae519-ad64-4d34-bad3-be610b79db3c","ts":"2025-05-05T22:04:28.367-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"90a23327-635e-428d-9354-22822e9f4041","ts":"2025-05-05T22:04:28.368-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"90a23327-635e-428d-9354-22822e9f4041","ts":"2025-05-05T22:04:28.368-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"98765e44-ef6b-4099-865a-09123b0ca3b6","ts":"2025-05-05T22:04:28.383-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"98765e44-ef6b-4099-865a-09123b0ca3b6","ts":"2025-05-05T22:04:28.383-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"af0d0aab-3ae9-4d43-b17f-af1b36e10eb3","ts":"2025-05-05T22:04:28.383-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"af0d0aab-3ae9-4d43-b17f-af1b36e10eb3","ts":"2025-05-05T22:04:28.383-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"de6ac279-70c3-4ab0-8e6c-f8310f43f22c","ts":"2025-05-05T22:04:28.384-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"de6ac279-70c3-4ab0-8e6c-f8310f43f22c","ts":"2025-05-05T22:04:28.384-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4bd604d2-bb56-4235-b835-8e3c561d8f66","ts":"2025-05-05T22:04:28.384-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"4bd604d2-bb56-4235-b835-8e3c561d8f66","ts":"2025-05-05T22:04:28.384-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"df23946f-2b7b-4734-9bfe-e3fc820850b1","ts":"2025-05-05T22:04:28.391-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"df23946f-2b7b-4734-9bfe-e3fc820850b1","ts":"2025-05-05T22:04:28.391-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a0f331a6-f630-472f-a9e5-ede50743e9a5","ts":"2025-05-05T22:04:28.391-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"a0f331a6-f630-472f-a9e5-ede50743e9a5","ts":"2025-05-05T22:04:28.391-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4696e084-53c4-4d22-ad9c-58f811e8807c","ts":"2025-05-05T22:04:28.393-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"4696e084-53c4-4d22-ad9c-58f811e8807c","ts":"2025-05-05T22:04:28.394-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0d49dc47-05d0-45fc-9de7-329f1f65a47e","ts":"2025-05-05T22:04:28.394-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"0d49dc47-05d0-45fc-9de7-329f1f65a47e","ts":"2025-05-05T22:04:28.394-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e72ff45e-c54b-48cf-803f-f5ebbd19a578","ts":"2025-05-05T22:04:28.395-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"551","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"e72ff45e-c54b-48cf-803f-f5ebbd19a578","ts":"2025-05-05T22:04:28.395-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"abd1d850-e8bf-4753-a7a7-c85b9f2712be","ts":"2025-05-05T22:04:28.396-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"551","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"abd1d850-e8bf-4753-a7a7-c85b9f2712be","ts":"2025-05-05T22:04:28.396-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"37fc00f2-ed77-4320-b257-b8996d9464a3","ts":"2025-05-05T22:08:53.664-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"552","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"37fc00f2-ed77-4320-b257-b8996d9464a3","ts":"2025-05-05T22:08:53.664-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e9f59c3d-7895-4baf-ae54-5e100702fcd1","ts":"2025-05-05T22:08:53.667-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"e9f59c3d-7895-4baf-ae54-5e100702fcd1","ts":"2025-05-05T22:08:53.670-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0ca8cdd2-f323-46a6-9ff8-50a6073d89ec","ts":"2025-05-05T22:08:53.671-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"0ca8cdd2-f323-46a6-9ff8-50a6073d89ec","ts":"2025-05-05T22:08:53.671-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6a830fd1-f31a-4f14-ab02-5c1b8ae27a73","ts":"2025-05-05T22:08:53.671-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"6a830fd1-f31a-4f14-ab02-5c1b8ae27a73","ts":"2025-05-05T22:08:53.671-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"36cd9ccb-2e39-43ac-a123-f94abc8798de","ts":"2025-05-05T22:08:53.672-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"36cd9ccb-2e39-43ac-a123-f94abc8798de","ts":"2025-05-05T22:08:53.672-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"27159155-a7dd-458d-a076-246e81119865","ts":"2025-05-05T22:08:53.672-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"27159155-a7dd-458d-a076-246e81119865","ts":"2025-05-05T22:08:53.672-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2e8374da-97a6-42fd-a163-785c41edc690","ts":"2025-05-05T22:08:53.704-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"2e8374da-97a6-42fd-a163-785c41edc690","ts":"2025-05-05T22:08:53.704-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"91eca6f6-83a6-4656-93eb-3bf426c5aae9","ts":"2025-05-05T22:08:56.408-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"91eca6f6-83a6-4656-93eb-3bf426c5aae9","ts":"2025-05-05T22:08:56.408-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"f52a58aa-e6a3-42f3-974f-4909d97d7dda","ts":"2025-05-05T22:08:56.409-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"552","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491136437962@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 2 de muzzarella, 3 de anchoas, 4 de jamon, 1 faina, 8 de 4 quesos y 1 napolitana\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"Pizza Muzzarella\\\", \\\"cantidad\\\": 2},\\n    {\\\"nombre\\\": \\\"Pizza de Anchoas\\\", \\\"cantidad\\\": 3},\\n    {\\\"nombre\\\": \\\"Pizza Jamon\\\", \\\"cantidad\\\": 4},\\n    {\\\"nombre\\\": \\\"Faina\\\", \\\"cantidad\\\": 1},\\n    {\\\"nombre\\\": \\\"Pizza 4 Quesos\\\", \\\"cantidad\\\": 8},\\n    {\\\"nombre\\\": \\\"Pizza Napolitana\\\", \\\"cantidad\\\": 1}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491136437962@c.us\\\"\\n}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":138,\"promptTokens\":680,\"totalTokens\":818}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"f52a58aa-e6a3-42f3-974f-4909d97d7dda","ts":"2025-05-05T22:08:56.409-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4105b875-5a30-4018-a217-c0bdf6219dfb","ts":"2025-05-05T22:08:56.411-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"4105b875-5a30-4018-a217-c0bdf6219dfb","ts":"2025-05-05T22:08:56.411-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7aacfe11-2754-4728-9233-8ae49a405167","ts":"2025-05-05T22:08:56.411-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"7aacfe11-2754-4728-9233-8ae49a405167","ts":"2025-05-05T22:08:56.411-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fcd7c017-ab49-4069-b4c5-99b3832c16c6","ts":"2025-05-05T22:08:56.421-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"fcd7c017-ab49-4069-b4c5-99b3832c16c6","ts":"2025-05-05T22:08:56.421-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"634ceab5-fd43-4ac2-8cab-21d41d9c6974","ts":"2025-05-05T22:08:56.421-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"634ceab5-fd43-4ac2-8cab-21d41d9c6974","ts":"2025-05-05T22:08:56.421-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1bed2271-3d92-4ee4-9807-6593cab6035b","ts":"2025-05-05T22:08:56.422-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"1bed2271-3d92-4ee4-9807-6593cab6035b","ts":"2025-05-05T22:08:56.422-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"358ae3b1-b000-4194-8458-9605079edf2e","ts":"2025-05-05T22:08:56.422-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"358ae3b1-b000-4194-8458-9605079edf2e","ts":"2025-05-05T22:08:56.422-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ff17d156-647d-45fa-a2a9-4611ddefc690","ts":"2025-05-05T22:08:56.429-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"ff17d156-647d-45fa-a2a9-4611ddefc690","ts":"2025-05-05T22:08:56.429-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a9dbabb1-f9e5-4ea7-83eb-5f35a596e48b","ts":"2025-05-05T22:08:56.429-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"a9dbabb1-f9e5-4ea7-83eb-5f35a596e48b","ts":"2025-05-05T22:08:56.430-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b3e3a9cb-583b-4bcd-b991-5e4fc98ee5b9","ts":"2025-05-05T22:08:56.433-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"b3e3a9cb-583b-4bcd-b991-5e4fc98ee5b9","ts":"2025-05-05T22:08:56.433-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8978d1d1-4ee3-450f-b3a8-c8198448d09f","ts":"2025-05-05T22:08:56.433-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"8978d1d1-4ee3-450f-b3a8-c8198448d09f","ts":"2025-05-05T22:08:56.433-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"dbb1d0ef-4347-46f8-b5bc-37c02aca2c4f","ts":"2025-05-05T22:08:56.434-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"552","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"dbb1d0ef-4347-46f8-b5bc-37c02aca2c4f","ts":"2025-05-05T22:08:56.434-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"ee10845f-418b-4af7-8aac-650f9a96d3c0","ts":"2025-05-05T22:08:56.436-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"552","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"ee10845f-418b-4af7-8aac-650f9a96d3c0","ts":"2025-05-05T22:08:56.436-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAudit","id":"427f12c3-eea7-4b7a-b2b5-bdb2ae99c7aa","ts":"2025-05-05T22:10:09.552-03:00","eventName":"n8n.audit.workflow.updated","message":"n8n.audit.workflow.updated","payload":{"userId":"50ecd661-bf68-4edd-9638-827720050128","_email":"frferrari@itba.edu.ar","_firstName":"Franco","_lastName":"Ferrari","globalRole":"global:owner","workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"427f12c3-eea7-4b7a-b2b5-bdb2ae99c7aa","ts":"2025-05-05T22:10:09.552-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"b421fd37-8404-43a9-82b6-91fa10c2dd9e","ts":"2025-05-05T22:10:38.871-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"553","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"b421fd37-8404-43a9-82b6-91fa10c2dd9e","ts":"2025-05-05T22:10:38.871-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"846f078d-7b2e-4df0-b770-3fd2eddf42db","ts":"2025-05-05T22:10:38.872-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"846f078d-7b2e-4df0-b770-3fd2eddf42db","ts":"2025-05-05T22:10:38.872-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"af24d411-55bb-467e-8a22-dd85b648a188","ts":"2025-05-05T22:10:38.873-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"af24d411-55bb-467e-8a22-dd85b648a188","ts":"2025-05-05T22:10:38.873-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"59d824ac-cbad-4822-84df-72d6aa8bd5ba","ts":"2025-05-05T22:10:38.873-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"59d824ac-cbad-4822-84df-72d6aa8bd5ba","ts":"2025-05-05T22:10:38.873-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2edc5498-8943-4be9-b362-fb40ef4b2e35","ts":"2025-05-05T22:10:38.875-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"2edc5498-8943-4be9-b362-fb40ef4b2e35","ts":"2025-05-05T22:10:38.875-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d5cec9b9-a0b2-47ae-857a-d917a8aca009","ts":"2025-05-05T22:10:38.876-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"d5cec9b9-a0b2-47ae-857a-d917a8aca009","ts":"2025-05-05T22:10:38.876-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e8693102-5319-4f42-a1df-a4b18742821b","ts":"2025-05-05T22:10:38.893-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"e8693102-5319-4f42-a1df-a4b18742821b","ts":"2025-05-05T22:10:38.893-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e36d1008-fe2e-436d-925c-4c49cdeaf24f","ts":"2025-05-05T22:10:41.275-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"e36d1008-fe2e-436d-925c-4c49cdeaf24f","ts":"2025-05-05T22:10:41.275-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"a2761cae-f37f-4e87-a652-43e8ca58de16","ts":"2025-05-05T22:10:41.276-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"553","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491136437962@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 2 de muzzarella, 3 de anchoas, 4 de jamon, 1 faina, 8 de 4 quesos y 1 napolitana\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":1,\\\"productos\\\":[{\\\"nombre\\\":\\\"Pizza Muzzarella\\\",\\\"cantidad\\\":2},{\\\"nombre\\\":\\\"Pizza de Anchoas\\\",\\\"cantidad\\\":3},{\\\"nombre\\\":\\\"Pizza Jamon\\\",\\\"cantidad\\\":4},{\\\"nombre\\\":\\\"Faina\\\",\\\"cantidad\\\":1},{\\\"nombre\\\":\\\"Pizza 4 Quesos\\\",\\\"cantidad\\\":8},{\\\"nombre\\\":\\\"Pizza Napolitana\\\",\\\"cantidad\\\":1}],\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491136437962@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":95,\"promptTokens\":680,\"totalTokens\":775}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"a2761cae-f37f-4e87-a652-43e8ca58de16","ts":"2025-05-05T22:10:41.276-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8716400d-545f-434c-ba7b-fa36ae65e816","ts":"2025-05-05T22:10:41.278-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"8716400d-545f-434c-ba7b-fa36ae65e816","ts":"2025-05-05T22:10:41.278-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e2c6ba14-6303-4006-903a-c92087e07aef","ts":"2025-05-05T22:10:41.278-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"e2c6ba14-6303-4006-903a-c92087e07aef","ts":"2025-05-05T22:10:41.279-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"bdf4fa08-5101-445f-a29b-673f6f34b7ee","ts":"2025-05-05T22:10:41.285-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"bdf4fa08-5101-445f-a29b-673f6f34b7ee","ts":"2025-05-05T22:10:41.285-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"773ccc38-b682-4e67-8597-731c1316aaf4","ts":"2025-05-05T22:10:41.285-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"773ccc38-b682-4e67-8597-731c1316aaf4","ts":"2025-05-05T22:10:41.285-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3c75a090-a875-48bc-b7c8-2e595d35729e","ts":"2025-05-05T22:10:41.286-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"3c75a090-a875-48bc-b7c8-2e595d35729e","ts":"2025-05-05T22:10:41.286-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"75b88141-43ad-4066-a429-8cc1bb84cd72","ts":"2025-05-05T22:10:41.286-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"75b88141-43ad-4066-a429-8cc1bb84cd72","ts":"2025-05-05T22:10:41.286-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d6f76ecc-2d62-4eca-b742-d6f16f0a4ed0","ts":"2025-05-05T22:10:41.291-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"d6f76ecc-2d62-4eca-b742-d6f16f0a4ed0","ts":"2025-05-05T22:10:41.291-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2c3e0c75-ae26-45f0-96fa-b1131b2b0a4d","ts":"2025-05-05T22:10:41.291-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"2c3e0c75-ae26-45f0-96fa-b1131b2b0a4d","ts":"2025-05-05T22:10:41.291-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b35f913d-41dc-4d6b-90b2-f5f05fd5a8aa","ts":"2025-05-05T22:10:41.292-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"b35f913d-41dc-4d6b-90b2-f5f05fd5a8aa","ts":"2025-05-05T22:10:41.292-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ea7ab54d-d9b3-427d-87d1-6354a4e42783","ts":"2025-05-05T22:10:41.292-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"ea7ab54d-d9b3-427d-87d1-6354a4e42783","ts":"2025-05-05T22:10:41.292-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"365d618c-5555-4ce5-a79c-0e7719d3186f","ts":"2025-05-05T22:10:41.293-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"553","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"365d618c-5555-4ce5-a79c-0e7719d3186f","ts":"2025-05-05T22:10:41.293-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"93d38da3-ceb4-4178-b729-456f074418d1","ts":"2025-05-05T22:10:41.293-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"553","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"93d38da3-ceb4-4178-b729-456f074418d1","ts":"2025-05-05T22:10:41.293-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"81eda522-00b1-4f58-930f-967d52b294ff","ts":"2025-05-05T22:12:51.944-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"554","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"81eda522-00b1-4f58-930f-967d52b294ff","ts":"2025-05-05T22:12:51.945-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f2744934-34bf-4ba4-98db-dbc7f17d53c5","ts":"2025-05-05T22:12:51.945-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"f2744934-34bf-4ba4-98db-dbc7f17d53c5","ts":"2025-05-05T22:12:51.945-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0bae6b09-2c4a-4a32-b38f-4ff729d9d135","ts":"2025-05-05T22:12:51.946-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"0bae6b09-2c4a-4a32-b38f-4ff729d9d135","ts":"2025-05-05T22:12:51.946-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5c9afa3a-ddd5-4c3a-a920-6a2b7dfd7d35","ts":"2025-05-05T22:12:51.946-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"5c9afa3a-ddd5-4c3a-a920-6a2b7dfd7d35","ts":"2025-05-05T22:12:51.946-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"62ba2625-7d81-4b25-b4e7-7c6d35b19fa2","ts":"2025-05-05T22:12:51.948-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"62ba2625-7d81-4b25-b4e7-7c6d35b19fa2","ts":"2025-05-05T22:12:51.948-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"47d14ea4-c07b-475d-b62f-35976073c887","ts":"2025-05-05T22:12:51.948-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"47d14ea4-c07b-475d-b62f-35976073c887","ts":"2025-05-05T22:12:51.948-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d9eba317-fc79-4792-9461-d0426b676a4d","ts":"2025-05-05T22:12:51.976-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"d9eba317-fc79-4792-9461-d0426b676a4d","ts":"2025-05-05T22:12:51.976-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9331f801-ec21-43c7-a5ef-c65c6fc338c6","ts":"2025-05-05T22:12:54.535-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"9331f801-ec21-43c7-a5ef-c65c6fc338c6","ts":"2025-05-05T22:12:54.536-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"999864d6-5a10-4559-9dec-8590735bb940","ts":"2025-05-05T22:12:54.536-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"554","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491136437962@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 2 de muzzarella, 3 de anchoas, 4 de jamon, 1 faina, 8 de 4 quesos y 1 napolitana\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":1,\\\"productos\\\":[{\\\"nombre\\\":\\\"Pizza Muzzarella\\\",\\\"cantidad\\\":2},{\\\"nombre\\\":\\\"Pizza de Anchoas\\\",\\\"cantidad\\\":3},{\\\"nombre\\\":\\\"Pizza Jamon\\\",\\\"cantidad\\\":4},{\\\"nombre\\\":\\\"Faina\\\",\\\"cantidad\\\":1},{\\\"nombre\\\":\\\"Pizza 4 Quesos\\\",\\\"cantidad\\\":8},{\\\"nombre\\\":\\\"Pizza Napolitana\\\",\\\"cantidad\\\":1}],\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491136437962@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":95,\"promptTokens\":680,\"totalTokens\":775}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"999864d6-5a10-4559-9dec-8590735bb940","ts":"2025-05-05T22:12:54.536-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"58c12a1d-c55c-4db1-996f-a5ee272b3bb6","ts":"2025-05-05T22:12:54.542-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"58c12a1d-c55c-4db1-996f-a5ee272b3bb6","ts":"2025-05-05T22:12:54.542-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ca22abb9-eb3b-47ed-ab1e-e2d4ea4324c5","ts":"2025-05-05T22:12:54.543-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"ca22abb9-eb3b-47ed-ab1e-e2d4ea4324c5","ts":"2025-05-05T22:12:54.543-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"084ec88e-cdb3-4b77-9088-6910810ed423","ts":"2025-05-05T22:12:54.558-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"084ec88e-cdb3-4b77-9088-6910810ed423","ts":"2025-05-05T22:12:54.559-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6e125e26-0833-4c6a-b0f4-61dcf6a1b693","ts":"2025-05-05T22:12:54.559-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"6e125e26-0833-4c6a-b0f4-61dcf6a1b693","ts":"2025-05-05T22:12:54.559-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0dacc7eb-ad2c-47dc-a683-0654ea34931a","ts":"2025-05-05T22:12:54.560-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"0dacc7eb-ad2c-47dc-a683-0654ea34931a","ts":"2025-05-05T22:12:54.560-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"911bd4c5-438e-474e-8281-204b41530d74","ts":"2025-05-05T22:12:54.560-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"911bd4c5-438e-474e-8281-204b41530d74","ts":"2025-05-05T22:12:54.560-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ecf1f546-5b32-468b-8d4b-0a9d2c26bc66","ts":"2025-05-05T22:12:54.568-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"ecf1f546-5b32-468b-8d4b-0a9d2c26bc66","ts":"2025-05-05T22:12:54.568-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"60c8ebc2-22bd-4772-a7ad-40727734edca","ts":"2025-05-05T22:12:54.568-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"60c8ebc2-22bd-4772-a7ad-40727734edca","ts":"2025-05-05T22:12:54.568-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6f3eddff-77fd-4f95-82a3-4e4ab3419358","ts":"2025-05-05T22:12:54.569-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"6f3eddff-77fd-4f95-82a3-4e4ab3419358","ts":"2025-05-05T22:12:54.569-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3bb3551d-6639-472e-a910-767b6316af36","ts":"2025-05-05T22:12:54.569-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"3bb3551d-6639-472e-a910-767b6316af36","ts":"2025-05-05T22:12:54.570-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"40f3ba5b-4f34-4a20-9c2e-65c6b1783a1c","ts":"2025-05-05T22:12:54.570-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"554","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"40f3ba5b-4f34-4a20-9c2e-65c6b1783a1c","ts":"2025-05-05T22:12:54.570-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"1f4ea977-5dbf-44c0-a9da-8ed5918f6393","ts":"2025-05-05T22:12:54.571-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"554","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"1f4ea977-5dbf-44c0-a9da-8ed5918f6393","ts":"2025-05-05T22:12:54.571-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"a23fceaf-3345-4852-ae35-6f2fdeb9baf9","ts":"2025-05-05T22:21:22.466-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"555","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"a23fceaf-3345-4852-ae35-6f2fdeb9baf9","ts":"2025-05-05T22:21:22.466-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"dccf910e-9852-4507-8d90-890f6faa662a","ts":"2025-05-05T22:21:22.477-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"dccf910e-9852-4507-8d90-890f6faa662a","ts":"2025-05-05T22:21:22.477-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f016d329-18f5-4837-b22b-d648c6935ee9","ts":"2025-05-05T22:21:22.482-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"f016d329-18f5-4837-b22b-d648c6935ee9","ts":"2025-05-05T22:21:22.482-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"220e6f5b-18e7-434a-b7f8-a7422c638a8e","ts":"2025-05-05T22:21:22.482-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"220e6f5b-18e7-434a-b7f8-a7422c638a8e","ts":"2025-05-05T22:21:22.482-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"599244e3-8b2c-4473-9201-d9ed8e299140","ts":"2025-05-05T22:21:22.488-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"599244e3-8b2c-4473-9201-d9ed8e299140","ts":"2025-05-05T22:21:22.488-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7ba886a6-c603-43b4-9412-a877196b9fa1","ts":"2025-05-05T22:21:22.488-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"7ba886a6-c603-43b4-9412-a877196b9fa1","ts":"2025-05-05T22:21:22.488-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c0a3c37b-db53-4835-bb27-bc81cd9241db","ts":"2025-05-05T22:21:22.518-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"c0a3c37b-db53-4835-bb27-bc81cd9241db","ts":"2025-05-05T22:21:22.518-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"74f04c28-5eab-4c3a-9b99-e1e4c2b0b853","ts":"2025-05-05T22:21:27.728-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"74f04c28-5eab-4c3a-9b99-e1e4c2b0b853","ts":"2025-05-05T22:21:27.728-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"5610fc50-2063-4da5-9a89-b2981dd758ba","ts":"2025-05-05T22:21:27.728-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"555","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491136437962@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 2 de muzzarella, 3 de anchoas, 4 de jamon, 1 faina, 8 de 4 quesos y 1 napolitana\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":1,\\\"productos\\\":[{\\\"nombre\\\":\\\"Pizza Muzzarella\\\",\\\"cantidad\\\":2},{\\\"nombre\\\":\\\"Pizza de Anchoas\\\",\\\"cantidad\\\":3},{\\\"nombre\\\":\\\"Pizza Jamon\\\",\\\"cantidad\\\":4},{\\\"nombre\\\":\\\"Faina\\\",\\\"cantidad\\\":1},{\\\"nombre\\\":\\\"Pizza 4 Quesos\\\",\\\"cantidad\\\":8},{\\\"nombre\\\":\\\"Pizza Napolitana\\\",\\\"cantidad\\\":1}],\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491136437962@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":95,\"promptTokens\":680,\"totalTokens\":775}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"5610fc50-2063-4da5-9a89-b2981dd758ba","ts":"2025-05-05T22:21:27.728-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"39f70a57-7cbe-4ad9-be4e-0e7dbd0c6626","ts":"2025-05-05T22:21:27.729-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"39f70a57-7cbe-4ad9-be4e-0e7dbd0c6626","ts":"2025-05-05T22:21:27.729-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"26a3fbae-96f3-41a8-962d-2c66a2cabc4a","ts":"2025-05-05T22:21:27.730-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"26a3fbae-96f3-41a8-962d-2c66a2cabc4a","ts":"2025-05-05T22:21:27.730-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f4b2ba2d-ed8c-4786-b7ac-c48cbae9b231","ts":"2025-05-05T22:21:27.736-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"f4b2ba2d-ed8c-4786-b7ac-c48cbae9b231","ts":"2025-05-05T22:21:27.736-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"74bfdada-a275-4662-a491-2063959bd80a","ts":"2025-05-05T22:21:27.737-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"74bfdada-a275-4662-a491-2063959bd80a","ts":"2025-05-05T22:21:27.737-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ccc5f908-3e08-4d9b-978b-15dfef01bbba","ts":"2025-05-05T22:21:27.737-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"ccc5f908-3e08-4d9b-978b-15dfef01bbba","ts":"2025-05-05T22:21:27.737-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ef3d1835-2a65-4b57-95c1-4d3b4a29ea27","ts":"2025-05-05T22:21:27.737-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"ef3d1835-2a65-4b57-95c1-4d3b4a29ea27","ts":"2025-05-05T22:21:27.738-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"df441060-2cae-4897-854d-808f73d1419f","ts":"2025-05-05T22:21:27.741-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"df441060-2cae-4897-854d-808f73d1419f","ts":"2025-05-05T22:21:27.741-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"03e32674-83bb-4e7f-92b9-98794bed3426","ts":"2025-05-05T22:21:27.742-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"03e32674-83bb-4e7f-92b9-98794bed3426","ts":"2025-05-05T22:21:27.742-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"39db67fd-d6ae-405a-8b10-e67e2a30d2da","ts":"2025-05-05T22:21:27.743-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"39db67fd-d6ae-405a-8b10-e67e2a30d2da","ts":"2025-05-05T22:21:27.743-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"436c70f3-e3e0-4fdc-9159-db7bebd522ed","ts":"2025-05-05T22:21:27.743-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"436c70f3-e3e0-4fdc-9159-db7bebd522ed","ts":"2025-05-05T22:21:27.743-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e201dae2-6ff4-4eba-b1bd-eef3fb4cc505","ts":"2025-05-05T22:21:27.744-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"555","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"e201dae2-6ff4-4eba-b1bd-eef3fb4cc505","ts":"2025-05-05T22:21:27.744-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"144be32e-8777-47db-88b2-1abbc7d0ca90","ts":"2025-05-05T22:21:27.745-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"555","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"144be32e-8777-47db-88b2-1abbc7d0ca90","ts":"2025-05-05T22:21:27.745-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"1d4a072c-3ce8-4f68-b633-da21e89204dd","ts":"2025-05-05T22:23:34.960-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"556","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"1d4a072c-3ce8-4f68-b633-da21e89204dd","ts":"2025-05-05T22:23:34.962-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2c26a4c8-5ff8-413a-9a5f-b0d7b070e246","ts":"2025-05-05T22:23:34.965-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"556","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"2c26a4c8-5ff8-413a-9a5f-b0d7b070e246","ts":"2025-05-05T22:23:34.965-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"710a3faa-e7b9-4dc8-956a-9613ddd2715e","ts":"2025-05-05T22:23:34.969-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"556","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"710a3faa-e7b9-4dc8-956a-9613ddd2715e","ts":"2025-05-05T22:23:34.969-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"6c8720e4-6c25-48a9-b980-6a17a1be1d28","ts":"2025-05-05T22:23:34.971-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"556","userId":"50ecd661-bf68-4edd-9638-827720050128","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"6c8720e4-6c25-48a9-b980-6a17a1be1d28","ts":"2025-05-05T22:23:34.972-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"18d6109c-520b-48b1-a71f-e68f3bf42595","ts":"2025-05-05T22:24:04.045-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"557","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"18d6109c-520b-48b1-a71f-e68f3bf42595","ts":"2025-05-05T22:24:04.045-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"942d4ec5-c807-4d95-a50f-2b630fe2424d","ts":"2025-05-05T22:24:04.046-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"557","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"942d4ec5-c807-4d95-a50f-2b630fe2424d","ts":"2025-05-05T22:24:04.046-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"393b2bd5-6ec1-4f50-8e01-9597a324800f","ts":"2025-05-05T22:24:04.050-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"557","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"393b2bd5-6ec1-4f50-8e01-9597a324800f","ts":"2025-05-05T22:24:04.050-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"5306e69c-f5ea-4ff8-a34e-48421421aefe","ts":"2025-05-05T22:24:04.053-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"557","userId":"50ecd661-bf68-4edd-9638-827720050128","success":true,"isManual":true,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"5306e69c-f5ea-4ff8-a34e-48421421aefe","ts":"2025-05-05T22:24:04.053-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"97ce393f-bc42-40ea-b3bd-f02c5cd1e86e","ts":"2025-05-05T22:31:36.988-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"558","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"97ce393f-bc42-40ea-b3bd-f02c5cd1e86e","ts":"2025-05-05T22:31:36.989-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ff5da421-19f8-4ce2-bf58-a78b419be4d3","ts":"2025-05-05T22:31:36.990-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"ff5da421-19f8-4ce2-bf58-a78b419be4d3","ts":"2025-05-05T22:31:36.990-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3214fbb4-b5d8-466d-b790-f31fe23bb75a","ts":"2025-05-05T22:31:36.990-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"3214fbb4-b5d8-466d-b790-f31fe23bb75a","ts":"2025-05-05T22:31:36.990-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b99fa333-6f5b-4016-835d-efec43aa2a21","ts":"2025-05-05T22:31:36.991-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"b99fa333-6f5b-4016-835d-efec43aa2a21","ts":"2025-05-05T22:31:36.991-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a3a42105-fe58-4600-86dc-b9367972f49e","ts":"2025-05-05T22:31:36.995-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"a3a42105-fe58-4600-86dc-b9367972f49e","ts":"2025-05-05T22:31:36.996-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f19b8315-981b-4dcf-8e86-3433cc9b4129","ts":"2025-05-05T22:31:36.997-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"f19b8315-981b-4dcf-8e86-3433cc9b4129","ts":"2025-05-05T22:31:36.997-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ca85476c-85b1-4e4b-bd78-56a2eb8d6dbc","ts":"2025-05-05T22:31:37.041-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"ca85476c-85b1-4e4b-bd78-56a2eb8d6dbc","ts":"2025-05-05T22:31:37.041-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0d54d1db-2440-411f-9205-f1dcbebe2779","ts":"2025-05-05T22:31:38.418-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"0d54d1db-2440-411f-9205-f1dcbebe2779","ts":"2025-05-05T22:31:38.419-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"528ecbd1-c1bd-4abb-b9b0-7a59d417ad2e","ts":"2025-05-05T22:31:38.419-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"558","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: \"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"¡Ciao! ¿Cómo puedo ayudarte hoy en nuestra Pizzeria Italiana? Si deseas hacer un pedido o tienes alguna consulta sobre nuestro menú, no dudes en preguntar.\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":44,\"promptTokens\":634,\"totalTokens\":678}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"528ecbd1-c1bd-4abb-b9b0-7a59d417ad2e","ts":"2025-05-05T22:31:38.419-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b0fe33d1-ab08-4b56-8637-2322a0f62b87","ts":"2025-05-05T22:31:38.425-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"b0fe33d1-ab08-4b56-8637-2322a0f62b87","ts":"2025-05-05T22:31:38.425-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9c928ebb-5dec-4348-88cf-c8d5d04338c8","ts":"2025-05-05T22:31:38.425-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"9c928ebb-5dec-4348-88cf-c8d5d04338c8","ts":"2025-05-05T22:31:38.425-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b1230963-3318-495d-8c1e-0276156fb3f9","ts":"2025-05-05T22:31:38.433-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"b1230963-3318-495d-8c1e-0276156fb3f9","ts":"2025-05-05T22:31:38.433-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"394c400f-ea0f-43e8-b243-f67ebb391334","ts":"2025-05-05T22:31:38.434-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"394c400f-ea0f-43e8-b243-f67ebb391334","ts":"2025-05-05T22:31:38.434-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ba633ba4-673a-4ca2-8d3b-1d0f8650b79c","ts":"2025-05-05T22:31:38.434-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"ba633ba4-673a-4ca2-8d3b-1d0f8650b79c","ts":"2025-05-05T22:31:38.434-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"64ac4895-58c6-48b7-bbbd-77631cb11152","ts":"2025-05-05T22:31:38.434-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"64ac4895-58c6-48b7-bbbd-77631cb11152","ts":"2025-05-05T22:31:38.434-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"95f2eb4b-f6a5-48e2-ac67-0a607fcdfe15","ts":"2025-05-05T22:31:38.436-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"95f2eb4b-f6a5-48e2-ac67-0a607fcdfe15","ts":"2025-05-05T22:31:38.436-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"45ce3b67-d15a-4e76-93e5-45bf029f10f2","ts":"2025-05-05T22:31:38.436-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"45ce3b67-d15a-4e76-93e5-45bf029f10f2","ts":"2025-05-05T22:31:38.436-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8302a279-583b-4489-9a04-9513034bab43","ts":"2025-05-05T22:31:38.437-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"558","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"8302a279-583b-4489-9a04-9513034bab43","ts":"2025-05-05T22:31:38.437-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"46b22599-d9bb-4706-871a-b534c28274f8","ts":"2025-05-05T22:31:38.439-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"558","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"46b22599-d9bb-4706-871a-b534c28274f8","ts":"2025-05-05T22:31:38.439-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"20c37fd1-fd86-49c0-9532-bab5f8b54e1e","ts":"2025-05-05T22:32:03.484-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"559","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"20c37fd1-fd86-49c0-9532-bab5f8b54e1e","ts":"2025-05-05T22:32:03.484-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a5f6c168-0e20-43b2-b470-63632f90d968","ts":"2025-05-05T22:32:03.484-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"a5f6c168-0e20-43b2-b470-63632f90d968","ts":"2025-05-05T22:32:03.484-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"adce0bcd-b838-4496-b916-91e2af2f5268","ts":"2025-05-05T22:32:03.485-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"adce0bcd-b838-4496-b916-91e2af2f5268","ts":"2025-05-05T22:32:03.485-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f667820b-6c9a-4390-95de-0b44588222c4","ts":"2025-05-05T22:32:03.486-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"f667820b-6c9a-4390-95de-0b44588222c4","ts":"2025-05-05T22:32:03.486-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"da1d19ee-8934-44be-ae85-d6556a59fd70","ts":"2025-05-05T22:32:03.487-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"da1d19ee-8934-44be-ae85-d6556a59fd70","ts":"2025-05-05T22:32:03.489-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"abdc1d79-aa2f-4656-8469-4be2eee10f31","ts":"2025-05-05T22:32:03.489-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"abdc1d79-aa2f-4656-8469-4be2eee10f31","ts":"2025-05-05T22:32:03.489-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1e5f2de7-02d8-46d0-914c-085232eaabd6","ts":"2025-05-05T22:32:03.506-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"1e5f2de7-02d8-46d0-914c-085232eaabd6","ts":"2025-05-05T22:32:03.506-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4927546c-41c9-44f6-94b4-4a5784a532d8","ts":"2025-05-05T22:32:05.068-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"4927546c-41c9-44f6-94b4-4a5784a532d8","ts":"2025-05-05T22:32:05.069-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"06f46654-0167-4b23-82bd-1c34b698b6c7","ts":"2025-05-05T22:32:05.069-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"559","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491136437962@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: hola\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"¡Hola! Bienvenido a Pizzeria Italiana. Estamos aquí para ofrecerte las mejores pizzas de Buenos Aires. Si tienes alguna consulta o deseas realizar un pedido, no dudes en decírmelo. ¡Buon Appetito!\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":58,\"promptTokens\":643,\"totalTokens\":701}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"06f46654-0167-4b23-82bd-1c34b698b6c7","ts":"2025-05-05T22:32:05.069-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f2df889b-3211-4fbb-b203-e9aee9964f3c","ts":"2025-05-05T22:32:05.073-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"f2df889b-3211-4fbb-b203-e9aee9964f3c","ts":"2025-05-05T22:32:05.073-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ae97962b-b00f-4d1f-89c0-fb874416b815","ts":"2025-05-05T22:32:05.073-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"ae97962b-b00f-4d1f-89c0-fb874416b815","ts":"2025-05-05T22:32:05.073-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"75489720-d4df-466b-a65b-aab06ac28f85","ts":"2025-05-05T22:32:05.089-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"75489720-d4df-466b-a65b-aab06ac28f85","ts":"2025-05-05T22:32:05.089-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"596154ae-56a1-4a09-9bd9-780d6e89be91","ts":"2025-05-05T22:32:05.089-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"596154ae-56a1-4a09-9bd9-780d6e89be91","ts":"2025-05-05T22:32:05.089-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b8028d4a-4e8a-4287-b472-5d5a84140d65","ts":"2025-05-05T22:32:05.091-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"b8028d4a-4e8a-4287-b472-5d5a84140d65","ts":"2025-05-05T22:32:05.091-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b305957d-e349-4a3a-a165-b5103f6fb7a6","ts":"2025-05-05T22:32:05.091-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"b305957d-e349-4a3a-a165-b5103f6fb7a6","ts":"2025-05-05T22:32:05.091-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"eade95ba-c876-4ffe-b673-977f8e45fb11","ts":"2025-05-05T22:32:05.093-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"eade95ba-c876-4ffe-b673-977f8e45fb11","ts":"2025-05-05T22:32:05.093-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fc01a5ea-2228-4293-86e4-c49ab67a9efa","ts":"2025-05-05T22:32:05.093-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"fc01a5ea-2228-4293-86e4-c49ab67a9efa","ts":"2025-05-05T22:32:05.093-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f6e37c9b-d531-469f-96d3-cf86a35b4181","ts":"2025-05-05T22:32:05.094-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"559","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"f6e37c9b-d531-469f-96d3-cf86a35b4181","ts":"2025-05-05T22:32:05.094-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"11da830f-479f-448b-b156-988afacdbcf9","ts":"2025-05-05T22:32:05.096-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"559","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"11da830f-479f-448b-b156-988afacdbcf9","ts":"2025-05-05T22:32:05.096-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"2bdc86b8-8941-44f5-85b6-dbe781ee6c86","ts":"2025-05-05T22:32:18.687-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"560","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"2bdc86b8-8941-44f5-85b6-dbe781ee6c86","ts":"2025-05-05T22:32:18.687-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ea35fea0-b91c-4f19-8dbc-23a05f117326","ts":"2025-05-05T22:32:18.687-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"ea35fea0-b91c-4f19-8dbc-23a05f117326","ts":"2025-05-05T22:32:18.687-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8d42e94b-0138-4d80-bee2-08e03cc789e8","ts":"2025-05-05T22:32:18.688-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"8d42e94b-0138-4d80-bee2-08e03cc789e8","ts":"2025-05-05T22:32:18.688-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f9afd5b9-478d-415f-aeb0-b764f9888105","ts":"2025-05-05T22:32:18.688-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"f9afd5b9-478d-415f-aeb0-b764f9888105","ts":"2025-05-05T22:32:18.688-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"107644ee-e260-4266-9b23-06fd3209e8c8","ts":"2025-05-05T22:32:18.688-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"107644ee-e260-4266-9b23-06fd3209e8c8","ts":"2025-05-05T22:32:18.688-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e7ba8769-be6c-4a47-8e0e-bcf8fd3edb04","ts":"2025-05-05T22:32:18.688-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"e7ba8769-be6c-4a47-8e0e-bcf8fd3edb04","ts":"2025-05-05T22:32:18.688-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"40674cb0-99fe-4273-9668-c5e104b10315","ts":"2025-05-05T22:32:18.699-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"40674cb0-99fe-4273-9668-c5e104b10315","ts":"2025-05-05T22:32:18.699-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"0162249e-b637-4aea-a9c1-ca28d2f5649f","ts":"2025-05-05T22:32:19.747-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"561","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"0162249e-b637-4aea-a9c1-ca28d2f5649f","ts":"2025-05-05T22:32:19.747-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ecf06284-f04a-4f8b-9aa3-5bf666072c60","ts":"2025-05-05T22:32:19.747-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"ecf06284-f04a-4f8b-9aa3-5bf666072c60","ts":"2025-05-05T22:32:19.747-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7b5d6fee-0b76-4071-9dd6-e95406ff62d6","ts":"2025-05-05T22:32:19.747-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"7b5d6fee-0b76-4071-9dd6-e95406ff62d6","ts":"2025-05-05T22:32:19.748-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b8d14496-2cf7-4cfe-ac47-7d1228388f9b","ts":"2025-05-05T22:32:19.748-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"b8d14496-2cf7-4cfe-ac47-7d1228388f9b","ts":"2025-05-05T22:32:19.748-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1dbd0ea1-977b-431d-a3e2-994b67c26af7","ts":"2025-05-05T22:32:19.749-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"1dbd0ea1-977b-431d-a3e2-994b67c26af7","ts":"2025-05-05T22:32:19.749-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"460ba744-1061-4a03-a796-f2eb42e2a138","ts":"2025-05-05T22:32:19.750-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"460ba744-1061-4a03-a796-f2eb42e2a138","ts":"2025-05-05T22:32:19.750-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"27c75c54-487a-419c-855b-372866bec729","ts":"2025-05-05T22:32:19.757-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"27c75c54-487a-419c-855b-372866bec729","ts":"2025-05-05T22:32:19.757-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"2ea0bd6c-5d18-41d1-aec5-29e762872b4d","ts":"2025-05-05T22:32:20.721-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"562","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"2ea0bd6c-5d18-41d1-aec5-29e762872b4d","ts":"2025-05-05T22:32:20.721-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ebb9940c-3ab4-4e34-bfce-707a08bf1b38","ts":"2025-05-05T22:32:20.722-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"ebb9940c-3ab4-4e34-bfce-707a08bf1b38","ts":"2025-05-05T22:32:20.722-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"82ac0ca4-67e9-40d8-870e-374d8ce5c060","ts":"2025-05-05T22:32:20.722-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"82ac0ca4-67e9-40d8-870e-374d8ce5c060","ts":"2025-05-05T22:32:20.722-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9bae6533-2e29-4d6f-ba69-2820dac5c3c8","ts":"2025-05-05T22:32:20.722-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"9bae6533-2e29-4d6f-ba69-2820dac5c3c8","ts":"2025-05-05T22:32:20.722-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8794b0a6-0e48-4fe1-a0ae-4af257943e00","ts":"2025-05-05T22:32:20.723-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"8794b0a6-0e48-4fe1-a0ae-4af257943e00","ts":"2025-05-05T22:32:20.723-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"65df7fdb-ee0c-47eb-8342-fad3f35dc54c","ts":"2025-05-05T22:32:20.723-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"65df7fdb-ee0c-47eb-8342-fad3f35dc54c","ts":"2025-05-05T22:32:20.723-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7fa0871c-7c11-44dd-a7a5-dc80cb905dc1","ts":"2025-05-05T22:32:20.734-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"7fa0871c-7c11-44dd-a7a5-dc80cb905dc1","ts":"2025-05-05T22:32:20.735-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"53beefc9-e35c-4763-a43a-c0614644e376","ts":"2025-05-05T22:32:21.502-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"53beefc9-e35c-4763-a43a-c0614644e376","ts":"2025-05-05T22:32:21.502-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"9a92a658-27ac-46af-a56f-aec49d02c738","ts":"2025-05-05T22:32:21.502-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"561","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: bebe\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Hola, amigo! ¿Cómo puedo ayudarte hoy? Si tienes antojo de nuestras deliciosas pizzas, ¡estaré encantado de informarte sobre nuestro menú!\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":43,\"promptTokens\":643,\"totalTokens\":686}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"9a92a658-27ac-46af-a56f-aec49d02c738","ts":"2025-05-05T22:32:21.502-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6e6fdc6d-56e9-4884-9065-6f089b1900d0","ts":"2025-05-05T22:32:21.503-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"6e6fdc6d-56e9-4884-9065-6f089b1900d0","ts":"2025-05-05T22:32:21.503-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a2d7345d-7ef0-4110-8482-546b7ed5655a","ts":"2025-05-05T22:32:21.504-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"a2d7345d-7ef0-4110-8482-546b7ed5655a","ts":"2025-05-05T22:32:21.504-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"71431db0-d541-4ca3-b7d9-d20aed5446e3","ts":"2025-05-05T22:32:21.510-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"71431db0-d541-4ca3-b7d9-d20aed5446e3","ts":"2025-05-05T22:32:21.510-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fa7a055e-589b-44f7-b762-428593a914a4","ts":"2025-05-05T22:32:21.511-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"fa7a055e-589b-44f7-b762-428593a914a4","ts":"2025-05-05T22:32:21.511-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"19f052b2-0867-4c1f-86c8-b3e1013562d2","ts":"2025-05-05T22:32:21.512-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"19f052b2-0867-4c1f-86c8-b3e1013562d2","ts":"2025-05-05T22:32:21.512-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"68105363-9c1a-40bc-a0e0-ca0d6d62dbf1","ts":"2025-05-05T22:32:21.515-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"68105363-9c1a-40bc-a0e0-ca0d6d62dbf1","ts":"2025-05-05T22:32:21.515-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"43ab6bfb-a7ae-4be1-902a-3f8508e04086","ts":"2025-05-05T22:32:21.517-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"43ab6bfb-a7ae-4be1-902a-3f8508e04086","ts":"2025-05-05T22:32:21.517-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"27a91e4f-feac-4e41-8e12-cf92a80a3a23","ts":"2025-05-05T22:32:21.517-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"27a91e4f-feac-4e41-8e12-cf92a80a3a23","ts":"2025-05-05T22:32:21.517-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7da9ef35-a7ee-48f6-b808-c676857d693b","ts":"2025-05-05T22:32:21.518-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"561","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"7da9ef35-a7ee-48f6-b808-c676857d693b","ts":"2025-05-05T22:32:21.518-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"42383022-8191-49ef-9404-838df488d96b","ts":"2025-05-05T22:32:21.519-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"561","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"42383022-8191-49ef-9404-838df488d96b","ts":"2025-05-05T22:32:21.519-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8f621531-b778-442a-96e3-3cef7ed4b1e7","ts":"2025-05-05T22:32:21.749-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"8f621531-b778-442a-96e3-3cef7ed4b1e7","ts":"2025-05-05T22:32:21.750-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"e291b455-bb0c-41d8-b77c-9b4c3623cd2f","ts":"2025-05-05T22:32:21.750-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"560","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: hola\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"¡Ciao! Bienvenido a Pizzeria Italiana. Estamos ubicados en Moreno 381, Buenos Aires. ¿Cómo puedo ayudarte hoy?\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":39,\"promptTokens\":643,\"totalTokens\":682}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"e291b455-bb0c-41d8-b77c-9b4c3623cd2f","ts":"2025-05-05T22:32:21.750-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7b935d3e-ff64-4e04-a1d4-720127dd6f1d","ts":"2025-05-05T22:32:21.751-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"7b935d3e-ff64-4e04-a1d4-720127dd6f1d","ts":"2025-05-05T22:32:21.751-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ae0e7012-3638-41a2-928e-e45a5a84dd0d","ts":"2025-05-05T22:32:21.751-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"ae0e7012-3638-41a2-928e-e45a5a84dd0d","ts":"2025-05-05T22:32:21.751-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"42d3910a-c81f-407f-8756-d962cf5cfa1c","ts":"2025-05-05T22:32:21.757-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"42d3910a-c81f-407f-8756-d962cf5cfa1c","ts":"2025-05-05T22:32:21.757-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2bb28781-74c7-4399-ac31-2f6a505f6a7b","ts":"2025-05-05T22:32:21.757-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"2bb28781-74c7-4399-ac31-2f6a505f6a7b","ts":"2025-05-05T22:32:21.757-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f14f22ef-8faa-4649-969f-616de53618ad","ts":"2025-05-05T22:32:21.758-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"f14f22ef-8faa-4649-969f-616de53618ad","ts":"2025-05-05T22:32:21.758-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ff3b5d63-a5c2-4e6d-a140-42b49d08eeae","ts":"2025-05-05T22:32:21.759-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"ff3b5d63-a5c2-4e6d-a140-42b49d08eeae","ts":"2025-05-05T22:32:21.759-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"69c81edd-d82d-4702-af6a-b8535d4500f5","ts":"2025-05-05T22:32:21.760-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"69c81edd-d82d-4702-af6a-b8535d4500f5","ts":"2025-05-05T22:32:21.760-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e6132c96-bf45-4d43-ade2-cb197ba7c435","ts":"2025-05-05T22:32:21.760-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"e6132c96-bf45-4d43-ade2-cb197ba7c435","ts":"2025-05-05T22:32:21.760-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"adb65752-2bef-49d5-91ae-1652a2e75231","ts":"2025-05-05T22:32:21.761-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"560","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"adb65752-2bef-49d5-91ae-1652a2e75231","ts":"2025-05-05T22:32:21.761-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"84502a06-74b7-4552-ab93-da55ed0da493","ts":"2025-05-05T22:32:21.762-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"560","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"84502a06-74b7-4552-ab93-da55ed0da493","ts":"2025-05-05T22:32:21.762-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"492c4957-f803-4377-a73c-eaa6fd41a30d","ts":"2025-05-05T22:32:24.382-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"492c4957-f803-4377-a73c-eaa6fd41a30d","ts":"2025-05-05T22:32:24.383-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"8b64b01e-6f01-41cc-a736-ea0336e848a6","ts":"2025-05-05T22:32:24.383-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"562","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491136437962@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 2 de muzzarella, 3 de anchoas, 4 de jamon, 1 faina, 8 de 4 quesos y 1 napolitana\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"Pizza Muzzarella\\\", \\\"cantidad\\\": 2},\\n    {\\\"nombre\\\": \\\"Pizza de Anchoas\\\", \\\"cantidad\\\": 3},\\n    {\\\"nombre\\\": \\\"Pizza Jamon\\\", \\\"cantidad\\\": 4},\\n    {\\\"nombre\\\": \\\"Faina\\\", \\\"cantidad\\\": 1},\\n    {\\\"nombre\\\": \\\"Pizza 4 Quesos\\\", \\\"cantidad\\\": 8},\\n    {\\\"nombre\\\": \\\"Pizza Napolitana\\\", \\\"cantidad\\\": 1}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491136437962@c.us\\\"\\n}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":138,\"promptTokens\":680,\"totalTokens\":818}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"8b64b01e-6f01-41cc-a736-ea0336e848a6","ts":"2025-05-05T22:32:24.383-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"cdbc8c11-d328-4d9f-9432-bbe14fb6e6f1","ts":"2025-05-05T22:32:24.386-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"cdbc8c11-d328-4d9f-9432-bbe14fb6e6f1","ts":"2025-05-05T22:32:24.387-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f7e8ec67-a909-4339-a994-d6a8325fb356","ts":"2025-05-05T22:32:24.388-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"f7e8ec67-a909-4339-a994-d6a8325fb356","ts":"2025-05-05T22:32:24.389-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"339b5dad-2c2c-4036-8d1a-ce378b52e5bc","ts":"2025-05-05T22:32:24.398-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"339b5dad-2c2c-4036-8d1a-ce378b52e5bc","ts":"2025-05-05T22:32:24.398-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e0f28440-c887-4ee0-9fe5-6e4d38d20476","ts":"2025-05-05T22:32:24.399-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"e0f28440-c887-4ee0-9fe5-6e4d38d20476","ts":"2025-05-05T22:32:24.399-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"bb0d1fb5-0617-48c7-bfd4-3ea972e77438","ts":"2025-05-05T22:32:24.400-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"bb0d1fb5-0617-48c7-bfd4-3ea972e77438","ts":"2025-05-05T22:32:24.400-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"99ab0c1c-b0e2-4a10-9912-0bc78823d624","ts":"2025-05-05T22:32:24.400-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"99ab0c1c-b0e2-4a10-9912-0bc78823d624","ts":"2025-05-05T22:32:24.400-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4180e620-be2a-467b-bc55-8ab9b62764c6","ts":"2025-05-05T22:32:24.405-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"4180e620-be2a-467b-bc55-8ab9b62764c6","ts":"2025-05-05T22:32:24.406-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0108c693-89f5-4ad6-8fdd-07f0a74625ed","ts":"2025-05-05T22:32:24.406-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"0108c693-89f5-4ad6-8fdd-07f0a74625ed","ts":"2025-05-05T22:32:24.406-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"90b2bace-245a-488f-a41c-6a4ae5576431","ts":"2025-05-05T22:32:24.407-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"90b2bace-245a-488f-a41c-6a4ae5576431","ts":"2025-05-05T22:32:24.407-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e94f90f6-9d7f-4c6c-8b5b-6216998e7c9f","ts":"2025-05-05T22:32:24.407-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"e94f90f6-9d7f-4c6c-8b5b-6216998e7c9f","ts":"2025-05-05T22:32:24.407-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ee00d521-01db-4e33-b942-c0b98fc8b088","ts":"2025-05-05T22:32:24.408-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"562","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"ee00d521-01db-4e33-b942-c0b98fc8b088","ts":"2025-05-05T22:32:24.408-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"60c13840-3c3c-4434-a1f1-ea7fe0e84063","ts":"2025-05-05T22:32:24.409-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"562","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"60c13840-3c3c-4434-a1f1-ea7fe0e84063","ts":"2025-05-05T22:32:24.409-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"e5f86f3f-495b-4d0c-a1d8-f8e0c431a6e4","ts":"2025-05-05T22:33:33.106-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"563","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"e5f86f3f-495b-4d0c-a1d8-f8e0c431a6e4","ts":"2025-05-05T22:33:33.106-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b18f3873-6523-4bc9-ac4f-c3150781001f","ts":"2025-05-05T22:33:33.106-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"b18f3873-6523-4bc9-ac4f-c3150781001f","ts":"2025-05-05T22:33:33.106-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1df268e1-2231-4009-970e-f7c094d12349","ts":"2025-05-05T22:33:33.107-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"1df268e1-2231-4009-970e-f7c094d12349","ts":"2025-05-05T22:33:33.107-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"05be0d57-911b-453d-9893-1532c4c4bc13","ts":"2025-05-05T22:33:33.107-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"05be0d57-911b-453d-9893-1532c4c4bc13","ts":"2025-05-05T22:33:33.107-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e34487bd-33cb-458b-b6a1-576d3778ac17","ts":"2025-05-05T22:33:33.107-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"e34487bd-33cb-458b-b6a1-576d3778ac17","ts":"2025-05-05T22:33:33.107-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"13962671-2190-44a6-b97a-11ebcabb47cb","ts":"2025-05-05T22:33:33.108-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"13962671-2190-44a6-b97a-11ebcabb47cb","ts":"2025-05-05T22:33:33.108-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2723733f-3407-4249-91ae-04f577155813","ts":"2025-05-05T22:33:33.120-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"2723733f-3407-4249-91ae-04f577155813","ts":"2025-05-05T22:33:33.120-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"37371aaf-0809-4a3a-bbf0-7a15be03c634","ts":"2025-05-05T22:33:35.594-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"37371aaf-0809-4a3a-bbf0-7a15be03c634","ts":"2025-05-05T22:33:35.595-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"34f1bf14-afde-4e2c-9b84-7b33110c7541","ts":"2025-05-05T22:33:35.595-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"563","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: ¡Tu pedido ha sido registrado con éxito!\\nDetalle del pedido:\\n- Pizza Muzzarella (cantidad: 2)\\n- Pizza de Anchoas (cantidad: 3)\\n- Pizza Jamon (cantidad: 4)\\n- Faina (cantidad: 1)\\n- Pizza 4 Quesos (cantidad: 8)\\n- Pizza Napolitana (cantidad: 1)\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"Pizza Muzzarella\\\", \\\"cantidad\\\": 2},\\n    {\\\"nombre\\\": \\\"Pizza de Anchoas\\\", \\\"cantidad\\\": 3},\\n    {\\\"nombre\\\": \\\"Pizza Jamon\\\", \\\"cantidad\\\": 4},\\n    {\\\"nombre\\\": \\\"Faina\\\", \\\"cantidad\\\": 1},\\n    {\\\"nombre\\\": \\\"Pizza 4 Quesos\\\", \\\"cantidad\\\": 8},\\n    {\\\"nombre\\\": \\\"Pizza Napolitana\\\", \\\"cantidad\\\": 1}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":138,\"promptTokens\":721,\"totalTokens\":859}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"34f1bf14-afde-4e2c-9b84-7b33110c7541","ts":"2025-05-05T22:33:35.595-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"dd923da2-a44a-4d04-a0d4-1d2ff62b2607","ts":"2025-05-05T22:33:35.600-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"dd923da2-a44a-4d04-a0d4-1d2ff62b2607","ts":"2025-05-05T22:33:35.600-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"84f5af71-9782-434e-80c4-1c1928b5b97b","ts":"2025-05-05T22:33:35.601-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"84f5af71-9782-434e-80c4-1c1928b5b97b","ts":"2025-05-05T22:33:35.601-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5ff067fa-e32d-49e0-8d33-88d98a3cfccf","ts":"2025-05-05T22:33:35.614-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"5ff067fa-e32d-49e0-8d33-88d98a3cfccf","ts":"2025-05-05T22:33:35.614-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b933460e-b73b-47e7-895f-6336f8510b32","ts":"2025-05-05T22:33:35.614-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"b933460e-b73b-47e7-895f-6336f8510b32","ts":"2025-05-05T22:33:35.614-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"30a6af77-63b7-4917-b2ae-375164030a53","ts":"2025-05-05T22:33:35.616-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"30a6af77-63b7-4917-b2ae-375164030a53","ts":"2025-05-05T22:33:35.616-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"cf791efd-becf-4b23-a51d-cbc684f0e391","ts":"2025-05-05T22:33:35.616-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"cf791efd-becf-4b23-a51d-cbc684f0e391","ts":"2025-05-05T22:33:35.616-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"24d93750-8049-4dfb-b173-b6ea947f09aa","ts":"2025-05-05T22:33:35.620-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"24d93750-8049-4dfb-b173-b6ea947f09aa","ts":"2025-05-05T22:33:35.622-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5ed14d47-54b8-4642-b466-7955d3c9d87e","ts":"2025-05-05T22:33:35.622-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"5ed14d47-54b8-4642-b466-7955d3c9d87e","ts":"2025-05-05T22:33:35.622-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"be67d5b7-b45c-4dfb-b2a6-129f1e6eddd9","ts":"2025-05-05T22:33:35.623-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"be67d5b7-b45c-4dfb-b2a6-129f1e6eddd9","ts":"2025-05-05T22:33:35.624-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b686817f-52d3-46bd-865f-895fd3a0de9f","ts":"2025-05-05T22:33:35.624-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"b686817f-52d3-46bd-865f-895fd3a0de9f","ts":"2025-05-05T22:33:35.624-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"79db773e-7359-4e37-9cb2-cdd42b40726a","ts":"2025-05-05T22:33:35.625-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"563","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"79db773e-7359-4e37-9cb2-cdd42b40726a","ts":"2025-05-05T22:33:35.626-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"0e792479-466b-441e-8747-ed5007e4717c","ts":"2025-05-05T22:33:35.628-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"563","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"0e792479-466b-441e-8747-ed5007e4717c","ts":"2025-05-05T22:33:35.628-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"9297bb28-9608-4eb6-a0e6-27174f4be99d","ts":"2025-05-05T22:34:55.330-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"564","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"9297bb28-9608-4eb6-a0e6-27174f4be99d","ts":"2025-05-05T22:34:55.330-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d4cc7521-d081-4f63-a401-31ed7a0937cb","ts":"2025-05-05T22:34:55.330-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"d4cc7521-d081-4f63-a401-31ed7a0937cb","ts":"2025-05-05T22:34:55.330-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8339be38-8181-4cec-8e88-f068b0dc67b7","ts":"2025-05-05T22:34:55.331-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"8339be38-8181-4cec-8e88-f068b0dc67b7","ts":"2025-05-05T22:34:55.331-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"46c15d1e-6006-4611-8118-b1a2a56a7726","ts":"2025-05-05T22:34:55.331-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"46c15d1e-6006-4611-8118-b1a2a56a7726","ts":"2025-05-05T22:34:55.331-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"818b9a0b-b7f0-4c20-b33f-f056ee31e122","ts":"2025-05-05T22:34:55.332-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"818b9a0b-b7f0-4c20-b33f-f056ee31e122","ts":"2025-05-05T22:34:55.332-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"499f1eec-e72e-4a85-ac30-843cf5879153","ts":"2025-05-05T22:34:55.332-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"499f1eec-e72e-4a85-ac30-843cf5879153","ts":"2025-05-05T22:34:55.332-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"472530bd-022e-4d7e-8ece-a9029b26fd8c","ts":"2025-05-05T22:34:55.370-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"472530bd-022e-4d7e-8ece-a9029b26fd8c","ts":"2025-05-05T22:34:55.370-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ec988307-4c08-466e-9bb5-b49bd6156a7b","ts":"2025-05-05T22:34:58.628-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"ec988307-4c08-466e-9bb5-b49bd6156a7b","ts":"2025-05-05T22:34:58.628-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"444fb015-c794-488f-9cb9-43f5f0ee1553","ts":"2025-05-05T22:34:58.628-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"564","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quiero 2 de muzzarella, 3 de anchoas, 4 de jamon, 1 faina, 8 de 4 quesos y 1 napolitana\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"Pizza Muzzarella\\\", \\\"cantidad\\\": 2},\\n    {\\\"nombre\\\": \\\"Pizza de Anchoas\\\", \\\"cantidad\\\": 3},\\n    {\\\"nombre\\\": \\\"Pizza Jamon\\\", \\\"cantidad\\\": 4},\\n    {\\\"nombre\\\": \\\"Faina\\\", \\\"cantidad\\\": 1},\\n    {\\\"nombre\\\": \\\"Pizza 4 Quesos\\\", \\\"cantidad\\\": 8},\\n    {\\\"nombre\\\": \\\"Pizza Napolitana\\\", \\\"cantidad\\\": 1}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":138,\"promptTokens\":680,\"totalTokens\":818}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"444fb015-c794-488f-9cb9-43f5f0ee1553","ts":"2025-05-05T22:34:58.629-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"266c503a-7137-4ba5-a33d-d480c3033f69","ts":"2025-05-05T22:34:58.634-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"266c503a-7137-4ba5-a33d-d480c3033f69","ts":"2025-05-05T22:34:58.634-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d06513a4-d999-4d34-848a-ad3f29be7f5b","ts":"2025-05-05T22:34:58.634-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"d06513a4-d999-4d34-848a-ad3f29be7f5b","ts":"2025-05-05T22:34:58.634-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fa684684-2f9c-40c8-b966-43ead21de9c3","ts":"2025-05-05T22:34:58.648-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"fa684684-2f9c-40c8-b966-43ead21de9c3","ts":"2025-05-05T22:34:58.648-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"810db373-c898-4d95-bfe1-f236bc57bada","ts":"2025-05-05T22:34:58.649-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"810db373-c898-4d95-bfe1-f236bc57bada","ts":"2025-05-05T22:34:58.649-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b1d301d3-1851-4560-8a73-92afa103dcdc","ts":"2025-05-05T22:34:58.649-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"b1d301d3-1851-4560-8a73-92afa103dcdc","ts":"2025-05-05T22:34:58.650-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"393a449f-3a85-4da0-aa30-cc359f063f41","ts":"2025-05-05T22:34:58.650-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"393a449f-3a85-4da0-aa30-cc359f063f41","ts":"2025-05-05T22:34:58.650-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"daee127b-df31-4421-b756-2b344e15dd32","ts":"2025-05-05T22:34:58.658-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"daee127b-df31-4421-b756-2b344e15dd32","ts":"2025-05-05T22:34:58.658-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"adfa563a-aaaf-43ee-920c-c1d4fc59e8b0","ts":"2025-05-05T22:34:58.661-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"adfa563a-aaaf-43ee-920c-c1d4fc59e8b0","ts":"2025-05-05T22:34:58.661-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c606d236-d58d-484e-ae3f-0dbabf587cc6","ts":"2025-05-05T22:34:58.663-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"c606d236-d58d-484e-ae3f-0dbabf587cc6","ts":"2025-05-05T22:34:58.663-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f0039bf4-6980-47c8-9f8d-1685c567e0c9","ts":"2025-05-05T22:34:58.663-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"f0039bf4-6980-47c8-9f8d-1685c567e0c9","ts":"2025-05-05T22:34:58.663-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5a351074-38c7-477c-a8b5-664f71c37a40","ts":"2025-05-05T22:34:58.665-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"564","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"5a351074-38c7-477c-a8b5-664f71c37a40","ts":"2025-05-05T22:34:58.665-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"6118d7f4-729f-445a-9b8b-d8fc1aeeff9f","ts":"2025-05-05T22:34:58.666-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"564","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"6118d7f4-729f-445a-9b8b-d8fc1aeeff9f","ts":"2025-05-05T22:34:58.666-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"2fec2611-3a70-47ac-9251-db5c33b0aeec","ts":"2025-05-05T22:35:29.205-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"565","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"2fec2611-3a70-47ac-9251-db5c33b0aeec","ts":"2025-05-05T22:35:29.205-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"89eccf2a-b17b-4106-b2ce-ada626e8c8f0","ts":"2025-05-05T22:35:29.205-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"89eccf2a-b17b-4106-b2ce-ada626e8c8f0","ts":"2025-05-05T22:35:29.206-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f93993a0-bdf1-4187-a16b-ad970897057f","ts":"2025-05-05T22:35:29.206-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"f93993a0-bdf1-4187-a16b-ad970897057f","ts":"2025-05-05T22:35:29.206-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c9b71a6a-3b28-4c08-b679-4d8cc48c26e1","ts":"2025-05-05T22:35:29.206-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"c9b71a6a-3b28-4c08-b679-4d8cc48c26e1","ts":"2025-05-05T22:35:29.206-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0e90e689-2d66-460d-a1d4-e877f1cbb11a","ts":"2025-05-05T22:35:29.207-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"0e90e689-2d66-460d-a1d4-e877f1cbb11a","ts":"2025-05-05T22:35:29.207-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"dc2f34b8-3906-466e-a10c-7b5888093793","ts":"2025-05-05T22:35:29.207-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"dc2f34b8-3906-466e-a10c-7b5888093793","ts":"2025-05-05T22:35:29.207-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8926052c-22e6-498d-8cd2-83e96e342b84","ts":"2025-05-05T22:35:29.221-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"8926052c-22e6-498d-8cd2-83e96e342b84","ts":"2025-05-05T22:35:29.221-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"82bb1d36-1253-4aee-8589-a81a80cddd78","ts":"2025-05-05T22:35:32.193-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"82bb1d36-1253-4aee-8589-a81a80cddd78","ts":"2025-05-05T22:35:32.193-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"6c47888d-d0d1-45bc-8b44-5a2f0ca3b4db","ts":"2025-05-05T22:35:32.193-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"565","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: puto\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"¡Buongiorno! Estoy aquí para ayudarte con tus antojos de pizza. Si tienes alguna consulta o deseas hacer un pedido, no dudes en decírmelo. La Pizzeria Italiana está lista para servirte en Moreno 381, abierta todos los días de 09:00 a 18:00.\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":76,\"promptTokens\":644,\"totalTokens\":720}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"6c47888d-d0d1-45bc-8b44-5a2f0ca3b4db","ts":"2025-05-05T22:35:32.194-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"966e9f9b-4840-40aa-bf78-154f37c5ae0f","ts":"2025-05-05T22:35:32.197-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"966e9f9b-4840-40aa-bf78-154f37c5ae0f","ts":"2025-05-05T22:35:32.197-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"58581691-670f-461b-9329-2fab8f971a4a","ts":"2025-05-05T22:35:32.199-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"58581691-670f-461b-9329-2fab8f971a4a","ts":"2025-05-05T22:35:32.199-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"11446b26-b5fa-46df-bde6-c6b233b6fefa","ts":"2025-05-05T22:35:32.211-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"11446b26-b5fa-46df-bde6-c6b233b6fefa","ts":"2025-05-05T22:35:32.211-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fbeb9bce-d4fa-4e0d-9b9f-947b4494f48b","ts":"2025-05-05T22:35:32.212-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"fbeb9bce-d4fa-4e0d-9b9f-947b4494f48b","ts":"2025-05-05T22:35:32.212-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f8ea7104-dd18-4202-8f64-5d3af526f26c","ts":"2025-05-05T22:35:32.214-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"f8ea7104-dd18-4202-8f64-5d3af526f26c","ts":"2025-05-05T22:35:32.214-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"bc69671c-eaa1-4091-b541-e0e43d55996c","ts":"2025-05-05T22:35:32.215-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"bc69671c-eaa1-4091-b541-e0e43d55996c","ts":"2025-05-05T22:35:32.215-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"41fcef49-c3c7-4ffb-b970-81208e57698d","ts":"2025-05-05T22:35:32.217-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"41fcef49-c3c7-4ffb-b970-81208e57698d","ts":"2025-05-05T22:35:32.217-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"29f56491-907a-419b-a6ef-3bbae8e0f85a","ts":"2025-05-05T22:35:32.217-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"29f56491-907a-419b-a6ef-3bbae8e0f85a","ts":"2025-05-05T22:35:32.217-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"848b3769-537c-4848-af3d-872f816fbcbe","ts":"2025-05-05T22:35:32.218-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"565","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"848b3769-537c-4848-af3d-872f816fbcbe","ts":"2025-05-05T22:35:32.218-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"d9dd2a30-05ad-4431-afe5-4e738a07d4a9","ts":"2025-05-05T22:35:32.219-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"565","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"d9dd2a30-05ad-4431-afe5-4e738a07d4a9","ts":"2025-05-05T22:35:32.219-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"c9dde0a6-c16d-44c1-8175-c23b10525eb5","ts":"2025-05-05T22:36:01.792-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"566","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"c9dde0a6-c16d-44c1-8175-c23b10525eb5","ts":"2025-05-05T22:36:01.792-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3cdfabff-c69e-43b7-b148-b46705276430","ts":"2025-05-05T22:36:01.792-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"3cdfabff-c69e-43b7-b148-b46705276430","ts":"2025-05-05T22:36:01.793-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ea6481b8-62fa-46b5-b788-d33a2d429f3b","ts":"2025-05-05T22:36:01.793-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"ea6481b8-62fa-46b5-b788-d33a2d429f3b","ts":"2025-05-05T22:36:01.793-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ebf709e0-a1b2-4f19-b4a2-5bece42b5d87","ts":"2025-05-05T22:36:01.793-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"ebf709e0-a1b2-4f19-b4a2-5bece42b5d87","ts":"2025-05-05T22:36:01.793-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a0056236-b0df-43b5-bf6e-77a1755a3273","ts":"2025-05-05T22:36:01.794-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"a0056236-b0df-43b5-bf6e-77a1755a3273","ts":"2025-05-05T22:36:01.794-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d77d85d5-d93a-48eb-993d-498c224bd728","ts":"2025-05-05T22:36:01.794-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"d77d85d5-d93a-48eb-993d-498c224bd728","ts":"2025-05-05T22:36:01.794-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ac20c385-91dc-4c45-9999-c81c21bc067e","ts":"2025-05-05T22:36:01.805-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"ac20c385-91dc-4c45-9999-c81c21bc067e","ts":"2025-05-05T22:36:01.805-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"48618ab5-39e2-4eee-a4f3-3f1248058f20","ts":"2025-05-05T22:36:05.292-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"48618ab5-39e2-4eee-a4f3-3f1248058f20","ts":"2025-05-05T22:36:05.292-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"17e37f43-0de2-405c-a178-d3bfce950c77","ts":"2025-05-05T22:36:05.292-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"566","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quería pedirte 4 pizzas napolitana y 1 de amicha a\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Lamento informarte que no tenemos una pizza llamada \\\\\\\"amicha\\\\\\\" en nuestro menú. Sin embargo, puedo ofrecerte nuestras deliciosas pizzas Napolitana y otros sabores. Aquí están los detalles:\\\\n\\\\n**Pizza Napolitana**:  - $10000\\\\n\\\\n**Pizza 4 Quesos**:  - $14000\\\\n\\\\n**Pizza Muzzarella**:  - $10000\\\\n\\\\n**Pizza Mediterranea**:  - $14000\\\\n\\\\n**Pizza Jamon**:  - $13000\\\\n\\\\n**Pizza Jamon y Morrón**:  - $15000\\\\n\\\\n**Pizza de Anchoas**:  - $12000\\\\n\\\\n¿Te gustaría realizar el pedido de las 4 pizzas Napolitana u otra opción? Estoy aquí para ayudarte!\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":176,\"promptTokens\":658,\"totalTokens\":834}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"17e37f43-0de2-405c-a178-d3bfce950c77","ts":"2025-05-05T22:36:05.293-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c0e637d4-534d-4ca1-bbda-55e443263ac2","ts":"2025-05-05T22:36:05.294-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"c0e637d4-534d-4ca1-bbda-55e443263ac2","ts":"2025-05-05T22:36:05.295-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c2eb7ce7-06ed-47b8-8f01-61154b5056af","ts":"2025-05-05T22:36:05.295-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"c2eb7ce7-06ed-47b8-8f01-61154b5056af","ts":"2025-05-05T22:36:05.295-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1501f9b3-b4c9-4720-a8ee-ccc8621bce41","ts":"2025-05-05T22:36:05.306-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"1501f9b3-b4c9-4720-a8ee-ccc8621bce41","ts":"2025-05-05T22:36:05.307-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"cab6a8e7-588d-4ac1-8b89-d4f9f2e3918e","ts":"2025-05-05T22:36:05.307-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"cab6a8e7-588d-4ac1-8b89-d4f9f2e3918e","ts":"2025-05-05T22:36:05.307-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7cabf9b9-6fcb-4e28-9033-f2a7baf3afb8","ts":"2025-05-05T22:36:05.308-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"7cabf9b9-6fcb-4e28-9033-f2a7baf3afb8","ts":"2025-05-05T22:36:05.308-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b2eebbe2-e569-4d69-ae61-9eab8b1512a8","ts":"2025-05-05T22:36:05.308-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"b2eebbe2-e569-4d69-ae61-9eab8b1512a8","ts":"2025-05-05T22:36:05.308-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5cedf034-22dc-4a7d-84d5-7e46abe3f29e","ts":"2025-05-05T22:36:05.310-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"5cedf034-22dc-4a7d-84d5-7e46abe3f29e","ts":"2025-05-05T22:36:05.310-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"adada466-9fdb-4042-9cc5-559b02646f9f","ts":"2025-05-05T22:36:05.311-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"adada466-9fdb-4042-9cc5-559b02646f9f","ts":"2025-05-05T22:36:05.311-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a56d4bab-1666-483b-9e7e-941a72c36594","ts":"2025-05-05T22:36:05.311-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"566","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"a56d4bab-1666-483b-9e7e-941a72c36594","ts":"2025-05-05T22:36:05.311-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"88e8d66b-7ae7-48cd-aec4-58562454f523","ts":"2025-05-05T22:36:05.312-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"566","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"88e8d66b-7ae7-48cd-aec4-58562454f523","ts":"2025-05-05T22:36:05.313-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"1821c637-bc0e-48c3-854d-dbd499c28d9a","ts":"2025-05-05T22:36:18.830-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"567","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"1821c637-bc0e-48c3-854d-dbd499c28d9a","ts":"2025-05-05T22:36:18.831-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9cf252c8-a140-4fed-b04e-b226ddde77ae","ts":"2025-05-05T22:36:18.831-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"9cf252c8-a140-4fed-b04e-b226ddde77ae","ts":"2025-05-05T22:36:18.831-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9164515f-8a9b-4c83-9aef-bad6f977cea4","ts":"2025-05-05T22:36:18.831-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"9164515f-8a9b-4c83-9aef-bad6f977cea4","ts":"2025-05-05T22:36:18.831-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0c7fed38-030d-4e8e-bbbd-d0eebbc74a3a","ts":"2025-05-05T22:36:18.831-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"0c7fed38-030d-4e8e-bbbd-d0eebbc74a3a","ts":"2025-05-05T22:36:18.831-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"dfa92292-e5f8-48c6-b92e-aa912dbb01a5","ts":"2025-05-05T22:36:18.832-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"dfa92292-e5f8-48c6-b92e-aa912dbb01a5","ts":"2025-05-05T22:36:18.832-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c62c82bf-4464-4e89-ba52-c15a14fecb3c","ts":"2025-05-05T22:36:18.832-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"c62c82bf-4464-4e89-ba52-c15a14fecb3c","ts":"2025-05-05T22:36:18.832-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e59d3caf-3afe-43dc-851c-e83e1154024c","ts":"2025-05-05T22:36:18.839-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"e59d3caf-3afe-43dc-851c-e83e1154024c","ts":"2025-05-05T22:36:18.839-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"54a37a85-ff46-4295-9a4d-ba91eab4368b","ts":"2025-05-05T22:36:20.702-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"54a37a85-ff46-4295-9a4d-ba91eab4368b","ts":"2025-05-05T22:36:20.702-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"a5a2f7bc-ffa2-4e36-8818-c5e555d2790e","ts":"2025-05-05T22:36:20.702-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"567","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: quería pedirte 4 pizzas napolitana y 1 de anchoas\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":1,\\\"productos\\\":[{\\\"nombre\\\":\\\"Pizza Napolitana\\\",\\\"cantidad\\\":4},{\\\"nombre\\\":\\\"Pizza de Anchoas\\\",\\\"cantidad\\\":1}],\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491122503045@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":52,\"promptTokens\":657,\"totalTokens\":709}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"a5a2f7bc-ffa2-4e36-8818-c5e555d2790e","ts":"2025-05-05T22:36:20.702-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"aaef3634-2933-4984-aec4-b1718f604129","ts":"2025-05-05T22:36:20.704-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"aaef3634-2933-4984-aec4-b1718f604129","ts":"2025-05-05T22:36:20.704-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2f0f0351-780c-4fa4-97f4-968ce7b30e11","ts":"2025-05-05T22:36:20.704-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"2f0f0351-780c-4fa4-97f4-968ce7b30e11","ts":"2025-05-05T22:36:20.705-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c6795098-cdae-4ce0-9094-f05902bc9324","ts":"2025-05-05T22:36:20.711-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"c6795098-cdae-4ce0-9094-f05902bc9324","ts":"2025-05-05T22:36:20.712-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a917e1ad-e040-4efb-88b8-47c2f76fb87b","ts":"2025-05-05T22:36:20.712-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"a917e1ad-e040-4efb-88b8-47c2f76fb87b","ts":"2025-05-05T22:36:20.712-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8f10b4c3-a24a-45b1-b2ee-5b95756f0b85","ts":"2025-05-05T22:36:20.712-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"8f10b4c3-a24a-45b1-b2ee-5b95756f0b85","ts":"2025-05-05T22:36:20.713-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b597fd81-7233-4f7d-a4c9-145f4cb3845a","ts":"2025-05-05T22:36:20.713-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"b597fd81-7233-4f7d-a4c9-145f4cb3845a","ts":"2025-05-05T22:36:20.713-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0eb8066b-77bb-4f61-896d-e978c9ad4890","ts":"2025-05-05T22:36:20.718-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"0eb8066b-77bb-4f61-896d-e978c9ad4890","ts":"2025-05-05T22:36:20.718-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"aa48201b-b3d5-4339-b4da-47adee1f5b90","ts":"2025-05-05T22:36:20.720-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"aa48201b-b3d5-4339-b4da-47adee1f5b90","ts":"2025-05-05T22:36:20.720-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7eb4a49f-5972-4cd7-b147-e418e7818aa0","ts":"2025-05-05T22:36:20.720-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"7eb4a49f-5972-4cd7-b147-e418e7818aa0","ts":"2025-05-05T22:36:20.720-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"841eaae2-9204-4831-bc6e-eb1f78ca805a","ts":"2025-05-05T22:36:20.721-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"841eaae2-9204-4831-bc6e-eb1f78ca805a","ts":"2025-05-05T22:36:20.721-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c8fad380-cd46-4bae-8f09-661adf44ab75","ts":"2025-05-05T22:36:20.721-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"567","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"c8fad380-cd46-4bae-8f09-661adf44ab75","ts":"2025-05-05T22:36:20.721-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"836a4d87-064c-4715-a52d-fc7ba756ee62","ts":"2025-05-05T22:36:20.722-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"567","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"836a4d87-064c-4715-a52d-fc7ba756ee62","ts":"2025-05-05T22:36:20.722-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"25956eea-9aed-4957-8063-e38aa61254d2","ts":"2025-05-05T22:36:27.345-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"568","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"25956eea-9aed-4957-8063-e38aa61254d2","ts":"2025-05-05T22:36:27.345-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"013496d1-ef8e-4344-aec5-0f6f3e9cefb5","ts":"2025-05-05T22:36:27.345-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"013496d1-ef8e-4344-aec5-0f6f3e9cefb5","ts":"2025-05-05T22:36:27.345-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5830a822-6e9c-4e12-bc77-cfb21a8f2417","ts":"2025-05-05T22:36:27.345-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"5830a822-6e9c-4e12-bc77-cfb21a8f2417","ts":"2025-05-05T22:36:27.345-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d6629b9a-72c7-4ca7-a3b9-5b7d0c14b426","ts":"2025-05-05T22:36:27.345-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"d6629b9a-72c7-4ca7-a3b9-5b7d0c14b426","ts":"2025-05-05T22:36:27.345-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1c2673bb-f76c-461b-988a-669e84fc1300","ts":"2025-05-05T22:36:27.346-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"1c2673bb-f76c-461b-988a-669e84fc1300","ts":"2025-05-05T22:36:27.346-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5748ee44-647f-4699-9097-f0d6eb12cb63","ts":"2025-05-05T22:36:27.346-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"5748ee44-647f-4699-9097-f0d6eb12cb63","ts":"2025-05-05T22:36:27.346-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8a2db800-2c4c-42e7-865b-4d4fbb27e9ec","ts":"2025-05-05T22:36:27.353-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"8a2db800-2c4c-42e7-865b-4d4fbb27e9ec","ts":"2025-05-05T22:36:27.353-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"7f0e2acb-a7e6-4b96-82a2-eed4a4b95f20","ts":"2025-05-05T22:36:28.748-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"569","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"7f0e2acb-a7e6-4b96-82a2-eed4a4b95f20","ts":"2025-05-05T22:36:28.748-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7af5c920-7a12-4198-91ee-96a0dc8901fb","ts":"2025-05-05T22:36:28.749-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"7af5c920-7a12-4198-91ee-96a0dc8901fb","ts":"2025-05-05T22:36:28.749-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"59ba4f8e-4f10-41ad-b78c-5ceda85a5291","ts":"2025-05-05T22:36:28.749-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"59ba4f8e-4f10-41ad-b78c-5ceda85a5291","ts":"2025-05-05T22:36:28.749-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"88394978-70aa-4d2f-bfc0-3c7e9b2b75cc","ts":"2025-05-05T22:36:28.749-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"88394978-70aa-4d2f-bfc0-3c7e9b2b75cc","ts":"2025-05-05T22:36:28.749-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6cb5d167-9415-444e-9626-cc29fe95c1ce","ts":"2025-05-05T22:36:28.750-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"6cb5d167-9415-444e-9626-cc29fe95c1ce","ts":"2025-05-05T22:36:28.750-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b2f4b4a3-e2d7-4082-9734-97c84ea74c10","ts":"2025-05-05T22:36:28.751-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"b2f4b4a3-e2d7-4082-9734-97c84ea74c10","ts":"2025-05-05T22:36:28.751-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"321a4b53-e7ae-4f98-b0c4-015251c78d89","ts":"2025-05-05T22:36:28.759-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"321a4b53-e7ae-4f98-b0c4-015251c78d89","ts":"2025-05-05T22:36:28.759-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d71ec199-a123-4a1f-9e27-944ac5736296","ts":"2025-05-05T22:36:29.400-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"d71ec199-a123-4a1f-9e27-944ac5736296","ts":"2025-05-05T22:36:29.400-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"bb28a643-9f2c-4e3a-b4e0-d4f88dbb2d8c","ts":"2025-05-05T22:36:29.400-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"568","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: SHEEE\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"¡Ciao! ¿Cómo puedo ayudarte hoy? Si tienes alguna pregunta o deseas hacer un pedido, estoy aquí para ayudarte.\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":35,\"promptTokens\":644,\"totalTokens\":679}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"bb28a643-9f2c-4e3a-b4e0-d4f88dbb2d8c","ts":"2025-05-05T22:36:29.400-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"63e27863-7b1c-465b-a34e-bc57d6f0e08c","ts":"2025-05-05T22:36:29.402-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"63e27863-7b1c-465b-a34e-bc57d6f0e08c","ts":"2025-05-05T22:36:29.402-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"67c8b908-9301-4f54-ab01-c132dd4882dc","ts":"2025-05-05T22:36:29.403-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"67c8b908-9301-4f54-ab01-c132dd4882dc","ts":"2025-05-05T22:36:29.403-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"78e0baf8-fa44-414e-a479-95d6ffa100d9","ts":"2025-05-05T22:36:29.410-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"78e0baf8-fa44-414e-a479-95d6ffa100d9","ts":"2025-05-05T22:36:29.410-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"bd99b1ca-6f67-42d2-98c0-cbac0e4e6072","ts":"2025-05-05T22:36:29.410-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"bd99b1ca-6f67-42d2-98c0-cbac0e4e6072","ts":"2025-05-05T22:36:29.410-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"23af929a-ad5f-45ae-82d6-979b5208af95","ts":"2025-05-05T22:36:29.411-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"23af929a-ad5f-45ae-82d6-979b5208af95","ts":"2025-05-05T22:36:29.411-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d65f349c-2939-4f7f-b8e1-620c67df270d","ts":"2025-05-05T22:36:29.411-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"d65f349c-2939-4f7f-b8e1-620c67df270d","ts":"2025-05-05T22:36:29.411-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"38d0cd6a-f1b2-4f25-8a5b-c6e7ba5c73b6","ts":"2025-05-05T22:36:29.413-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"38d0cd6a-f1b2-4f25-8a5b-c6e7ba5c73b6","ts":"2025-05-05T22:36:29.413-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4b98bce6-4dbc-4c85-b8cd-b4d0ce974416","ts":"2025-05-05T22:36:29.413-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"4b98bce6-4dbc-4c85-b8cd-b4d0ce974416","ts":"2025-05-05T22:36:29.413-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"835a21a9-848d-4d7a-b6ce-27f4d4547f4a","ts":"2025-05-05T22:36:29.415-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"568","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"835a21a9-848d-4d7a-b6ce-27f4d4547f4a","ts":"2025-05-05T22:36:29.415-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"56db37aa-c1db-42ac-95ea-207b22d38e8a","ts":"2025-05-05T22:36:29.416-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"568","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"56db37aa-c1db-42ac-95ea-207b22d38e8a","ts":"2025-05-05T22:36:29.416-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"20a5ac8b-7c88-4305-bf52-9a65279563f1","ts":"2025-05-05T22:36:30.450-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"20a5ac8b-7c88-4305-bf52-9a65279563f1","ts":"2025-05-05T22:36:30.451-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"b457d67a-b3fb-49af-96e0-7726c5078bc2","ts":"2025-05-05T22:36:30.451-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"569","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: RE BIE\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"¡Ciao! ¿Cómo puedo ayudarte hoy en la Pizzeria Italiana? Si necesitas información sobre nuestras delicias o un pedido, estoy aquí para ayudarte.\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":42,\"promptTokens\":645,\"totalTokens\":687}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"b457d67a-b3fb-49af-96e0-7726c5078bc2","ts":"2025-05-05T22:36:30.451-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"65254bb4-6243-48a5-bb67-baf6f59c415c","ts":"2025-05-05T22:36:30.452-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"65254bb4-6243-48a5-bb67-baf6f59c415c","ts":"2025-05-05T22:36:30.452-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"305c758a-2534-424a-8b4a-e24548a341b2","ts":"2025-05-05T22:36:30.452-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"305c758a-2534-424a-8b4a-e24548a341b2","ts":"2025-05-05T22:36:30.452-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7a686f18-e2bc-4be2-bb14-52cdcdb2e872","ts":"2025-05-05T22:36:30.458-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"7a686f18-e2bc-4be2-bb14-52cdcdb2e872","ts":"2025-05-05T22:36:30.458-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ca841597-08be-4a10-b90c-cfc386bf671c","ts":"2025-05-05T22:36:30.458-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"ca841597-08be-4a10-b90c-cfc386bf671c","ts":"2025-05-05T22:36:30.458-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7f3e8be7-6d0e-42cd-83c8-7517cb7e71c6","ts":"2025-05-05T22:36:30.459-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"7f3e8be7-6d0e-42cd-83c8-7517cb7e71c6","ts":"2025-05-05T22:36:30.459-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ec72585f-e493-4ddf-b909-fcb8e3e14a62","ts":"2025-05-05T22:36:30.459-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"ec72585f-e493-4ddf-b909-fcb8e3e14a62","ts":"2025-05-05T22:36:30.459-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b5a299e3-a78d-423c-a8f4-141f23923e05","ts":"2025-05-05T22:36:30.460-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"b5a299e3-a78d-423c-a8f4-141f23923e05","ts":"2025-05-05T22:36:30.460-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c2887892-c780-4b8b-b98f-e2c95ba013c4","ts":"2025-05-05T22:36:30.460-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"c2887892-c780-4b8b-b98f-e2c95ba013c4","ts":"2025-05-05T22:36:30.460-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"4b796583-0fcf-4596-82c0-269252a312a0","ts":"2025-05-05T22:36:30.463-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"569","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"4b796583-0fcf-4596-82c0-269252a312a0","ts":"2025-05-05T22:36:30.463-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"20f8970a-3e50-4ecb-992f-8aa5bf9c1394","ts":"2025-05-05T22:36:30.465-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"569","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"20f8970a-3e50-4ecb-992f-8aa5bf9c1394","ts":"2025-05-05T22:36:30.465-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"a503df2c-8f6a-4164-9ae8-8f728260f620","ts":"2025-05-05T22:36:47.534-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"570","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"a503df2c-8f6a-4164-9ae8-8f728260f620","ts":"2025-05-05T22:36:47.534-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f3afb2b2-b180-4e56-acec-b925a5c8e07f","ts":"2025-05-05T22:36:47.534-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"f3afb2b2-b180-4e56-acec-b925a5c8e07f","ts":"2025-05-05T22:36:47.534-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7e55b386-6c75-4a29-958c-4345032f9cce","ts":"2025-05-05T22:36:47.534-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"7e55b386-6c75-4a29-958c-4345032f9cce","ts":"2025-05-05T22:36:47.534-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2cb4e08b-f447-4475-823b-bd1423a92f91","ts":"2025-05-05T22:36:47.534-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"2cb4e08b-f447-4475-823b-bd1423a92f91","ts":"2025-05-05T22:36:47.534-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6190bcc2-f745-4426-8bb8-2532e991bf58","ts":"2025-05-05T22:36:47.535-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"6190bcc2-f745-4426-8bb8-2532e991bf58","ts":"2025-05-05T22:36:47.535-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e86d9f21-08f2-4eda-b351-b53675590a7a","ts":"2025-05-05T22:36:47.535-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"e86d9f21-08f2-4eda-b351-b53675590a7a","ts":"2025-05-05T22:36:47.535-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"634cfa5c-5cc9-4193-a287-c0160ce517a4","ts":"2025-05-05T22:36:47.543-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"634cfa5c-5cc9-4193-a287-c0160ce517a4","ts":"2025-05-05T22:36:47.544-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0e8a70e0-860e-43f3-8473-4ab6aca72ee8","ts":"2025-05-05T22:36:49.016-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"0e8a70e0-860e-43f3-8473-4ab6aca72ee8","ts":"2025-05-05T22:36:49.017-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"c68bba13-a4bf-497a-abdc-e034e772affd","ts":"2025-05-05T22:36:49.017-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"570","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: que direccion es?\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Nuestra dirección es Moreno 381, Buenos Aires. ¡Te esperamos con los brazos abiertos para disfrutar de unas deliciosas pizzas!\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":35,\"promptTokens\":646,\"totalTokens\":681}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"c68bba13-a4bf-497a-abdc-e034e772affd","ts":"2025-05-05T22:36:49.017-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"bff1eb98-fa92-450c-ad55-ced78e8d0511","ts":"2025-05-05T22:36:49.023-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"bff1eb98-fa92-450c-ad55-ced78e8d0511","ts":"2025-05-05T22:36:49.023-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e62e00f9-9a60-438a-a051-6bfa299a7de8","ts":"2025-05-05T22:36:49.024-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"e62e00f9-9a60-438a-a051-6bfa299a7de8","ts":"2025-05-05T22:36:49.025-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6f4f3df3-5c55-491a-abfe-77366a66856e","ts":"2025-05-05T22:36:49.035-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"6f4f3df3-5c55-491a-abfe-77366a66856e","ts":"2025-05-05T22:36:49.035-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0bd4e813-34d0-4d89-bc2b-1d874e7afbb7","ts":"2025-05-05T22:36:49.036-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"0bd4e813-34d0-4d89-bc2b-1d874e7afbb7","ts":"2025-05-05T22:36:49.036-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b6231420-fe39-4e4d-b180-f0e6b5428b11","ts":"2025-05-05T22:36:49.037-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"b6231420-fe39-4e4d-b180-f0e6b5428b11","ts":"2025-05-05T22:36:49.037-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a717eaed-1ac3-402c-8aeb-e9defc0a13cd","ts":"2025-05-05T22:36:49.037-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"a717eaed-1ac3-402c-8aeb-e9defc0a13cd","ts":"2025-05-05T22:36:49.037-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ada49a8b-ab49-430e-a292-850c57968092","ts":"2025-05-05T22:36:49.039-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"ada49a8b-ab49-430e-a292-850c57968092","ts":"2025-05-05T22:36:49.039-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e2f3a728-fb1a-4b26-847e-5c2d1bfc6131","ts":"2025-05-05T22:36:49.039-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"e2f3a728-fb1a-4b26-847e-5c2d1bfc6131","ts":"2025-05-05T22:36:49.039-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3bdbb8f4-0855-4981-9c25-586007491a48","ts":"2025-05-05T22:36:49.040-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"570","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"3bdbb8f4-0855-4981-9c25-586007491a48","ts":"2025-05-05T22:36:49.040-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"dd9d21fa-152c-47da-96e5-44e753fb5fe9","ts":"2025-05-05T22:36:49.041-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"570","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"dd9d21fa-152c-47da-96e5-44e753fb5fe9","ts":"2025-05-05T22:36:49.041-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"e00f0484-1c54-45fc-a3bb-3ed6ff57f347","ts":"2025-05-05T22:37:04.025-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"571","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"e00f0484-1c54-45fc-a3bb-3ed6ff57f347","ts":"2025-05-05T22:37:04.025-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9cf9b061-b05e-4086-9960-e9306629883d","ts":"2025-05-05T22:37:04.026-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"9cf9b061-b05e-4086-9960-e9306629883d","ts":"2025-05-05T22:37:04.026-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1e537d7a-6ce4-49d2-ad52-c178c2fdecdf","ts":"2025-05-05T22:37:04.027-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"1e537d7a-6ce4-49d2-ad52-c178c2fdecdf","ts":"2025-05-05T22:37:04.027-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"5f3f1463-f5e6-4657-a71b-12cb3cf41a40","ts":"2025-05-05T22:37:04.028-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"5f3f1463-f5e6-4657-a71b-12cb3cf41a40","ts":"2025-05-05T22:37:04.028-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3a1d7f29-51b4-4f4a-8671-7e64eafa1889","ts":"2025-05-05T22:37:04.031-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"3a1d7f29-51b4-4f4a-8671-7e64eafa1889","ts":"2025-05-05T22:37:04.031-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8a72551b-5abb-48dc-ac59-a75bb0fced30","ts":"2025-05-05T22:37:04.032-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"8a72551b-5abb-48dc-ac59-a75bb0fced30","ts":"2025-05-05T22:37:04.032-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"79d21ea1-cd15-4c5d-aeef-b5d31dbe6eab","ts":"2025-05-05T22:37:04.053-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"79d21ea1-cd15-4c5d-aeef-b5d31dbe6eab","ts":"2025-05-05T22:37:04.053-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2a7da7f0-51eb-45bd-adc5-d2e9c496ba4a","ts":"2025-05-05T22:37:05.312-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"2a7da7f0-51eb-45bd-adc5-d2e9c496ba4a","ts":"2025-05-05T22:37:05.312-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"e0a62bda-1d1f-44eb-8a44-774760fe5a86","ts":"2025-05-05T22:37:05.312-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"571","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: te puedo pedir 67 pizzas de muzza?\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":1,\\\"productos\\\":[{\\\"nombre\\\":\\\"Pizza Muzzarella\\\",\\\"cantidad\\\":67}],\\\"negocioId\\\":1,\\\"numeroCliente\\\":\\\"5491122503045@c.us\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":40,\"promptTokens\":652,\"totalTokens\":692}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"e0a62bda-1d1f-44eb-8a44-774760fe5a86","ts":"2025-05-05T22:37:05.312-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"06b9c145-d947-4be8-83db-8f73c452e11a","ts":"2025-05-05T22:37:05.315-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"06b9c145-d947-4be8-83db-8f73c452e11a","ts":"2025-05-05T22:37:05.316-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8ee5b3a0-3947-4490-a83f-f4ddb91e4900","ts":"2025-05-05T22:37:05.316-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"8ee5b3a0-3947-4490-a83f-f4ddb91e4900","ts":"2025-05-05T22:37:05.316-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c9869363-e5d7-4f37-bebf-ebefb1767ddd","ts":"2025-05-05T22:37:05.330-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"c9869363-e5d7-4f37-bebf-ebefb1767ddd","ts":"2025-05-05T22:37:05.330-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"41a556e6-f9e3-44f8-9922-ca0ba1e43ca5","ts":"2025-05-05T22:37:05.330-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"41a556e6-f9e3-44f8-9922-ca0ba1e43ca5","ts":"2025-05-05T22:37:05.330-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"e2ae6af1-c813-4e07-ac7d-7421017ca833","ts":"2025-05-05T22:37:05.331-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"e2ae6af1-c813-4e07-ac7d-7421017ca833","ts":"2025-05-05T22:37:05.331-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9228497a-2ed6-4abc-8715-931dd7d37f71","ts":"2025-05-05T22:37:05.331-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"9228497a-2ed6-4abc-8715-931dd7d37f71","ts":"2025-05-05T22:37:05.331-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ffbfd6ae-eed0-4f34-8990-06e2920d985b","ts":"2025-05-05T22:37:05.344-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.code","nodeName":"Code1"}}
{"__type":"$$EventMessageConfirm","confirm":"ffbfd6ae-eed0-4f34-8990-06e2920d985b","ts":"2025-05-05T22:37:05.344-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"243f8b7e-7622-4d73-bd84-c51cf5acc268","ts":"2025-05-05T22:37:05.345-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"243f8b7e-7622-4d73-bd84-c51cf5acc268","ts":"2025-05-05T22:37:05.345-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9ce7f75a-5c4c-40e5-a14c-fd3096c8a3ac","ts":"2025-05-05T22:37:05.348-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.set","nodeName":"PrepararRespuestaPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"9ce7f75a-5c4c-40e5-a14c-fd3096c8a3ac","ts":"2025-05-05T22:37:05.349-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"102681f1-fded-4f81-813d-e175830dc1ba","ts":"2025-05-05T22:37:05.349-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"102681f1-fded-4f81-813d-e175830dc1ba","ts":"2025-05-05T22:37:05.349-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b81cbdde-21bd-4468-9d9e-2975f51b8680","ts":"2025-05-05T22:37:05.352-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"571","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"b81cbdde-21bd-4468-9d9e-2975f51b8680","ts":"2025-05-05T22:37:05.352-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"26ab4a8b-0147-415d-a964-0b943b08d975","ts":"2025-05-05T22:37:05.356-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"571","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"26ab4a8b-0147-415d-a964-0b943b08d975","ts":"2025-05-05T22:37:05.356-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"7c04abc3-5cc0-4fa2-9d53-2ee33d918b62","ts":"2025-05-05T22:37:13.733-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"572","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"7c04abc3-5cc0-4fa2-9d53-2ee33d918b62","ts":"2025-05-05T22:37:13.733-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"95b4c75f-5748-4f32-b3bd-e4adc8dbe38f","ts":"2025-05-05T22:37:13.734-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"95b4c75f-5748-4f32-b3bd-e4adc8dbe38f","ts":"2025-05-05T22:37:13.734-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9a28e085-ce84-4e2c-b661-37b8bd9a6185","ts":"2025-05-05T22:37:13.734-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"9a28e085-ce84-4e2c-b661-37b8bd9a6185","ts":"2025-05-05T22:37:13.734-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8c6075fe-a44e-4794-b2e3-9a914e18d355","ts":"2025-05-05T22:37:13.735-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"8c6075fe-a44e-4794-b2e3-9a914e18d355","ts":"2025-05-05T22:37:13.735-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"25fff457-8d71-474e-a74e-77a01d31127f","ts":"2025-05-05T22:37:13.735-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"25fff457-8d71-474e-a74e-77a01d31127f","ts":"2025-05-05T22:37:13.735-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"dfb4ae3b-4d58-494e-b877-823c5e5f431e","ts":"2025-05-05T22:37:13.736-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"dfb4ae3b-4d58-494e-b877-823c5e5f431e","ts":"2025-05-05T22:37:13.736-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"da2f6864-b7d5-436c-b654-cd0c359b14b6","ts":"2025-05-05T22:37:13.747-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"da2f6864-b7d5-436c-b654-cd0c359b14b6","ts":"2025-05-05T22:37:13.747-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"aa3e064e-b214-496b-8508-f4ee79575c06","ts":"2025-05-05T22:37:16.634-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"aa3e064e-b214-496b-8508-f4ee79575c06","ts":"2025-05-05T22:37:16.635-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"730c2e63-0b21-4c35-b1f9-b73343e632c8","ts":"2025-05-05T22:37:16.635-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"572","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: ENTIENDE MUZZA\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"¡Ciao, amigo! Claro que entiendo la Pizza Muzzarella, es una de nuestras delicias. Si deseas hacer un pedido, no dudes en decirme cuántas necesitas. Estamos aquí para servirte en Moreno 381, de lunes a domingo.\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":63,\"promptTokens\":649,\"totalTokens\":712}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"730c2e63-0b21-4c35-b1f9-b73343e632c8","ts":"2025-05-05T22:37:16.635-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f191d827-66de-4484-9c16-838c1416ed82","ts":"2025-05-05T22:37:16.637-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"f191d827-66de-4484-9c16-838c1416ed82","ts":"2025-05-05T22:37:16.637-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"36ce96ae-054c-485d-a59c-446d0080a34f","ts":"2025-05-05T22:37:16.637-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"36ce96ae-054c-485d-a59c-446d0080a34f","ts":"2025-05-05T22:37:16.637-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1a91fee6-6391-4826-9685-cd7fbc95c6d2","ts":"2025-05-05T22:37:16.648-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"1a91fee6-6391-4826-9685-cd7fbc95c6d2","ts":"2025-05-05T22:37:16.648-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"71ab3d66-e37f-4c0d-ad16-a01035a42d10","ts":"2025-05-05T22:37:16.648-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"71ab3d66-e37f-4c0d-ad16-a01035a42d10","ts":"2025-05-05T22:37:16.648-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7058b4d6-51ab-48a3-a4e6-b5f0e7ba78e9","ts":"2025-05-05T22:37:16.649-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"7058b4d6-51ab-48a3-a4e6-b5f0e7ba78e9","ts":"2025-05-05T22:37:16.650-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"6007ed18-d8b9-404e-9938-e0caad26f86a","ts":"2025-05-05T22:37:16.650-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"6007ed18-d8b9-404e-9938-e0caad26f86a","ts":"2025-05-05T22:37:16.650-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"44b9c9f3-1ff1-4fe9-ab71-9a681c60e4e5","ts":"2025-05-05T22:37:16.651-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"44b9c9f3-1ff1-4fe9-ab71-9a681c60e4e5","ts":"2025-05-05T22:37:16.651-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0ff01382-9539-403c-8750-0c5b21f86f73","ts":"2025-05-05T22:37:16.651-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"0ff01382-9539-403c-8750-0c5b21f86f73","ts":"2025-05-05T22:37:16.652-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a7603d19-c403-46eb-9803-0838afb4e538","ts":"2025-05-05T22:37:16.652-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"572","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"a7603d19-c403-46eb-9803-0838afb4e538","ts":"2025-05-05T22:37:16.652-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"7cbb3095-2abe-493c-a2cf-a5cb1f91ec90","ts":"2025-05-05T22:37:16.653-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"572","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"7cbb3095-2abe-493c-a2cf-a5cb1f91ec90","ts":"2025-05-05T22:37:16.653-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"1469ae99-ce2b-4393-b41f-62490a37b0cb","ts":"2025-05-05T22:37:27.895-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"573","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"1469ae99-ce2b-4393-b41f-62490a37b0cb","ts":"2025-05-05T22:37:27.895-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f303601e-bb89-4355-9232-9d207a515b59","ts":"2025-05-05T22:37:27.896-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"f303601e-bb89-4355-9232-9d207a515b59","ts":"2025-05-05T22:37:27.896-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"26ee4897-bed4-459b-8f4d-3e85f24f78c3","ts":"2025-05-05T22:37:27.896-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"26ee4897-bed4-459b-8f4d-3e85f24f78c3","ts":"2025-05-05T22:37:27.896-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"26570a64-4225-4450-86f7-1e7c1ff1b8e2","ts":"2025-05-05T22:37:27.896-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"26570a64-4225-4450-86f7-1e7c1ff1b8e2","ts":"2025-05-05T22:37:27.896-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f39c48a7-6c79-410e-9ffc-9df9f322e3d2","ts":"2025-05-05T22:37:27.897-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"f39c48a7-6c79-410e-9ffc-9df9f322e3d2","ts":"2025-05-05T22:37:27.897-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d60edc01-5b96-4775-b5f1-0d64e9ef22ec","ts":"2025-05-05T22:37:27.897-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"d60edc01-5b96-4775-b5f1-0d64e9ef22ec","ts":"2025-05-05T22:37:27.898-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"59b4a9bb-3037-4e7d-a482-7d92cb6b9101","ts":"2025-05-05T22:37:27.909-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"59b4a9bb-3037-4e7d-a482-7d92cb6b9101","ts":"2025-05-05T22:37:27.909-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"78ebd926-21f6-4306-bf67-290c29ec6d43","ts":"2025-05-05T22:37:30.781-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"78ebd926-21f6-4306-bf67-290c29ec6d43","ts":"2025-05-05T22:37:30.782-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"ea32aad8-956a-4e8b-9d7d-278cc7078f52","ts":"2025-05-05T22:37:30.782-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"573","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: confírmame el pedido\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Hola, querido cliente. Parece que no has mencionado los productos que deseas pedir. Por favor, indícame qué pizza o faina te gustaría y con gusto lo confirmaré. ¡Te espero!\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":50,\"promptTokens\":648,\"totalTokens\":698}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"ea32aad8-956a-4e8b-9d7d-278cc7078f52","ts":"2025-05-05T22:37:30.782-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"35c2f62c-fcef-41f2-b7e0-56c14cc5bac7","ts":"2025-05-05T22:37:30.785-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"35c2f62c-fcef-41f2-b7e0-56c14cc5bac7","ts":"2025-05-05T22:37:30.786-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"afea8dae-6416-42b1-b1ce-be0de58615b5","ts":"2025-05-05T22:37:30.787-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"afea8dae-6416-42b1-b1ce-be0de58615b5","ts":"2025-05-05T22:37:30.787-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"07cbf4b4-aa9e-4c17-b069-87a4a6dfbf74","ts":"2025-05-05T22:37:30.800-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"07cbf4b4-aa9e-4c17-b069-87a4a6dfbf74","ts":"2025-05-05T22:37:30.800-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"919296f1-d3c1-4cb0-a715-4ae0db8e2768","ts":"2025-05-05T22:37:30.800-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"919296f1-d3c1-4cb0-a715-4ae0db8e2768","ts":"2025-05-05T22:37:30.800-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c560a6f6-8454-4c12-ad65-fd4066c7f709","ts":"2025-05-05T22:37:30.803-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"c560a6f6-8454-4c12-ad65-fd4066c7f709","ts":"2025-05-05T22:37:30.803-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"f8924db1-b058-43dc-820d-47f9b7a519dd","ts":"2025-05-05T22:37:30.807-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"f8924db1-b058-43dc-820d-47f9b7a519dd","ts":"2025-05-05T22:37:30.808-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"53231a07-aa4e-40d0-b839-6aa3820ffdeb","ts":"2025-05-05T22:37:30.811-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"53231a07-aa4e-40d0-b839-6aa3820ffdeb","ts":"2025-05-05T22:37:30.811-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"51c42d87-9282-488d-a9d6-2b77e3219db9","ts":"2025-05-05T22:37:30.812-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"51c42d87-9282-488d-a9d6-2b77e3219db9","ts":"2025-05-05T22:37:30.813-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"da7f8418-93e9-41a7-a2e1-322506033e74","ts":"2025-05-05T22:37:30.814-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"573","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"da7f8418-93e9-41a7-a2e1-322506033e74","ts":"2025-05-05T22:37:30.815-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"4b50ec0b-e495-487c-ae72-1c4449eb463f","ts":"2025-05-05T22:37:30.816-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"573","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"4b50ec0b-e495-487c-ae72-1c4449eb463f","ts":"2025-05-05T22:37:30.816-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"9e06ca80-3adc-46d3-a5ed-040b14c536d7","ts":"2025-05-05T22:37:42.688-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"574","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"9e06ca80-3adc-46d3-a5ed-040b14c536d7","ts":"2025-05-05T22:37:42.688-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"9353d8a3-0066-4249-a849-5cbb7d4ed2db","ts":"2025-05-05T22:37:42.689-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"9353d8a3-0066-4249-a849-5cbb7d4ed2db","ts":"2025-05-05T22:37:42.689-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"00de1936-b7cb-4f17-b795-9a4e423ec718","ts":"2025-05-05T22:37:42.689-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"00de1936-b7cb-4f17-b795-9a4e423ec718","ts":"2025-05-05T22:37:42.689-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0a09e8d7-11da-481b-ac9c-e04687223883","ts":"2025-05-05T22:37:42.689-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"0a09e8d7-11da-481b-ac9c-e04687223883","ts":"2025-05-05T22:37:42.689-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7037a948-767c-4d2a-b98b-fbbf7f110e8b","ts":"2025-05-05T22:37:42.689-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"7037a948-767c-4d2a-b98b-fbbf7f110e8b","ts":"2025-05-05T22:37:42.689-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"52f5dc38-b6e3-44e1-94be-d77f71cf2c2e","ts":"2025-05-05T22:37:42.690-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"52f5dc38-b6e3-44e1-94be-d77f71cf2c2e","ts":"2025-05-05T22:37:42.690-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"022b5552-faf8-4121-83b8-4d1aef95c466","ts":"2025-05-05T22:37:42.696-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"022b5552-faf8-4121-83b8-4d1aef95c466","ts":"2025-05-05T22:37:42.696-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"0ee99660-9ca4-4b33-9e5e-24c183d7e5ba","ts":"2025-05-05T22:37:44.599-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"0ee99660-9ca4-4b33-9e5e-24c183d7e5ba","ts":"2025-05-05T22:37:44.599-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"4a11afef-8986-4260-ae4c-e303e4589542","ts":"2025-05-05T22:37:44.599-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"574","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: ah oki\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"¡Buongiorno! Si necesitas ayuda con un pedido de nuestras deliciosas pizzas o cualquier otra consulta, estoy aquí para asistirte. ¡Espero verte pronto en Pizzeria Italiana!\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":48,\"promptTokens\":645,\"totalTokens\":693}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"4a11afef-8986-4260-ae4c-e303e4589542","ts":"2025-05-05T22:37:44.599-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2d953b12-cadf-4a67-be60-7f7ada57a9eb","ts":"2025-05-05T22:37:44.603-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"2d953b12-cadf-4a67-be60-7f7ada57a9eb","ts":"2025-05-05T22:37:44.603-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"3881eb73-7d26-48a7-8d52-b432b5152479","ts":"2025-05-05T22:37:44.608-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"3881eb73-7d26-48a7-8d52-b432b5152479","ts":"2025-05-05T22:37:44.608-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1ebc5aea-3de9-4dea-8c96-53d8ca8d9c4e","ts":"2025-05-05T22:37:44.624-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"1ebc5aea-3de9-4dea-8c96-53d8ca8d9c4e","ts":"2025-05-05T22:37:44.625-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"64db118a-c07a-433b-85c8-2cebb1ad5c7c","ts":"2025-05-05T22:37:44.625-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"64db118a-c07a-433b-85c8-2cebb1ad5c7c","ts":"2025-05-05T22:37:44.626-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"998706ca-f3ad-4e2d-ac4f-a638488404f6","ts":"2025-05-05T22:37:44.627-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"998706ca-f3ad-4e2d-ac4f-a638488404f6","ts":"2025-05-05T22:37:44.627-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"203554e5-9308-40cd-9768-8d2370ac915f","ts":"2025-05-05T22:37:44.627-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"203554e5-9308-40cd-9768-8d2370ac915f","ts":"2025-05-05T22:37:44.627-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a701715b-6892-45b7-b847-28d7ea0855c4","ts":"2025-05-05T22:37:44.629-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"a701715b-6892-45b7-b847-28d7ea0855c4","ts":"2025-05-05T22:37:44.629-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"d6aae53a-4f54-40a7-b74f-387ad5c9836a","ts":"2025-05-05T22:37:44.630-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"d6aae53a-4f54-40a7-b74f-387ad5c9836a","ts":"2025-05-05T22:37:44.630-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"b1d0ec50-c3f9-445c-87e4-f7ced0e6b488","ts":"2025-05-05T22:37:44.633-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"574","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"b1d0ec50-c3f9-445c-87e4-f7ced0e6b488","ts":"2025-05-05T22:37:44.633-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"646c6ba4-03f3-4f91-a948-4fb389e8c323","ts":"2025-05-05T22:37:44.635-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"574","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"646c6ba4-03f3-4f91-a948-4fb389e8c323","ts":"2025-05-05T22:37:44.635-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"6d9f46b1-abd7-416c-848a-db7a80ab0525","ts":"2025-05-05T22:37:45.187-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"575","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"6d9f46b1-abd7-416c-848a-db7a80ab0525","ts":"2025-05-05T22:37:45.187-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"259e160d-3b3a-4dcf-90ec-8cc6a13392f0","ts":"2025-05-05T22:37:45.187-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"259e160d-3b3a-4dcf-90ec-8cc6a13392f0","ts":"2025-05-05T22:37:45.187-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a8452d1c-f911-4030-960e-020103c21de3","ts":"2025-05-05T22:37:45.187-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"a8452d1c-f911-4030-960e-020103c21de3","ts":"2025-05-05T22:37:45.187-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"099ba14d-e110-4ca2-b5c3-cfae123184a8","ts":"2025-05-05T22:37:45.188-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"099ba14d-e110-4ca2-b5c3-cfae123184a8","ts":"2025-05-05T22:37:45.188-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"cd3cc06c-4695-484f-8e4d-847d9a67d55f","ts":"2025-05-05T22:37:45.190-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"cd3cc06c-4695-484f-8e4d-847d9a67d55f","ts":"2025-05-05T22:37:45.190-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"73f668b6-3715-4427-be2f-a8bf268ed7fa","ts":"2025-05-05T22:37:45.191-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"73f668b6-3715-4427-be2f-a8bf268ed7fa","ts":"2025-05-05T22:37:45.191-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"bbd3b835-41b6-4aea-a2e2-67dab2b3f30e","ts":"2025-05-05T22:37:45.204-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"bbd3b835-41b6-4aea-a2e2-67dab2b3f30e","ts":"2025-05-05T22:37:45.204-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"ac01a0a5-8e5d-401b-8080-3a1c23a182ad","ts":"2025-05-05T22:37:46.768-03:00","eventName":"n8n.workflow.started","message":"n8n.workflow.started","payload":{"executionId":"576","workflowId":"KhgtwniJDpDOSLuJ","isManual":false,"workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"ac01a0a5-8e5d-401b-8080-3a1c23a182ad","ts":"2025-05-05T22:37:46.768-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"064bd351-fbf7-47c1-b1a7-0da0348fa1a8","ts":"2025-05-05T22:37:46.769-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"064bd351-fbf7-47c1-b1a7-0da0348fa1a8","ts":"2025-05-05T22:37:46.769-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"a65536d9-f6f8-49b3-8340-4b0fb0e2c913","ts":"2025-05-05T22:37:46.769-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"n8n-nodes-base.webhook","nodeName":"Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"a65536d9-f6f8-49b3-8340-4b0fb0e2c913","ts":"2025-05-05T22:37:46.769-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"70ddffe3-9fc7-4e1c-bbf2-d879fc41defe","ts":"2025-05-05T22:37:46.769-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"70ddffe3-9fc7-4e1c-bbf2-d879fc41defe","ts":"2025-05-05T22:37:46.769-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"abe1ec02-65cd-4089-a048-9cfd94c8a6fd","ts":"2025-05-05T22:37:46.769-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"n8n-nodes-base.switch","nodeName":"ModuloPedidosActivo"}}
{"__type":"$$EventMessageConfirm","confirm":"abe1ec02-65cd-4089-a048-9cfd94c8a6fd","ts":"2025-05-05T22:37:46.769-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c870b8ce-0c23-4d5d-be67-11cca4ef0e58","ts":"2025-05-05T22:37:46.770-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"c870b8ce-0c23-4d5d-be67-11cca4ef0e58","ts":"2025-05-05T22:37:46.770-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"2c488fe0-b930-4270-82c9-037c5559883e","ts":"2025-05-05T22:37:46.779-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"2c488fe0-b930-4270-82c9-037c5559883e","ts":"2025-05-05T22:37:46.780-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ac0414cf-4425-4d39-a9d0-e05fdaa87f0b","ts":"2025-05-05T22:37:46.796-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"ac0414cf-4425-4d39-a9d0-e05fdaa87f0b","ts":"2025-05-05T22:37:46.796-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"d7604773-f479-4a42-8db8-f549672b2097","ts":"2025-05-05T22:37:46.796-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"575","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: re bien amor\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"¡Ciao! ¿Cómo puedo ayudarte hoy? Si deseas alguna de nuestras deliciosas pizzas, no dudes en decírmelo. Estoy aquí para servirte.\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_0392822090\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":43,\"promptTokens\":645,\"totalTokens\":688}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"d7604773-f479-4a42-8db8-f549672b2097","ts":"2025-05-05T22:37:46.796-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7cf9ba28-f057-4059-b417-f122d1671f6d","ts":"2025-05-05T22:37:46.797-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"7cf9ba28-f057-4059-b417-f122d1671f6d","ts":"2025-05-05T22:37:46.797-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"06f50c3b-a125-43d1-9e95-65bd1b9cdf1c","ts":"2025-05-05T22:37:46.797-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"06f50c3b-a125-43d1-9e95-65bd1b9cdf1c","ts":"2025-05-05T22:37:46.797-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"615dd26b-3b7b-4f38-937b-a030c930ada8","ts":"2025-05-05T22:37:46.804-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"615dd26b-3b7b-4f38-937b-a030c930ada8","ts":"2025-05-05T22:37:46.805-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"712e14fb-f9c6-47db-a41b-bdc9709599be","ts":"2025-05-05T22:37:46.805-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"712e14fb-f9c6-47db-a41b-bdc9709599be","ts":"2025-05-05T22:37:46.805-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"59c51428-4de2-4a69-bf7d-5688f23b0b2d","ts":"2025-05-05T22:37:46.806-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"59c51428-4de2-4a69-bf7d-5688f23b0b2d","ts":"2025-05-05T22:37:46.806-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"99d2073b-26f8-4487-a53e-b27ee829b5f3","ts":"2025-05-05T22:37:46.806-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"99d2073b-26f8-4487-a53e-b27ee829b5f3","ts":"2025-05-05T22:37:46.806-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7d861cb9-6273-4c8d-8572-eb4e7efefcb0","ts":"2025-05-05T22:37:46.807-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"7d861cb9-6273-4c8d-8572-eb4e7efefcb0","ts":"2025-05-05T22:37:46.807-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8628bb03-0f0b-41bf-b647-84280e318d99","ts":"2025-05-05T22:37:46.807-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"8628bb03-0f0b-41bf-b647-84280e318d99","ts":"2025-05-05T22:37:46.807-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"16420c21-47bb-44a9-af37-1acfeb3d3bbb","ts":"2025-05-05T22:37:46.807-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"575","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"16420c21-47bb-44a9-af37-1acfeb3d3bbb","ts":"2025-05-05T22:37:46.808-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"1f6d4f18-d99e-4ee1-8cf4-8d92b2428be4","ts":"2025-05-05T22:37:46.808-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"575","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"1f6d4f18-d99e-4ee1-8cf4-8d92b2428be4","ts":"2025-05-05T22:37:46.808-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"8051eed8-8c34-4456-a69a-9e720098b65a","ts":"2025-05-05T22:37:48.500-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","nodeName":"OpenAI Chat Model1"}}
{"__type":"$$EventMessageConfirm","confirm":"8051eed8-8c34-4456-a69a-9e720098b65a","ts":"2025-05-05T22:37:48.500-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageAiNode","id":"9ee1bef8-f0de-4285-919f-47eb54bfe998","ts":"2025-05-05T22:37:48.500-03:00","eventName":"n8n.ai.llm.generated","message":"n8n.ai.llm.generated","payload":{"executionId":"576","nodeName":"OpenAI Chat Model1","workflowName":"Bot Whatsapp","nodeType":"@n8n/n8n-nodes-langchain.lmChatOpenAi","workflowId":"KhgtwniJDpDOSLuJ","msg":"{\"messages\":[\"System: You are a helpful assistant\\nHuman: Eres un contestador de clientes de un negocio llamado Pizzeria Italiana. Es un/una restaurante ubicado/a en Buenos Aires, la dirección es Moreno 381. Los horarios de atención son: {\\\"Lunes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Martes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Miércoles\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Jueves\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Viernes\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Sábado\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"},\\\"Domingo\\\":{\\\"open\\\":\\\"09:00\\\",\\\"close\\\":\\\"18:00\\\"}}, y el dueño del negocio te da la sugerencia/aclaracion de: Habla como un chef italiano.. Algunas preguntas frecuentes con las respuestas que deberias dar son: Pregunta: cuanto dura el corte? Respuesta: 10 minutos. Los productos/servicios que ofrece el negocio son: Pizza Napolitana:  - $10000\\nPizza 4 Quesos:  - $14000\\nFaina:  - $6000\\nPizza Muzzarella:  - $10000\\nPizza Mediterranea:  - $14000\\nPizza Jamon:  - $13000\\nPizza Jamon y Morrón:  - $15000\\nPizza de Anchoas:  - $12000 si vas a listarlos, asegurate de darle un buen formato, con los nombres en negrita y haciendo un salto de linea para cada producto. No improvises productos/servicios que no estan listados ahi, y usa los precios correctamente.\\n\\nTu tarea es determinar si un mensaje de un cliente tiene la intención de realizar un pedido de nuestros servicios/productos. Si es un pedido, identifica todos los productos mencionados y sus respectivas cantidades (si no se menciona cantidad, asume 1). Responde SOLO con un JSON válido en una sola línea, sin texto adicional, sin envolver en un array, sin campos como \\\"output\\\", y sin saltos de línea dentro del JSON. Usa el siguiente formato exacto:\\n\\n{\\n  \\\"esPedido\\\": 1,\\n  \\\"productos\\\": [\\n    {\\\"nombre\\\": \\\"nombre del producto\\\", \\\"cantidad\\\": número},\\n    {\\\"nombre\\\": \\\"nombre del otro producto\\\", \\\"cantidad\\\": número}\\n  ],\\n  \\\"negocioId\\\": 1,\\n  \\\"numeroCliente\\\": \\\"5491122503045@c.us\\\"\\n}\\n\\nSi NO es un pedido, respondele siguiendo la conversación con todo el contexto que tienes, respondiendole cualquier consulta amablemente.\\n\\n{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"Aquí tu respuesta\\\" }\\n\\nUsa siempre 1 y 0 (números) en lugar de true y false. Para el campo \\\"producto\\\", usa null (sin comillas) cuando no sea un pedido. No incluyas explicaciones ni texto fuera del JSON. Asegúrate de que el JSON sea parseable directamente.\\n\\nEl cliente dice: te amo\"],\"options\":{\"openai_api_key\":{\"lc\":1,\"type\":\"secret\",\"id\":[\"OPENAI_API_KEY\"]},\"model\":\"gpt-4o-mini\",\"timeout\":60000,\"max_retries\":2,\"configuration\":{\"baseURL\":\"https://api.openai.com/v1\"},\"model_kwargs\":{}},\"response\":{\"response\":{\"generations\":[[{\"text\":\"{\\\"esPedido\\\":0,\\\"respuesta\\\":\\\"¡Grazie, amigo! Nos encanta que aprecies nuestra pizzería. Si deseas hacer un pedido de nuestras deliciosas pizzas, estaré aquí para ayudarte.\\\"}\",\"generationInfo\":{\"prompt\":0,\"completion\":0,\"finish_reason\":\"stop\",\"system_fingerprint\":\"fp_129a36352a\",\"model_name\":\"gpt-4o-mini-2024-07-18\"}}]]},\"tokenUsage\":{\"completionTokens\":44,\"promptTokens\":644,\"totalTokens\":688}}}"}}
{"__type":"$$EventMessageConfirm","confirm":"9ee1bef8-f0de-4285-919f-47eb54bfe998","ts":"2025-05-05T22:37:48.500-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"fd1c98b8-d057-4ccc-b509-f58112c64d32","ts":"2025-05-05T22:37:48.502-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"@n8n/n8n-nodes-langchain.agent","nodeName":"DetectarPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"fd1c98b8-d057-4ccc-b509-f58112c64d32","ts":"2025-05-05T22:37:48.502-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"1f75e623-75c0-4033-a345-54077d6c8129","ts":"2025-05-05T22:37:48.502-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"1f75e623-75c0-4033-a345-54077d6c8129","ts":"2025-05-05T22:37:48.502-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"ade20b99-24c1-48d0-94b1-8d2245fcac72","ts":"2025-05-05T22:37:48.509-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"n8n-nodes-base.code","nodeName":"Parseo"}}
{"__type":"$$EventMessageConfirm","confirm":"ade20b99-24c1-48d0-94b1-8d2245fcac72","ts":"2025-05-05T22:37:48.509-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"16622ede-7385-48ed-bd16-76b8a553f291","ts":"2025-05-05T22:37:48.511-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"16622ede-7385-48ed-bd16-76b8a553f291","ts":"2025-05-05T22:37:48.511-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"052d3b44-2ca8-436c-bb0b-09621fe03046","ts":"2025-05-05T22:37:48.511-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"n8n-nodes-base.switch","nodeName":"EsPedido"}}
{"__type":"$$EventMessageConfirm","confirm":"052d3b44-2ca8-436c-bb0b-09621fe03046","ts":"2025-05-05T22:37:48.511-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"7d47a1f5-6a73-47de-90f4-62def58cd2ed","ts":"2025-05-05T22:37:48.511-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"7d47a1f5-6a73-47de-90f4-62def58cd2ed","ts":"2025-05-05T22:37:48.511-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"51f7694b-fb86-4351-86f5-73ae84a9e6eb","ts":"2025-05-05T22:37:48.512-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"n8n-nodes-base.set","nodeName":"Edit Fields"}}
{"__type":"$$EventMessageConfirm","confirm":"51f7694b-fb86-4351-86f5-73ae84a9e6eb","ts":"2025-05-05T22:37:48.512-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"c7e4df90-24ff-413e-b691-1226e84913bc","ts":"2025-05-05T22:37:48.512-03:00","eventName":"n8n.node.started","message":"n8n.node.started","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"c7e4df90-24ff-413e-b691-1226e84913bc","ts":"2025-05-05T22:37:48.512-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageNode","id":"21a7de4a-6e5f-42a0-bbb8-5046b1f555cd","ts":"2025-05-05T22:37:48.512-03:00","eventName":"n8n.node.finished","message":"n8n.node.finished","payload":{"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp","executionId":"576","nodeType":"n8n-nodes-base.respondToWebhook","nodeName":"Respond to Webhook"}}
{"__type":"$$EventMessageConfirm","confirm":"21a7de4a-6e5f-42a0-bbb8-5046b1f555cd","ts":"2025-05-05T22:37:48.512-03:00","source":{"id":"0","name":"eventBus"}}
{"__type":"$$EventMessageWorkflow","id":"c56f3c21-eb9d-4c66-a7e5-e87abbf5b32d","ts":"2025-05-05T22:37:48.513-03:00","eventName":"n8n.workflow.success","message":"n8n.workflow.success","payload":{"executionId":"576","success":true,"isManual":false,"workflowId":"KhgtwniJDpDOSLuJ","workflowName":"Bot Whatsapp"}}
{"__type":"$$EventMessageConfirm","confirm":"c56f3c21-eb9d-4c66-a7e5-e87abbf5b32d","ts":"2025-05-05T22:37:48.513-03:00","source":{"id":"0","name":"eventBus"}}
